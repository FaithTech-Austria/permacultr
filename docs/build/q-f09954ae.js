import{C as El,b as xl,a as Il}from"./q-6c9b5407.js";import{p as jp}from"./q-e9d9a766.js";import"./q-725317a4.js";var Nl=Object.defineProperty,bl=(t,e,n)=>e in t?Nl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oa=(t,e,n)=>(bl(t,typeof e!="symbol"?e+"":e,n),n),tu=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},or=(t,e,n)=>(tu(t,e,"read from private field"),n?n.call(t):e.get(t)),sa=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ys=(t,e,n,r)=>(tu(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);function xt(){}function Cl(t,e){for(const n in e)t[n]=e[n];return t}function eu(t){return t()}function aa(){return Object.create(null)}function Er(t){t.forEach(eu)}function nu(t){return typeof t=="function"}function zr(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let wo;function Ae(t,e){return t===e?!0:(wo||(wo=document.createElement("a")),wo.href=e,t===wo.href)}function Sl(t){return Object.keys(t).length===0}function wl(t,e,n,r){if(t){const i=ru(t,e,n,r);return t[0](i)}}function ru(t,e,n,r){return t[1]&&r?Cl(n.ctx.slice(),t[1](r(e))):n.ctx}function Ll(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function Pl(t,e,n,r,i,o){if(i){const s=ru(e,n,r,o);t.p(s,i)}}function Ol(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function ua(t){return t??""}function nt(t,e){t.appendChild(e)}function Dt(t,e,n){t.insertBefore(e,n||null)}function Mt(t){t.parentNode&&t.parentNode.removeChild(t)}function pt(t){return document.createElement(t)}function Hn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Pr(t){return document.createTextNode(t)}function nn(){return Pr(" ")}function Rl(){return Pr("")}function Ie(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Tl(t){return function(e){return e.preventDefault(),t.call(this,e)}}function P(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ml(t){return Array.from(t.childNodes)}function to(t,e){e=""+e,t.data!==e&&(t.data=e)}function la(t,e){t.value=e??""}function on(t,e,n){t.classList.toggle(e,!!n)}function Dl(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let eo;function Qi(t){eo=t}function iu(){if(!eo)throw new Error("Function called outside component initialization");return eo}function Al(t){iu().$$.on_destroy.push(t)}function Fl(){const t=iu();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=Dl(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function ca(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const _i=[],Is=[];let xi=[];const pa=[],Gl=Promise.resolve();let Ns=!1;function kl(){Ns||(Ns=!0,Gl.then(ou))}function bs(t){xi.push(t)}const ms=new Set;let mi=0;function ou(){if(mi!==0)return;const t=eo;do{try{for(;mi<_i.length;){const e=_i[mi];mi++,Qi(e),Bl(e.$$)}}catch(e){throw _i.length=0,mi=0,e}for(Qi(null),_i.length=0,mi=0;Is.length;)Is.pop()();for(let e=0;e<xi.length;e+=1){const n=xi[e];ms.has(n)||(ms.add(n),n())}xi.length=0}while(_i.length);for(;pa.length;)pa.pop()();Ns=!1,ms.clear(),Qi(t)}function Bl(t){if(t.fragment!==null){t.update(),Er(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bs)}}function ql(t){const e=[],n=[];xi.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),xi=e}const Mo=new Set;let jr;function Do(){jr={r:0,c:[],p:jr}}function Ao(){jr.r||Er(jr.c),jr=jr.p}function qt(t,e){t&&t.i&&(Mo.delete(t),t.i(e))}function ce(t,e,n,r){if(t&&t.o){if(Mo.has(t))return;Mo.add(t),jr.c.push(()=>{Mo.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ha(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function zl(t,e){ce(t,1,1,()=>{e.delete(t.key)})}function Ul(t,e,n,r,i,o,s,a,u,l,c,p){let h=t.length,f=o.length,g=h;const m={};for(;g--;)m[t[g].key]=g;const d=[],x=new Map,v=new Map,I=[];for(g=f;g--;){const M=p(i,o,g),R=n(M);let S=s.get(R);S?r&&I.push(()=>S.p(M,e)):(S=l(R,M),S.c()),x.set(R,d[g]=S),R in m&&v.set(R,Math.abs(g-m[R]))}const C=new Set,b=new Set;function L(M){qt(M,1),M.m(a,c),s.set(M.key,M),c=M.first,f--}for(;h&&f;){const M=d[f-1],R=t[h-1],S=M.key,F=R.key;M===R?(c=M.first,h--,f--):x.has(F)?!s.has(S)||C.has(S)?L(M):b.has(F)?h--:v.get(S)>v.get(F)?(b.add(S),L(M)):(C.add(F),h--):(u(R,s),h--)}for(;h--;){const M=t[h];x.has(M.key)||u(M,s)}for(;f;)L(d[f-1]);return Er(I),d}function Or(t){t&&t.c()}function lr(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),bs(()=>{const o=t.$$.on_mount.map(eu).filter(nu);t.$$.on_destroy?t.$$.on_destroy.push(...o):Er(o),t.$$.on_mount=[]}),i.forEach(bs)}function cr(t,e){const n=t.$$;n.fragment!==null&&(ql(n.after_update),Er(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vl(t,e){t.$$.dirty[0]===-1&&(_i.push(t),kl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ur(t,e,n,r,i,o,s,a=[-1]){const u=eo;Qi(t);const l=t.$$={fragment:null,ctx:[],props:o,update:xt,not_equal:i,bound:aa(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:aa(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};s&&s(l.root);let c=!1;if(l.ctx=n?n(t,e.props||{},(p,h,...f)=>{const g=f.length?f[0]:h;return l.ctx&&i(l.ctx[p],l.ctx[p]=g)&&(!l.skip_bound&&l.bound[p]&&l.bound[p](g),c&&Vl(t,p)),h}):[],l.update(),c=!0,Er(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const p=Ml(e.target);l.fragment&&l.fragment.l(p),p.forEach(Mt)}else l.fragment&&l.fragment.c();e.intro&&qt(t.$$.fragment),lr(t,e.target,e.anchor),ou()}Qi(u)}class Vr{constructor(){oa(this,"$$"),oa(this,"$$set")}$destroy(){cr(this,1),this.$destroy=xt}$on(e,n){if(!nu(n))return xt;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Sl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $l="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($l);function Xl(t){let e,n;return{c(){e=Hn("svg"),n=Hn("path"),P(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),P(e,"viewBox","0 0 14 14"),P(e,"width","13"),P(e,"height","13"),P(e,"class","svelte-en2qvf")},m(r,i){Dt(r,e,i),nt(e,n)},p:xt,i:xt,o:xt,d(r){r&&Mt(e)}}}class su extends Vr{constructor(e){super(),Ur(this,e,null,Xl,zr,{})}}function jl(t){let e,n;return{c(){e=Hn("svg"),n=Hn("path"),P(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),P(e,"viewBox","0 0 30 30"),P(e,"fill","none"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"class","svelte-d2loi5")},m(r,i){Dt(r,e,i),nt(e,n)},p:xt,i:xt,o:xt,d(r){r&&Mt(e)}}}class au extends Vr{constructor(e){super(),Ur(this,e,null,jl,zr,{})}}function Yl(t){let e,n;return{c(){e=pt("img"),Ae(e.src,n=t[3]+"area.svg")||P(e,"src",n),P(e,"alt",t[6]),P(e,"class","svelte-ltkwvy")},m(r,i){Dt(r,e,i)},p(r,i){i&8&&!Ae(e.src,n=r[3]+"area.svg")&&P(e,"src",n),i&64&&P(e,"alt",r[6])},d(r){r&&Mt(e)}}}function Hl(t){let e,n;return{c(){e=pt("img"),Ae(e.src,n=t[3]+"poi.svg")||P(e,"src",n),P(e,"alt",t[6]),P(e,"class","svelte-ltkwvy")},m(r,i){Dt(r,e,i)},p(r,i){i&8&&!Ae(e.src,n=r[3]+"poi.svg")&&P(e,"src",n),i&64&&P(e,"alt",r[6])},d(r){r&&Mt(e)}}}function Wl(t){let e,n;return{c(){e=pt("img"),Ae(e.src,n=t[3]+"postal_code.svg")||P(e,"src",n),P(e,"alt",t[6]),P(e,"class","svelte-ltkwvy")},m(r,i){Dt(r,e,i)},p(r,i){i&8&&!Ae(e.src,n=r[3]+"postal_code.svg")&&P(e,"src",n),i&64&&P(e,"alt",r[6])},d(r){r&&Mt(e)}}}function Kl(t){let e,n;return{c(){e=pt("img"),Ae(e.src,n=t[3]+"street.svg")||P(e,"src",n),P(e,"alt",t[6]),P(e,"class","svelte-ltkwvy")},m(r,i){Dt(r,e,i)},p(r,i){i&8&&!Ae(e.src,n=r[3]+"street.svg")&&P(e,"src",n),i&64&&P(e,"alt",r[6])},d(r){r&&Mt(e)}}}function Zl(t){let e,n;return{c(){e=pt("img"),Ae(e.src,n=t[3]+"road.svg")||P(e,"src",n),P(e,"alt",t[6]),P(e,"class","svelte-ltkwvy")},m(r,i){Dt(r,e,i)},p(r,i){i&8&&!Ae(e.src,n=r[3]+"road.svg")&&P(e,"src",n),i&64&&P(e,"alt",r[6])},d(r){r&&Mt(e)}}}function Ql(t){let e,n;return{c(){e=pt("img"),Ae(e.src,n=t[3]+"housenumber.svg")||P(e,"src",n),P(e,"alt",t[6]),P(e,"class","svelte-ltkwvy")},m(r,i){Dt(r,e,i)},p(r,i){i&8&&!Ae(e.src,n=r[3]+"housenumber.svg")&&P(e,"src",n),i&64&&P(e,"alt",r[6])},d(r){r&&Mt(e)}}}function Jl(t){let e,n,r,i;return{c(){e=pt("img"),Ae(e.src,n=t[5])||P(e,"src",n),P(e,"alt",t[4]),P(e,"class","svelte-ltkwvy")},m(o,s){Dt(o,e,s),r||(i=Ie(e,"error",t[12]),r=!0)},p(o,s){s&32&&!Ae(e.src,n=o[5])&&P(e,"src",n),s&16&&P(e,"alt",o[4])},d(o){o&&Mt(e),r=!1,i()}}}function fa(t){let e,n;return{c(){e=pt("span"),n=Pr(t[6]),P(e,"class","secondary svelte-ltkwvy")},m(r,i){Dt(r,e,i),nt(e,n)},p(r,i){i&64&&to(n,r[6])},d(r){r&&Mt(e)}}}function tc(t){var e,n;let r,i,o,s,a,u,l,c,p=t[0].place_name.replace(/,.*/,"")+"",h,f,g=t[2]==="always"||t[2]&&!t[0].address&&((e=t[0].properties)==null?void 0:e.kind)!=="road"&&((n=t[0].properties)==null?void 0:n.kind)!=="road_relation"&&!t[0].id.startsWith("address.")&&!t[0].id.startsWith("postal_code.")&&(!t[0].id.startsWith("poi.")||!t[5]),m,d,x=t[0].place_name.replace(/[^,]*,?\s*/,"")+"",v,I,C;function b(S,F){var $,O;return F&1&&(i=null),F&1&&(o=null),F&1&&(s=null),S[5]?Jl:S[0].address?Ql:(($=S[0].properties)==null?void 0:$.kind)==="road"||((O=S[0].properties)==null?void 0:O.kind)==="road_relation"?Zl:(i==null&&(i=!!S[0].id.startsWith("address.")),i?Kl:(o==null&&(o=!!S[0].id.startsWith("postal_code.")),o?Wl:(s==null&&(s=!!S[0].id.startsWith("poi.")),s?Hl:Yl)))}let L=b(t,-1),M=L(t),R=g&&fa(t);return{c(){r=pt("li"),M.c(),a=nn(),u=pt("span"),l=pt("span"),c=pt("span"),h=Pr(p),f=nn(),R&&R.c(),m=nn(),d=pt("span"),v=Pr(x),P(c,"class","primary svelte-ltkwvy"),P(l,"class","svelte-ltkwvy"),P(d,"class","line2 svelte-ltkwvy"),P(u,"class","texts svelte-ltkwvy"),P(r,"tabindex","0"),P(r,"data-selected",t[1]),P(r,"class","svelte-ltkwvy"),on(r,"selected",t[1])},m(S,F){Dt(S,r,F),M.m(r,null),nt(r,a),nt(r,u),nt(u,l),nt(l,c),nt(c,h),nt(l,f),R&&R.m(l,null),nt(u,m),nt(u,d),nt(d,v),I||(C=[Ie(r,"mouseenter",t[10]),Ie(r,"focus",t[11])],I=!0)},p(S,[F]){var $,O;L===(L=b(S,F))&&M?M.p(S,F):(M.d(1),M=L(S),M&&(M.c(),M.m(r,a))),F&1&&p!==(p=S[0].place_name.replace(/,.*/,"")+"")&&to(h,p),F&37&&(g=S[2]==="always"||S[2]&&!S[0].address&&(($=S[0].properties)==null?void 0:$.kind)!=="road"&&((O=S[0].properties)==null?void 0:O.kind)!=="road_relation"&&!S[0].id.startsWith("address.")&&!S[0].id.startsWith("postal_code.")&&(!S[0].id.startsWith("poi.")||!S[5])),g?R?R.p(S,F):(R=fa(S),R.c(),R.m(l,null)):R&&(R.d(1),R=null),F&1&&x!==(x=S[0].place_name.replace(/[^,]*,?\s*/,"")+"")&&to(v,x),F&2&&P(r,"data-selected",S[1]),F&2&&on(r,"selected",S[1])},i:xt,o:xt,d(S){S&&Mt(r),M.d(),R&&R.d(),I=!1,Er(C)}}}function ec(t,e,n){var r;let i,o,{feature:s}=e,{selected:a=!1}=e,{showPlaceType:u}=e,{missingIconsCache:l}=e,{iconsBaseUrl:c}=e;const p=(r=s.properties)==null?void 0:r.categories;let h,f;function g(v){f&&l.add(f),n(9,i--,i)}function m(v){ca.call(this,t,v)}function d(v){ca.call(this,t,v)}const x=v=>g(v.currentTarget);return t.$$set=v=>{"feature"in v&&n(0,s=v.feature),"selected"in v&&n(1,a=v.selected),"showPlaceType"in v&&n(2,u=v.showPlaceType),"missingIconsCache"in v&&n(8,l=v.missingIconsCache),"iconsBaseUrl"in v&&n(3,c=v.iconsBaseUrl)},t.$$.update=()=>{var v,I,C,b;if(t.$$.dirty&824)do n(9,i--,i),n(4,h=p==null?void 0:p[i]),n(5,f=h?c+h.replace(/ /g,"_")+".svg":void 0);while(i>-1&&(!f||l.has(f)));t.$$.dirty&1&&n(6,o=s.id.startsWith("poi.")?(I=(v=s.properties)==null?void 0:v.categories)==null?void 0:I.join(", "):((b=(C=s.properties)==null?void 0:C.place_type_name)==null?void 0:b[0])??s.place_type[0])},n(9,i=(p==null?void 0:p.length)??0),[s,a,u,c,h,f,o,g,l,i,m,d,x]}class nc extends Vr{constructor(e){super(),Ur(this,e,ec,tc,zr,{feature:0,selected:1,showPlaceType:2,missingIconsCache:8,iconsBaseUrl:3})}}function rc(t){let e;return{c(){e=pt("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',P(e,"class","svelte-7cmwmc")},m(n,r){Dt(n,e,r)},p:xt,i:xt,o:xt,d(n){n&&Mt(e)}}}class ic extends Vr{constructor(e){super(),Ur(this,e,null,rc,zr,{})}}function oc(t){let e,n;return{c(){e=Hn("svg"),n=Hn("path"),P(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),P(e,"viewBox","0 0 60.006 21.412"),P(e,"width","14"),P(e,"height","20"),P(e,"class","svelte-en2qvf")},m(r,i){Dt(r,e,i),nt(e,n)},p:xt,i:xt,o:xt,d(r){r&&Mt(e)}}}class sc extends Vr{constructor(e){super(),Ur(this,e,null,oc,zr,{})}}function ac(t){let e,n;return{c(){e=Hn("svg"),n=Hn("path"),P(n,"d","M13.101 14.261 8.74 9.899a4.797 4.797 0 0 1-1.425.748 5.165 5.165 0 0 1-1.603.248c-1.446 0-2.677-.5-3.693-1.503S.495 7.164.495 5.717c0-1.446.508-2.678 1.524-3.693C3.035 1.008 4.266.5 5.712.5c1.448 0 2.672.508 3.675 1.524 1.002 1.015 1.503 2.247 1.503 3.693 0 .558-.08 1.092-.239 1.603-.159.512-.411.98-.757 1.405l4.382 4.4a.74.74 0 0 1 .229.568.81.81 0 0 1-.249.568.787.787 0 0 1-.577.239.787.787 0 0 1-.578-.239ZM5.712 9.223c.97 0 1.796-.342 2.48-1.026a3.378 3.378 0 0 0 1.026-2.48c0-.982-.34-1.818-1.016-2.509-.677-.69-1.507-1.035-2.49-1.035a3.42 3.42 0 0 0-2.509 1.035 3.42 3.42 0 0 0-1.035 2.51c0 .982.345 1.812 1.035 2.488.691.678 1.527 1.017 2.51 1.017Z"),P(e,"width","14"),P(e,"height","14"),P(e,"viewBox","0 0 15 15"),P(e,"class","svelte-en2qvf")},m(r,i){Dt(r,e,i),nt(e,n)},p:xt,i:xt,o:xt,d(r){r&&Mt(e)}}}class uc extends Vr{constructor(e){super(),Ur(this,e,null,ac,zr,{})}}function ga(t,e,n){const r=t.slice();return r[75]=e[n],r[77]=n,r}function da(t){let e,n;return e=new ic({}),{c(){Or(e.$$.fragment)},m(r,i){lr(e,r,i),n=!0},i(r){n||(qt(e.$$.fragment,r),n=!0)},o(r){ce(e.$$.fragment,r),n=!1},d(r){cr(e,r)}}}function ya(t){let e,n,r,i,o;return n=new sc({}),{c(){e=pt("button"),Or(n.$$.fragment),P(e,"type","button"),P(e,"title",t[9]),P(e,"class","svelte-1r7dvt7"),on(e,"active",t[0])},m(s,a){Dt(s,e,a),lr(n,e,null),r=!0,i||(o=Ie(e,"click",t[61]),i=!0)},p(s,a){(!r||a[0]&512)&&P(e,"title",s[9]),(!r||a[0]&1)&&on(e,"active",s[0])},i(s){r||(qt(n.$$.fragment,s),r=!0)},o(s){ce(n.$$.fragment,s),r=!1},d(s){s&&Mt(e),cr(n),i=!1,o()}}}function lc(t){let e,n=[],r=new Map,i,o,s,a=ha(t[13]);const u=l=>l[75].id+(l[75].address?","+l[75].address:"");for(let l=0;l<a.length;l+=1){let c=ga(t,a,l),p=u(c);r.set(p,n[l]=ma(p,c))}return{c(){e=pt("ul");for(let l=0;l<n.length;l+=1)n[l].c();P(e,"class","svelte-1r7dvt7")},m(l,c){Dt(l,e,c);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);i=!0,o||(s=[Ie(e,"mouseleave",t[65]),Ie(e,"blur",t[66])],o=!0)},p(l,c){c[0]&8940544&&(a=ha(l[13]),Do(),n=Ul(n,c,u,1,l,a,r,e,zl,ma,null,ga),Ao())},i(l){if(!i){for(let c=0;c<a.length;c+=1)qt(n[c]);i=!0}},o(l){for(let c=0;c<n.length;c+=1)ce(n[c]);i=!1},d(l){l&&Mt(e);for(let c=0;c<n.length;c+=1)n[c].d();o=!1,Er(s)}}}function cc(t){let e,n,r,i,o,s;return n=new au({}),{c(){e=pt("div"),Or(n.$$.fragment),r=nn(),i=pt("div"),o=Pr(t[7]),P(i,"class","svelte-1r7dvt7"),P(e,"class","no-results svelte-1r7dvt7")},m(a,u){Dt(a,e,u),lr(n,e,null),nt(e,r),nt(e,i),nt(i,o),s=!0},p(a,u){(!s||u[0]&128)&&to(o,a[7])},i(a){s||(qt(n.$$.fragment,a),s=!0)},o(a){ce(n.$$.fragment,a),s=!1},d(a){a&&Mt(e),cr(n)}}}function pc(t){let e="",n;return{c(){n=Pr(e)},m(r,i){Dt(r,n,i)},p:xt,i:xt,o:xt,d(r){r&&Mt(n)}}}function hc(t){let e,n,r,i,o,s,a,u,l,c,p;return n=new au({}),u=new su({}),{c(){e=pt("div"),Or(n.$$.fragment),r=nn(),i=pt("div"),o=Pr(t[6]),s=nn(),a=pt("button"),Or(u.$$.fragment),P(i,"class","svelte-1r7dvt7"),P(a,"class","svelte-1r7dvt7"),P(e,"class","error svelte-1r7dvt7")},m(h,f){Dt(h,e,f),lr(n,e,null),nt(e,r),nt(e,i),nt(i,o),nt(e,s),nt(e,a),lr(u,a,null),l=!0,c||(p=Ie(a,"click",t[62]),c=!0)},p(h,f){(!l||f[0]&64)&&to(o,h[6])},i(h){l||(qt(n.$$.fragment,h),qt(u.$$.fragment,h),l=!0)},o(h){ce(n.$$.fragment,h),ce(u.$$.fragment,h),l=!1},d(h){h&&Mt(e),cr(n),cr(u),c=!1,p()}}}function ma(t,e){let n,r,i;function o(){return e[63](e[77])}function s(){return e[64](e[75])}return r=new nc({props:{feature:e[75],showPlaceType:e[10],selected:e[14]===e[77],missingIconsCache:e[19],iconsBaseUrl:e[11]}}),r.$on("mouseenter",o),r.$on("focus",s),{key:t,first:null,c(){n=Rl(),Or(r.$$.fragment),this.first=n},m(a,u){Dt(a,n,u),lr(r,a,u),i=!0},p(a,u){e=a;const l={};u[0]&8192&&(l.feature=e[75]),u[0]&1024&&(l.showPlaceType=e[10]),u[0]&24576&&(l.selected=e[14]===e[77]),u[0]&2048&&(l.iconsBaseUrl=e[11]),r.$set(l)},i(a){i||(qt(r.$$.fragment,a),i=!0)},o(a){ce(r.$$.fragment,a),i=!1},d(a){a&&Mt(n),cr(r,a)}}}function fc(t){let e,n,r,i,o,s,a,u,l,c,p,h,f,g,m,d,x,v,I,C;i=new uc({}),c=new su({});let b=t[18]&&da(),L=t[5]===!0&&ya(t);const M=t[53].default,R=wl(M,t,t[52],null),S=[hc,pc,cc,lc],F=[];function $(O,Y){var D,H;return O[17]?0:O[15]?((D=O[13])==null?void 0:D.length)===0?2:O[15]&&(H=O[13])!=null&&H.length?3:-1:1}return~(m=$(t))&&(d=F[m]=S[m](t)),{c(){e=pt("form"),n=pt("div"),r=pt("button"),Or(i.$$.fragment),o=nn(),s=pt("input"),a=nn(),u=pt("div"),l=pt("button"),Or(c.$$.fragment),p=nn(),b&&b.c(),h=nn(),L&&L.c(),f=nn(),R&&R.c(),g=nn(),d&&d.c(),P(r,"class","search-button svelte-1r7dvt7"),P(r,"type","button"),P(s,"placeholder",t[8]),P(s,"aria-label",t[8]),P(s,"class","svelte-1r7dvt7"),P(l,"type","button"),P(l,"title",t[3]),P(l,"class","svelte-1r7dvt7"),P(u,"class","clear-button-container svelte-1r7dvt7"),on(u,"displayable",t[1]!==""),P(n,"class","input-group svelte-1r7dvt7"),P(e,"tabindex","0"),P(e,"class",x=ua(t[2])+" svelte-1r7dvt7"),on(e,"can-collapse",t[4]&&t[1]==="")},m(O,Y){Dt(O,e,Y),nt(e,n),nt(n,r),lr(i,r,null),nt(n,o),nt(n,s),t[55](s),la(s,t[1]),nt(n,a),nt(n,u),nt(u,l),lr(c,l,null),nt(u,p),b&&b.m(u,null),nt(n,h),L&&L.m(n,null),nt(n,f),R&&R.m(n,null),nt(e,g),~m&&F[m].m(e,null),v=!0,I||(C=[Ie(r,"click",t[54]),Ie(s,"input",t[56]),Ie(s,"focus",t[57]),Ie(s,"blur",t[58]),Ie(s,"keydown",t[21]),Ie(s,"input",t[59]),Ie(l,"click",t[60]),Ie(e,"submit",Tl(t[20]))],I=!0)},p(O,Y){(!v||Y[0]&256)&&P(s,"placeholder",O[8]),(!v||Y[0]&256)&&P(s,"aria-label",O[8]),Y[0]&2&&s.value!==O[1]&&la(s,O[1]),(!v||Y[0]&8)&&P(l,"title",O[3]),O[18]?b?Y[0]&262144&&qt(b,1):(b=da(),b.c(),qt(b,1),b.m(u,null)):b&&(Do(),ce(b,1,1,()=>{b=null}),Ao()),(!v||Y[0]&2)&&on(u,"displayable",O[1]!==""),O[5]===!0?L?(L.p(O,Y),Y[0]&32&&qt(L,1)):(L=ya(O),L.c(),qt(L,1),L.m(n,f)):L&&(Do(),ce(L,1,1,()=>{L=null}),Ao()),R&&R.p&&(!v||Y[1]&2097152)&&Pl(R,M,O,O[52],v?Ll(M,O[52],Y,null):Ol(O[52]),null);let D=m;m=$(O),m===D?~m&&F[m].p(O,Y):(d&&(Do(),ce(F[D],1,1,()=>{F[D]=null}),Ao()),~m?(d=F[m],d?d.p(O,Y):(d=F[m]=S[m](O),d.c()),qt(d,1),d.m(e,null)):d=null),(!v||Y[0]&4&&x!==(x=ua(O[2])+" svelte-1r7dvt7"))&&P(e,"class",x),(!v||Y[0]&22)&&on(e,"can-collapse",O[4]&&O[1]==="")},i(O){v||(qt(i.$$.fragment,O),qt(c.$$.fragment,O),qt(b),qt(L),qt(R,O),qt(d),v=!0)},o(O){ce(i.$$.fragment,O),ce(c.$$.fragment,O),ce(b),ce(L),ce(R,O),ce(d),v=!1},d(O){O&&Mt(e),cr(i),t[55](null),cr(c),b&&b.d(),L&&L.d(),R&&R.d(O),~m&&F[m].d(),I=!1,Er(C)}}}function gc(t,e,n){const r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function _a(t){let e=[...t];return e[2]<e[0]&&(e[2]+=360),e}function dc(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{class:s=void 0}=e,{apiKey:a}=e,{bbox:u=void 0}=e,{clearButtonTitle:l="clear"}=e,{clearOnBlur:c=!1}=e,{collapsed:p=!1}=e,{country:h=void 0}=e,{debounceSearch:f=200}=e,{enableReverse:g=!1}=e,{errorMessage:m="Something went wrong…"}=e,{filter:d=()=>!0}=e,{flyTo:x=!0}=e,{fuzzyMatch:v=!0}=e,{language:I=void 0}=e,{limit:C=void 0}=e,{mapController:b=void 0}=e,{minLength:L=2}=e,{noResultsMessage:M="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:R="Search"}=e,{proximity:S=void 0}=e,{reverseActive:F=g==="always"}=e,{reverseButtonTitle:$="toggle reverse geocoding"}=e,{searchValue:O=""}=e,{showFullGeometry:Y=!0}=e,{showPlaceType:D="ifNeeded"}=e,{showResultsWhileTyping:H=!0}=e,{trackProximity:at=!0}=e,{types:mt=void 0}=e,{zoom:Ht=16}=e,{maxZoom:Jt=18}=e,{apiUrl:rr="https://api.maptiler.com/geocoding"}=e,{fetchParameters:ze={}}=e,{iconsBaseUrl:Fn="https://cdn.maptiler.com/maptiler-geocoding-control/v0.0.97/icons/"}=e;function xn(){Gn.focus()}function pi(){Gn.blur()}function ir(N,At=!0){n(1,O=N),At?(n(14,Bt=-1),ra()):(hs(),setTimeout(()=>{Gn.focus(),Gn.select()}))}let hi=!1,_t,Re,ut,na="",Gn,Bt=-1,kn,Co=[],fi,gi,So,cs;const rl=new Set,xr=Fl();Al(()=>{b&&(b.setEventHandler(void 0),b.indicateReverse(!1),b.setSelectedMarker(-1),b.setMarkers(void 0,void 0))});function ra(N){if(gi&&(clearTimeout(gi),gi=void 0),Bt>-1&&_t)n(49,ut=_t[Bt]),n(1,O=ut.place_name.replace(/,.*/,"")),n(17,kn=void 0),n(48,Re=void 0),n(14,Bt=-1);else if(O){const At=N||!ia();ps(O,{exact:!0}).then(()=>{n(48,Re=_t),n(49,ut=void 0),At&&il()}).catch(Bn=>n(17,kn=Bn))}}function ia(){return/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/.test(O)}async function ps(N,{byId:At=!1,exact:Bn=!1}={}){n(17,kn=void 0);const di=ia(),bt=new URLSearchParams;I!=null&&bt.set("language",Array.isArray(I)?I.join(","):I),mt&&bt.set("types",mt.join(",")),di||(u&&bt.set("bbox",u.map(Ir=>Ir.toFixed(6)).join(",")),h&&bt.set("country",Array.isArray(h)?h.join(","):h)),At||(S&&bt.set("proximity",S.map(Ir=>Ir.toFixed(6)).join(",")),(Bn||!H)&&bt.set("autocomplete","false"),bt.set("fuzzyMatch",String(v))),C!==void 0&&(!di||(mt==null?void 0:mt.length)===1)&&bt.set("limit",String(C)),bt.set("key",a);const yi=rr+"/"+encodeURIComponent(N)+".json?"+bt.toString();if(yi===na){At?(n(13,_t=void 0),n(49,ut=Co[0])):n(13,_t=Co);return}na=yi,fi==null||fi.abort();const Ee=new AbortController;n(18,fi=Ee);let gs;try{gs=await fetch(yi,{signal:Ee.signal,...ze}).finally(()=>{Ee===fi&&n(18,fi=void 0)})}catch(Ir){if(Ir&&typeof Ir=="object"&&"name"in Ir&&Ir.name==="AbortError")return;throw new Error}if(!gs.ok)throw new Error;const ds=await gs.json();xr("response",{url:yi,featureCollection:ds}),At?(n(13,_t=void 0),n(49,ut=ds.features[0]),Co=[ut]):(n(13,_t=ds.features.filter(d)),Co=_t,di&&Gn.focus())}function il(){var N,At,Bn,di;if(!(Re!=null&&Re.length)||!x)return;const bt=[180,90,-180,-90],yi=!Re.some(Ee=>!Ee.matching_text);for(const Ee of Re)(yi||!Ee.matching_text)&&(bt[0]=Math.min(bt[0],((N=Ee.bbox)==null?void 0:N[0])??Ee.center[0]),bt[1]=Math.min(bt[1],((At=Ee.bbox)==null?void 0:At[1])??Ee.center[1]),bt[2]=Math.max(bt[2],((Bn=Ee.bbox)==null?void 0:Bn[2])??Ee.center[0]),bt[3]=Math.max(bt[3],((di=Ee.bbox)==null?void 0:di[3])??Ee.center[1]));b&&Re.length>0&&(ut&&bt[0]===bt[2]&&bt[1]===bt[3]?b.flyTo(ut.center,Ht):b.fitBounds(_a(bt),50,Jt))}function ol(N){n(0,F=g==="always"),ir(gc(N[0],[-180,180],!0).toFixed(6)+","+N[1].toFixed(6))}function sl(N){if(!_t)return;let At=N.key==="ArrowDown"?1:N.key==="ArrowUp"?-1:0;At?(Bt===-1&&At===-1&&n(14,Bt=_t.length),n(14,Bt+=At),Bt>=_t.length&&n(14,Bt=-1),N.preventDefault()):["ArrowLeft","ArrowRight","Home","End"].includes(N.key)&&n(14,Bt=-1)}function hs(N=!0){if(n(17,kn=void 0),H){if(gi&&clearTimeout(gi),O.length<L)return;const At=O;gi=window.setTimeout(()=>{ps(At).catch(Bn=>n(17,kn=Bn))},N?f:0)}else n(13,_t=void 0),n(17,kn=void 0)}function fs(N){n(49,ut=N),n(1,O=N.place_name),n(14,Bt=-1)}const al=()=>Gn.focus();function ul(N){Is[N?"unshift":"push"](()=>{Gn=N,n(16,Gn)})}function ll(){O=this.value,n(1,O),n(12,hi),n(27,c)}const cl=()=>n(12,hi=!0),pl=()=>n(12,hi=!1),hl=()=>hs(),fl=()=>{n(1,O=""),Gn.focus()},gl=()=>n(0,F=!F),dl=()=>n(17,kn=void 0),yl=N=>n(14,Bt=N),ml=N=>fs(N),_l=()=>n(14,Bt=-1),vl=()=>{};return t.$$set=N=>{"class"in N&&n(2,s=N.class),"apiKey"in N&&n(25,a=N.apiKey),"bbox"in N&&n(26,u=N.bbox),"clearButtonTitle"in N&&n(3,l=N.clearButtonTitle),"clearOnBlur"in N&&n(27,c=N.clearOnBlur),"collapsed"in N&&n(4,p=N.collapsed),"country"in N&&n(28,h=N.country),"debounceSearch"in N&&n(29,f=N.debounceSearch),"enableReverse"in N&&n(5,g=N.enableReverse),"errorMessage"in N&&n(6,m=N.errorMessage),"filter"in N&&n(30,d=N.filter),"flyTo"in N&&n(31,x=N.flyTo),"fuzzyMatch"in N&&n(32,v=N.fuzzyMatch),"language"in N&&n(33,I=N.language),"limit"in N&&n(34,C=N.limit),"mapController"in N&&n(35,b=N.mapController),"minLength"in N&&n(36,L=N.minLength),"noResultsMessage"in N&&n(7,M=N.noResultsMessage),"placeholder"in N&&n(8,R=N.placeholder),"proximity"in N&&n(24,S=N.proximity),"reverseActive"in N&&n(0,F=N.reverseActive),"reverseButtonTitle"in N&&n(9,$=N.reverseButtonTitle),"searchValue"in N&&n(1,O=N.searchValue),"showFullGeometry"in N&&n(37,Y=N.showFullGeometry),"showPlaceType"in N&&n(10,D=N.showPlaceType),"showResultsWhileTyping"in N&&n(38,H=N.showResultsWhileTyping),"trackProximity"in N&&n(39,at=N.trackProximity),"types"in N&&n(40,mt=N.types),"zoom"in N&&n(41,Ht=N.zoom),"maxZoom"in N&&n(42,Jt=N.maxZoom),"apiUrl"in N&&n(43,rr=N.apiUrl),"fetchParameters"in N&&n(44,ze=N.fetchParameters),"iconsBaseUrl"in N&&n(11,Fn=N.iconsBaseUrl),"$$scope"in N&&n(52,o=N.$$scope)},t.$$.update=()=>{if(t.$$.dirty[1]&256&&(at||n(24,S=void 0)),t.$$.dirty[0]&134221824&&setTimeout(()=>{n(15,So=hi),c&&!hi&&n(1,O="")}),t.$$.dirty[0]&8194|t.$$.dirty[1]&32&&O.length<L&&(n(49,ut=void 0),n(13,_t=void 0),n(17,kn=void 0),n(48,Re=_t)),t.$$.dirty[1]&262208&&Y&&ut&&!ut.address&&ut.geometry.type==="Point"&&ps(ut.id,{byId:!0}).catch(N=>n(17,kn=N)),t.$$.dirty[1]&789521&&(b&&ut&&ut.id!==cs&&x&&(!ut.bbox||ut.bbox[0]===ut.bbox[2]&&ut.bbox[1]===ut.bbox[3]?b.flyTo(ut.center,ut.id.startsWith("poi.")||ut.id.startsWith("address.")?Jt:Ht):b.fitBounds(_a(ut.bbox),50,Jt),n(13,_t=void 0),n(48,Re=void 0),n(14,Bt=-1)),n(50,cs=ut==null?void 0:ut.id)),t.$$.dirty[0]&8192|t.$$.dirty[1]&131072&&Re!==_t&&n(48,Re=void 0),t.$$.dirty[1]&393232&&b&&b.setMarkers(Re,ut),t.$$.dirty[0]&2&&n(14,Bt=-1),t.$$.dirty[0]&40961|t.$$.dirty[1]&272&&b&&b.setEventHandler(N=>{switch(N.type){case"mapClick":F&&ol(N.coordinates);break;case"proximityChange":n(24,S=at?N.proximity:void 0);break;case"markerClick":{const At=_t==null?void 0:_t.find(Bn=>Bn.id===N.id);At&&fs(At)}break;case"markerMouseEnter":n(14,Bt=So?(_t==null?void 0:_t.findIndex(At=>At.id===N.id))??-1:-1);break;case"markerMouseLeave":n(14,Bt=-1);break}}),t.$$.dirty[0]&16384|t.$$.dirty[1]&16&&(b==null||b.setSelectedMarker(Bt)),t.$$.dirty[0]&24576&&n(51,r=_t==null?void 0:_t[Bt]),t.$$.dirty[0]&2|t.$$.dirty[1]&16){const N=/^(-?\d+(?:\.\d*)?),(-?\d+(?:\.\d*)?)$/.exec(O);b==null||b.setReverseMarker(N?[Number(N[1]),Number(N[2])]:void 0)}t.$$.dirty[1]&1048576&&xr("select",r),t.$$.dirty[1]&262144&&xr("pick",ut),t.$$.dirty[0]&40960&&xr("optionsVisibilityChange",So&&!!_t),t.$$.dirty[0]&8192&&xr("featuresListed",_t),t.$$.dirty[1]&131072&&xr("featuresMarked",Re),t.$$.dirty[0]&1&&xr("reverseToggle",F),t.$$.dirty[0]&2&&xr("queryChange",O),t.$$.dirty[0]&1|t.$$.dirty[1]&16&&b&&b.indicateReverse(F)},[F,O,s,l,p,g,m,M,R,$,D,Fn,hi,_t,Bt,So,Gn,kn,fi,rl,ra,sl,hs,fs,S,a,u,c,h,f,d,x,v,I,C,b,L,Y,H,at,mt,Ht,Jt,rr,ze,xn,pi,ir,Re,ut,cs,r,o,i,al,ul,ll,cl,pl,hl,fl,gl,dl,yl,ml,_l,vl]}let yc=class extends Vr{constructor(t){super(),Ur(this,t,dc,fc,zr,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:24,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:37,showPlaceType:10,showResultsWhileTyping:38,trackProximity:39,types:40,zoom:41,maxZoom:42,apiUrl:43,fetchParameters:44,iconsBaseUrl:11,focus:45,blur:46,setQuery:47},null,[-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get setQuery(){return this.$$.ctx[47]}};/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function mc(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Rr=function(){function t(e,n){this.next=null,this.key=e,this.data=n,this.left=null,this.right=null}return t}();function _c(t,e){return t>e?1:t<e?-1:0}function Cr(t,e,n){for(var r=new Rr(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(e.left===null)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,e=a,e.left===null)break}o.left=e,o=e,e=e.left}else if(s>0){if(e.right===null)break;if(n(t,e.right.key)>0){var a=e.right;if(e.right=a.left,a.left=e,e=a,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function _s(t,e,n,r){var i=new Rr(t,e);if(n===null)return i.left=i.right=null,i;n=Cr(t,n,r);var o=r(t,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function va(t,e,n){var r=null,i=null;if(e){e=Cr(t,e,n);var o=n(e.key,t);o===0?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function vc(t,e,n){return e===null?t:(t===null||(e=Cr(t.key,e,n),e.left=t),e)}function Cs(t,e,n,r,i){if(t){r(""+e+(n?"└── ":"├── ")+i(t)+`
`);var o=e+(n?"    ":"│   ");t.left&&Cs(t.left,o,!1,r,i),t.right&&Cs(t.right,o,!0,r,i)}}var Bs=function(){function t(e){e===void 0&&(e=_c),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,n){return this._size++,this._root=_s(e,n,this._root,this._comparator)},t.prototype.add=function(e,n){var r=new Rr(e,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=Cr(e,this._root,i),s=i(e,o.key);return s===0?this._root=o:(s<0?(r.left=o.left,r.right=o,o.left=null):s>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,n,r){var i;if(n===null)return null;n=Cr(e,n,r);var o=r(e,n.key);return o===0?(n.left===null?i=n.right:(i=Cr(e,n.left,r),i.right=n.right),this._size--,i):n},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Cr(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},t.prototype.find=function(e){return this._root&&(this._root=Cr(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},t.prototype.contains=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},t.prototype.forEach=function(e,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),e.call(n,r),r=r.right):o=!0;return this},t.prototype.range=function(e,n,r,i){for(var o=[],s=this._comparator,a=this._root,u;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),u=s(a.key,n),u>0)break;if(s(a.key,e)>=0&&r.call(i,a))return this;a=a.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(n){var r=n.key;return e.push(r)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n){var r=n.data;return e.push(r)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===e)return n;i++,n=n.right}else r=!0;return null},t.prototype.next=function(e){var n=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(e.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},t.prototype.prev=function(e){var n=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(e.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return xc(this._root)},t.prototype.load=function(e,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=e.length,o=this._comparator;if(r&&Ls(e,n,0,i-1,o),this._root===null)this._root=Ss(e,n,0,i),this._size=i;else{var s=Ic(this.toList(),Ec(e,n),o);i=this._size+i,this._root=ws({head:s},0,i)}return this},t.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var n=[];return Cs(this._root,"",!0,function(r){return n.push(r)},e),n.join("")},t.prototype.update=function(e,n,r){var i=this._comparator,o=va(e,this._root,i),s=o.left,a=o.right;i(e,n)<0?a=_s(n,r,a,i):s=_s(n,r,s,i),this._root=vc(s,a,i)},t.prototype.split=function(e){return va(e,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var e;return mc(this,function(n){switch(n.label){case 0:e=this.minNode(),n.label=1;case 1:return e?[4,e]:[3,3];case 2:return n.sent(),e=this.next(e),[3,1];case 3:return[2]}})},t}();function Ss(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=t[o],a=e[o],u=new Rr(s,a);return u.left=Ss(t,e,n,o),u.right=Ss(t,e,o+1,r),u}return null}function Ec(t,e){for(var n=new Rr(null,null),r=n,i=0;i<t.length;i++)r=r.next=new Rr(t[i],e[i]);return r.next=null,n.next}function xc(t){for(var e=t,n=[],r=!1,i=new Rr(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?(e=o=o.next=n.pop(),e=e.right):r=!0;return o.next=null,i.next}function ws(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=ws(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=ws(t,i+1,n),s}return null}function Ic(t,e,n){for(var r=new Rr(null,null),i=r,o=t,s=e;o!==null&&s!==null;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return o!==null?i.next=o:s!==null&&(i.next=s),r.next}function Ls(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do s++;while(i(t[s],o)<0);do a--;while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}Ls(t,e,n,a,i),Ls(t,e,a+1,r,i)}}function _n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ea(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t,e,n){return e&&Ea(t.prototype,e),n&&Ea(t,n),t}var Hi=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Ps=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x,i=t.ll.y<e.ll.y?e.ll.y:t.ll.y,o=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},Sr=Number.EPSILON;Sr===void 0&&(Sr=Math.pow(2,-52));var Nc=Sr*Sr,Os=function(t,e){if(-Sr<t&&t<Sr&&-Sr<e&&e<Sr)return 0;var n=t-e;return n*n<Nc*t*e?0:t<e?-1:1},bc=function(){function t(){_n(this,t),this.reset()}return Ce(t,[{key:"reset",value:function(){this.xRounder=new xa,this.yRounder=new xa}},{key:"round",value:function(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}]),t}(),xa=function(){function t(){_n(this,t),this.tree=new Bs,this.round(0)}return Ce(t,[{key:"round",value:function(e){var n=this.tree.add(e),r=this.tree.prev(n);if(r!==null&&Os(n.key,r.key)===0)return this.tree.remove(e),r.key;var i=this.tree.next(n);return i!==null&&Os(n.key,i.key)===0?(this.tree.remove(e),i.key):e}}]),t}(),no=new bc,Ji=function(t,e){return t.x*e.y-t.y*e.x},uu=function(t,e){return t.x*e.x+t.y*e.y},Ia=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=Ji(r,i);return Os(o,0)},ko=function(t){return Math.sqrt(uu(t,t))},Cc=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Ji(i,r)/ko(i)/ko(r)},Sc=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return uu(i,r)/ko(i)/ko(r)},Na=function(t,e,n){return e.y===0?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},ba=function(t,e,n){return e.x===0?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},wc=function(t,e,n,r){if(e.x===0)return ba(n,r,t.x);if(r.x===0)return ba(t,e,n.x);if(e.y===0)return Na(n,r,t.y);if(r.y===0)return Na(t,e,n.y);var i=Ji(e,r);if(i==0)return null;var o={x:n.x-t.x,y:n.y-t.y},s=Ji(o,e)/i,a=Ji(o,r)/i,u=t.x+a*e.x,l=n.x+s*r.x,c=t.y+a*e.y,p=n.y+s*r.y,h=(u+l)/2,f=(c+p)/2;return{x:h,y:f}},$n=function(){Ce(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Bo.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}}]);function t(e,n){_n(this,t),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Ce(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var n=e.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,n=0;n<e;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<e;i++){var o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}},{key:"getLeftmostComparator",value:function(e){var n=this,r=new Map,i=function(o){var s=o.otherSE;r.set(o,{sine:Cc(n.point,e.point,s.point),cosine:Sc(n.point,e.point,s.point)})};return function(o,s){r.has(o)||i(o),r.has(s)||i(s);var a=r.get(o),u=a.sine,l=a.cosine,c=r.get(s),p=c.sine,h=c.cosine;return u>=0&&p>=0?l<h?1:l>h?-1:0:u<0&&p<0?l<h?-1:l>h?1:0:p<u?-1:p>u?1:0}}}]),t}(),Lc=0,Bo=function(){Ce(t,null,[{key:"compare",value:function(e,n){var r=e.leftSE.point.x,i=n.leftSE.point.x,o=e.rightSE.point.x,s=n.rightSE.point.x;if(s<r)return 1;if(o<i)return-1;var a=e.leftSE.point.y,u=n.leftSE.point.y,l=e.rightSE.point.y,c=n.rightSE.point.y;if(r<i){if(u<a&&u<l)return 1;if(u>a&&u>l)return-1;var p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;var h=n.comparePoint(e.rightSE.point);return h!==0?h:-1}if(r>i){if(a<u&&a<c)return-1;if(a>u&&a>c)return 1;var f=n.comparePoint(e.leftSE.point);if(f!==0)return f;var g=e.comparePoint(n.rightSE.point);return g<0?1:g>0?-1:1}if(a<u)return-1;if(a>u)return 1;if(o<s){var m=n.comparePoint(e.rightSE.point);if(m!==0)return m}if(o>s){var d=e.comparePoint(n.rightSE.point);if(d<0)return 1;if(d>0)return-1}if(o!==s){var x=l-a,v=o-r,I=c-u,C=s-i;if(x>v&&I<C)return 1;if(x<v&&I>C)return-1}return o>s?1:o<s||l<c?-1:l>c?1:e.id<n.id?-1:e.id>n.id?1:0}}]);function t(e,n,r,i){_n(this,t),this.id=++Lc,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Ce(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return e.x===n.x?0:e.x<n.x?1:-1;var o=(e.y-n.y)/i.y,s=n.x+o*i.x;if(e.x===s)return 0;var a=(e.x-n.x)/i.x,u=n.y+a*i.y;return e.y===u?0:e.y<u?-1:1}},{key:"getIntersection",value:function(e){var n=this.bbox(),r=e.bbox(),i=Ps(n,r);if(i===null)return null;var o=this.leftSE.point,s=this.rightSE.point,a=e.leftSE.point,u=e.rightSE.point,l=Hi(n,a)&&this.comparePoint(a)===0,c=Hi(r,o)&&e.comparePoint(o)===0,p=Hi(n,u)&&this.comparePoint(u)===0,h=Hi(r,s)&&e.comparePoint(s)===0;if(c&&l)return h&&!p?s:!h&&p?u:null;if(c)return p&&o.x===u.x&&o.y===u.y?null:o;if(l)return h&&s.x===a.x&&s.y===a.y?null:a;if(h&&p)return null;if(h)return s;if(p)return u;var f=wc(o,this.vector(),a,e.vector());return f===null||!Hi(i,f)?null:no.round(f.x,f.y)}},{key:"split",value:function(e){var n=[],r=e.events!==void 0,i=new $n(e,!0),o=new $n(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return $n.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),$n.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(i!==0){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],c=r.windings[a],p=n.rings.indexOf(l);p===-1?(n.rings.push(l),n.windings.push(c)):n.windings[p]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,s=this.rings.length;o<s;o++){var a=this.rings[o],u=this.windings[o],l=n.indexOf(a);l===-1?(n.push(a),r.push(u)):r[l]+=u}for(var c=[],p=[],h=0,f=n.length;h<f;h++)if(r[h]!==0){var g=n[h],m=g.poly;if(p.indexOf(m)===-1)if(g.isExterior)c.push(m);else{p.indexOf(m)===-1&&p.push(m);var d=c.indexOf(g.poly);d!==-1&&c.splice(d,1)}}for(var x=0,v=c.length;x<v;x++){var I=c[x].multiPoly;i.indexOf(I)===-1&&i.push(I)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Nn.type){case"union":{var r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var o,s;e.length<n.length?(o=e.length,s=n.length):(o=n.length,s=e.length),this._isInResult=s===Nn.numMultiPolys&&o<s;break}case"xor":{var a=Math.abs(e.length-n.length);this._isInResult=a%2===1;break}case"difference":{var u=function(l){return l.length===1&&l[0].isSubject};this._isInResult=u(e)!==u(n);break}default:throw new Error("Unrecognized operation type found ".concat(Nn.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=$n.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else if(a>0)i=n,o=e,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));var u=new $n(i,!0),l=new $n(o,!1);return new t(u,l,[r],[s])}}]),t}(),Ca=function(){function t(e,n,r){if(_n(this,t),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=no.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=no.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Bo.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(Bo.fromRing(o,i,this))}return Ce(t,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];e.push(i.leftSE),e.push(i.rightSE)}return e}}]),t}(),Pc=function(){function t(e,n){if(_n(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ca(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new Ca(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Ce(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,s=i.length;o<s;o++)e.push(i[o]);return e}}]),t}(),Sa=function(){function t(e,n){if(_n(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new Pc(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Ce(t,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,s=i.length;o<s;o++)e.push(i[o]);return e}}]),t}(),Oc=function(){Ce(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(!(!o.isInResult()||o.ringOut)){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,p=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var h=a.getAvailableLinkedEvents();if(h.length===0){var f=l[0].point,g=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(h.length===1){u=h[0].otherSE;break}for(var m=null,d=0,x=p.length;d<x;d++)if(p[d].point===a.point){m=d;break}if(m!==null){var v=p.splice(m)[0],I=l.splice(v.index);I.unshift(I[0].otherSE),n.push(new t(I.reverse()));continue}p.push({index:l.length,point:a.point});var C=a.getLeftmostComparator(s);u=h.sort(C)[0].otherSE;break}n.push(new t(l))}}return n}}]);function t(e){_n(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Ce(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,n=[e],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point,s=this.events[r+1].point;Ia(o,e,s)!==0&&(n.push(o),e=o)}if(n.length===1)return null;var a=n[0],u=n[1];Ia(a,e,u)===0&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:n.length-1,p=this.isExteriorRing()?n.length:-1,h=[],f=c;f!=p;f+=l)h.push([n[f].x,n[f].y]);return h}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];$n.compare(e,i)>0&&(e=i)}for(var o=e.segment.prevInResult(),s=o?o.prevInResult():null;;){if(!o)return null;if(!s)return o.ringOut;if(s.ringOut!==o.ringOut)return s.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=s.prevInResult(),s=o?o.prevInResult():null}}}]),t}(),wa=function(){function t(e){_n(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Ce(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}}]),t}(),Rc=function(){function t(e){_n(this,t),this.rings=e,this.polys=this._composePolys(e)}return Ce(t,[{key:"getGeom",value:function(){for(var e=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&e.push(i)}return e}},{key:"_composePolys",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(!o.poly)if(o.isExteriorRing())n.push(new wa(o));else{var s=o.enclosingRing();s.poly||n.push(new wa(s)),s.poly.addInterior(o)}}return n}}]),t}(),Tc=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bo.compare;_n(this,t),this.queue=e,this.tree=new Bs(n),this.segments=[]}return Ce(t,[{key:"process",value:function(e){var n=e.segment,r=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),r;var i=e.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,s=i,a=void 0,u=void 0;a===void 0;)o=this.tree.prev(o),o===null?a=null:o.key.consumedBy===void 0&&(a=o.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(e.isLeft){var l=null;if(a){var c=a.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var p=this._splitSafely(a,c),h=0,f=p.length;h<f;h++)r.push(p[h])}var g=null;if(u){var m=u.getIntersection(n);if(m!==null&&(n.isAnEndpoint(m)||(g=m),!u.isAnEndpoint(m)))for(var d=this._splitSafely(u,m),x=0,v=d.length;x<v;x++)r.push(d[x])}if(l!==null||g!==null){var I=null;if(l===null)I=g;else if(g===null)I=l;else{var C=$n.comparePoints(l,g);I=C<=0?l:g}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var b=n.split(I),L=0,M=b.length;L<M;L++)r.push(b[L])}r.length>0?(this.tree.remove(n),r.push(e)):(this.segments.push(n),n.prev=a)}else{if(a&&u){var R=a.getIntersection(u);if(R!==null){if(!a.isAnEndpoint(R))for(var S=this._splitSafely(a,R),F=0,$=S.length;F<$;F++)r.push(S[F]);if(!u.isAnEndpoint(R))for(var O=this._splitSafely(u,R),Y=0,D=O.length;Y<D;Y++)r.push(O[Y])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(e,n){this.tree.remove(e);var r=e.rightSE;this.queue.remove(r);var i=e.split(n);return i.push(r),e.consumedBy===void 0&&this.tree.insert(e),i}}]),t}(),La=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Mc=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Dc=function(){function t(){_n(this,t)}return Ce(t,[{key:"run",value:function(e,n,r){Nn.type=e,no.reset();for(var i=[new Sa(n,!0)],o=0,s=r.length;o<s;o++)i.push(new Sa(r[o],!1));if(Nn.numMultiPolys=i.length,Nn.type==="difference")for(var a=i[0],u=1;u<i.length;)Ps(i[u].bbox,a.bbox)!==null?u++:i.splice(u,1);if(Nn.type==="intersection"){for(var l=0,c=i.length;l<c;l++)for(var p=i[l],h=l+1,f=i.length;h<f;h++)if(Ps(p.bbox,i[h].bbox)===null)return[]}for(var g=new Bs($n.compare),m=0,d=i.length;m<d;m++)for(var x=i[m].getSweepEvents(),v=0,I=x.length;v<I;v++)if(g.insert(x[v]),g.size>La)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var C=new Tc(g),b=g.size,L=g.pop();L;){var M=L.key;if(g.size===b){var R=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(R.id," ")+"[".concat(R.leftSE.point.x,", ").concat(R.leftSE.point.y,"] -> ")+"[".concat(R.rightSE.point.x,", ").concat(R.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>La)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(C.segments.length>Mc)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var S=C.process(M),F=0,$=S.length;F<$;F++){var O=S[F];O.consumedBy===void 0&&g.insert(O)}b=g.size,L=g.pop()}no.reset();var Y=Oc.factory(C.segments),D=new Rc(Y);return D.getGeom()}}]),t}(),Nn=new Dc,Ac=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Nn.run("union",t,n)},Fc=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Nn.run("intersection",t,n)},Gc=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Nn.run("xor",t,n)},kc=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Nn.run("difference",t,n)},lu={union:Ac,intersection:Fc,xor:Gc,difference:kc},xe=63710088e-1,cu={centimeters:xe*100,centimetres:xe*100,degrees:xe/111325,feet:xe*3.28084,inches:xe*39.37,kilometers:xe/1e3,kilometres:xe/1e3,meters:xe,metres:xe,miles:xe/1609.344,millimeters:xe*1e3,millimetres:xe*1e3,nauticalmiles:xe/1852,radians:1,yards:xe*1.0936};function Zo(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Bc(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Pa(t[0])||!Pa(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return Zo(r,e,n)}function pu(t,e,n){n===void 0&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:t};return Zo(a,e,n)}function Rs(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function hu(t,e,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:t};return Zo(r,e,n)}function qc(t,e){e===void 0&&(e="kilometers");var n=cu[e];if(!n)throw new Error(e+" units is invalid");return t*n}function zc(t,e){e===void 0&&(e="kilometers");var n=cu[e];if(!n)throw new Error(e+" units is invalid");return t/n}function Pa(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function qo(t){return t.type==="Feature"?t.geometry:t}function Uc(t,e,n){n===void 0&&(n={});var r=qo(t),i=qo(e),o=lu.union(r.coordinates,i.coordinates);return o.length===0?null:o.length===1?pu(o[0],n.properties):hu(o,n.properties)}function Vc(t){let e,n,r;return{c(){e=Hn("svg"),n=Hn("path"),P(n,"stroke-width","4"),P(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),P(n,"class","svelte-gzo3ar"),P(e,"width",r=t[0]==="list"?20:void 0),P(e,"viewBox","0 0 70 85"),P(e,"fill","none"),P(e,"class","svelte-gzo3ar"),on(e,"in-map",t[0]!=="list"),on(e,"list-icon",t[0]==="list")},m(i,o){Dt(i,e,o),nt(e,n)},p(i,[o]){o&1&&r!==(r=i[0]==="list"?20:void 0)&&P(e,"width",r),o&1&&on(e,"in-map",i[0]!=="list"),o&1&&on(e,"list-icon",i[0]==="list")},i:xt,o:xt,d(i){i&&Mt(e)}}}function $c(t,e,n){let{displayIn:r}=e;return t.$$set=i=>{"displayIn"in i&&n(0,r=i.displayIn)},[r]}class Xc extends Vr{constructor(e){super(),Ur(this,e,$c,Vc,zr,{displayIn:0})}}function fu(t,e,n){if(t!==null)for(var r,i,o,s,a,u,l,c=0,p=0,h,f=t.type,g=f==="FeatureCollection",m=f==="Feature",d=g?t.features.length:1,x=0;x<d;x++){l=g?t.features[x].geometry:m?t.geometry:t,h=l?l.type==="GeometryCollection":!1,a=h?l.geometries.length:1;for(var v=0;v<a;v++){var I=0,C=0;if(s=h?l.geometries[v]:l,s!==null){u=s.coordinates;var b=s.type;switch(c=n&&(b==="Polygon"||b==="MultiPolygon")?1:0,b){case null:break;case"Point":if(e(u,p,x,I,C)===!1)return!1;p++,I++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(e(u[r],p,x,I,C)===!1)return!1;p++,b==="MultiPoint"&&I++}b==="LineString"&&I++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(e(u[r][i],p,x,I,C)===!1)return!1;p++}b==="MultiLineString"&&I++,b==="Polygon"&&C++}b==="Polygon"&&I++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(C=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(e(u[r][i][o],p,x,I,C)===!1)return!1;p++}C++}I++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(fu(s.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Oa(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function gu(t,e){var n,r,i,o,s,a,u,l,c,p,h=0,f=t.type==="FeatureCollection",g=t.type==="Feature",m=f?t.features.length:1;for(n=0;n<m;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,l=f?t.features[n].properties:g?t.properties:{},c=f?t.features[n].bbox:g?t.bbox:void 0,p=f?t.features[n].id:g?t.id:void 0,u=a?a.type==="GeometryCollection":!1,s=u?a.geometries.length:1,i=0;i<s;i++){if(o=u?a.geometries[i]:a,o===null){if(e(null,h,l,c,p)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,h,l,c,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(e(o.geometries[r],h,l,c,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function Ts(t){var e=[1/0,1/0,-1/0,-1/0];return fu(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}Ts.default=Ts;function jc(t,e){e===void 0&&(e={});var n=Ts(t),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return Bc([r,i],e.properties,e)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0});Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)};Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(t){return t!==t};Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Yr=function(){};Yr.prototype.interfaces_=function(){return[]};Yr.prototype.getClass=function(){return Yr};Yr.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var ct=function(t){function e(n){t.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new t().stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),z=function(){},du={MAX_VALUE:{configurable:!0}};z.isNaN=function(t){return Number.isNaN(t)};z.doubleToLongBits=function(t){return t};z.longBitsToDouble=function(t){return t};z.isInfinite=function(t){return!Number.isFinite(t)};du.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(z,du);var Be=function(){},Qo=function(){},Ii=function(){};function qe(){}var y=function t(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},si={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};y.prototype.setOrdinate=function(t,e){switch(t){case y.X:this.x=e;break;case y.Y:this.y=e;break;case y.Z:this.z=e;break;default:throw new ct("Invalid ordinate index: "+t)}};y.prototype.equals2D=function(){if(arguments.length===1){var t=arguments[0];return!(this.x!==t.x||this.y!==t.y)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];return!(!Yr.equalsWithTolerance(this.x,e.x,n)||!Yr.equalsWithTolerance(this.y,e.y,n))}};y.prototype.getOrdinate=function(t){switch(t){case y.X:return this.x;case y.Y:return this.y;case y.Z:return this.z}throw new ct("Invalid ordinate index: "+t)};y.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||z.isNaN(this.z))&&z.isNaN(t.z)};y.prototype.equals=function(t){return t instanceof y?this.equals2D(t):!1};y.prototype.equalInZ=function(t,e){return Yr.equalsWithTolerance(this.z,t.z,e)};y.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0};y.prototype.clone=function(){};y.prototype.copy=function(){return new y(this)};y.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};y.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)};y.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)};y.prototype.hashCode=function(){var t=17;return t=37*t+y.hashCode(this.x),t=37*t+y.hashCode(this.y),t};y.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z};y.prototype.interfaces_=function(){return[Be,Qo,qe]};y.prototype.getClass=function(){return y};y.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=z.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}};si.DimensionalComparator.get=function(){return sr};si.serialVersionUID.get=function(){return 6683108902428367e3};si.NULL_ORDINATE.get=function(){return z.NaN};si.X.get=function(){return 0};si.Y.get=function(){return 1};si.Z.get=function(){return 2};Object.defineProperties(y,si);var sr=function(t){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e!==2&&e!==3)throw new ct("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};sr.prototype.compare=function(t,e){var n=t,r=e,i=sr.compare(n.x,r.x);if(i!==0)return i;var o=sr.compare(n.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var s=sr.compare(n.z,r.z);return s};sr.prototype.interfaces_=function(){return[Ii]};sr.prototype.getClass=function(){return sr};sr.compare=function(t,e){return t<e?-1:t>e?1:z.isNaN(t)?z.isNaN(e)?0:-1:z.isNaN(e)?1:0};var Ni=function(){};Ni.prototype.create=function(){};Ni.prototype.interfaces_=function(){return[]};Ni.prototype.getClass=function(){return Ni};var _=function(){},_o={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};_.prototype.interfaces_=function(){return[]};_.prototype.getClass=function(){return _};_.toLocationSymbol=function(t){switch(t){case _.EXTERIOR:return"e";case _.BOUNDARY:return"b";case _.INTERIOR:return"i";case _.NONE:return"-"}throw new ct("Unknown location value: "+t)};_o.INTERIOR.get=function(){return 0};_o.BOUNDARY.get=function(){return 1};_o.EXTERIOR.get=function(){return 2};_o.NONE.get=function(){return-1};Object.defineProperties(_,_o);var q=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Se=function(){},yu={LOG_10:{configurable:!0}};Se.prototype.interfaces_=function(){return[]};Se.prototype.getClass=function(){return Se};Se.log10=function(t){var e=Math.log(t);return z.isInfinite(e)||z.isNaN(e)?e:e/Se.LOG_10};Se.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i};Se.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}};Se.wrap=function(t,e){return t<0?e- -t%e:t%e};Se.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}};Se.average=function(t,e){return(t+e)/2};yu.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Se,yu);var vn=function(t){this.str=t};vn.prototype.append=function(t){this.str+=t};vn.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)};vn.prototype.toString=function(t){return this.str};var un=function(t){this.value=t};un.prototype.intValue=function(){return this.value};un.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0};un.isNaN=function(t){return Number.isNaN(t)};var ro=function(){};ro.isWhitespace=function(t){return t<=32&&t>=0||t===127};ro.toUpperCase=function(t){return t.toUpperCase()};var E=function t(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];t.call(this,t.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},Ze={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};E.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo};E.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=E.magnitude(n._hi),i=E.TEN.pow(r);n=n.divide(i),n.gt(E.TEN)?(n=n.divide(E.TEN),r+=1):n.lt(E.ONE)&&(n=n.multiply(E.TEN),r-=1);for(var o=r+1,s=new vn,a=E.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,p=0;l>9?(c=!0,p="9"):p="0"+l,s.append(p),n=n.subtract(E.valueOf(l)).multiply(E.TEN),c&&n.selfAdd(E.TEN);var h=!0,f=E.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(h=!1),!h)break}return e[0]=r,s.toString()};E.prototype.sqr=function(){return this.multiply(this)};E.prototype.doubleValue=function(){return this._hi+this._lo};E.prototype.subtract=function(){if(arguments[0]instanceof E){var t=arguments[0];return this.add(t.negate())}else if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}};E.prototype.equals=function(){if(arguments.length===1){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}};E.prototype.isZero=function(){return this._hi===0&&this._lo===0};E.prototype.selfSubtract=function(){if(arguments[0]instanceof E){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}else if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}};E.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};E.prototype.min=function(t){return this.le(t)?this:t};E.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,p=null;return u=this._hi/n,l=E.SPLIT*u,i=l-u,p=E.SPLIT*n,i=l-i,o=u-i,s=p-n,c=u*n,s=p-s,a=n-s,p=i*s-c+i*a+o*s+o*a,l=(this._hi-c-p+this._lo-u*r)/n,p=u+l,this._hi=p,this._lo=u-p+l,this}};E.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};E.prototype.divide=function(){if(arguments[0]instanceof E){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;o=this._hi/t._hi,s=E.SPLIT*o,e=s-o,u=E.SPLIT*t._hi,e=s-e,n=o-e,r=u-t._hi,a=o*t._hi,r=u-r,i=t._hi-r,u=e*r-a+e*i+n*r+n*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,u=o+s;var l=u,c=o-u+s;return new E(l,c)}else if(typeof arguments[0]=="number"){var p=arguments[0];return z.isNaN(p)?E.createNaN():E.copy(this).selfDivide(p,0)}};E.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo};E.prototype.pow=function(t){if(t===0)return E.valueOf(1);var e=new E(this),n=E.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(e),r/=2,r>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n};E.prototype.ceil=function(){if(this.isNaN())return E.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new E(t,e)};E.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0};E.prototype.rint=function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()};E.prototype.setValue=function(){if(arguments[0]instanceof E){var t=arguments[0];return this.init(t),this}else if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}};E.prototype.max=function(t){return this.ge(t)?this:t};E.prototype.sqrt=function(){if(this.isZero())return E.valueOf(0);if(this.isNegative())return E.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=E.valueOf(e),r=this.subtract(n.sqr()),i=r._hi*(t*.5);return n.add(i)};E.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+e,s=i-this._hi,o=i-s,o=e-s+(this._hi-o),a=o+this._lo,n=i+a,r=a+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var u=arguments[0],l=arguments[1],c=null,p=null,h=null,f=null,g=null,m=null,d=null,x=null;g=this._hi+u,h=this._lo+l,d=g-this._hi,x=h-this._lo,m=g-d,f=h-x,m=u-d+(this._hi-m),f=l-x+(this._lo-f),d=m+h,c=g+d,p=d+(g-c),d=f+p;var v=c+d,I=d+(c-v);return this._hi=v,this._lo=I,this}};E.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;u=E.SPLIT*this._hi,i=u-this._hi,l=E.SPLIT*n,i=u-i,o=this._hi-i,s=l-n,u=this._hi*n,s=l-s,a=n-s,l=i*s-u+i*a+o*s+o*a+(this._hi*r+this._lo*n);var c=u+l;i=u-c;var p=l+i;return this._hi=c,this._lo=p,this}};E.prototype.selfSqr=function(){return this.selfMultiply(this)};E.prototype.floor=function(){if(this.isNaN())return E.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new E(t,e)};E.prototype.negate=function(){return this.isNaN()?this:new E(-this._hi,-this._lo)};E.prototype.clone=function(){};E.prototype.multiply=function(){if(arguments[0]instanceof E){var t=arguments[0];return t.isNaN()?E.createNaN():E.copy(this).selfMultiply(t)}else if(typeof arguments[0]=="number"){var e=arguments[0];return z.isNaN(e)?E.createNaN():E.copy(this).selfMultiply(e,0)}};E.prototype.isNaN=function(){return z.isNaN(this._hi)};E.prototype.intValue=function(){return Math.trunc(this._hi)};E.prototype.toString=function(){var t=E.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()};E.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+E.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,s=E.stringOfChar("0",o);i=n+s+".0"}return this.isNegative()?"-"+i:i};E.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;i=1/this._hi,o=E.SPLIT*i,t=o-i,a=E.SPLIT*this._hi,t=o-t,e=i-t,n=a-this._hi,s=i*this._hi,n=a-n,r=this._hi-n,a=t*n-s+t*r+e*n+e*r,o=(1-s-a-i*this._lo)/this._hi;var u=i+o,l=i-u+o;return new E(u,l)};E.prototype.toSciNotation=function(){if(this.isZero())return E.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=E.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r};E.prototype.abs=function(){return this.isNaN()?E.NaN:this.isNegative()?this.negate():new E(this)};E.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};E.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo};E.prototype.add=function(){if(arguments[0]instanceof E){var t=arguments[0];return E.copy(this).selfAdd(t)}else if(typeof arguments[0]=="number"){var e=arguments[0];return E.copy(this).selfAdd(e)}};E.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof E){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};E.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo};E.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};E.prototype.trunc=function(){return this.isNaN()?E.NaN:this.isPositive()?this.floor():this.ceil()};E.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};E.prototype.interfaces_=function(){return[qe,Be,Qo]};E.prototype.getClass=function(){return E};E.sqr=function(t){return E.valueOf(t).selfMultiply(t)};E.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return E.parse(t)}else if(typeof arguments[0]=="number"){var e=arguments[0];return new E(e)}};E.sqrt=function(t){return E.valueOf(t).sqrt()};E.parse=function(t){for(var e=0,n=t.length;ro.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);(i==="-"||i==="+")&&(e++,i==="-"&&(r=!0))}for(var o=new E,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,ro.isDigit(l)){var c=l-"0";o.selfMultiply(E.TEN),o.selfAdd(c),s++;continue}if(l==="."){a=s;continue}if(l==="e"||l==="E"){var p=t.substring(e);try{u=un.parseInt(p)}catch(d){throw d instanceof Error?new Error("Invalid exponent "+p+" in string "+t):d}finally{}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}var h=o,f=s-a-u;if(f===0)h=o;else if(f>0){var g=E.TEN.pow(f);h=o.divide(g)}else if(f<0){var m=E.TEN.pow(-f);h=o.multiply(m)}return r?h.negate():h};E.createNaN=function(){return new E(z.NaN,z.NaN)};E.copy=function(t){return new E(t)};E.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=e&&(r+=1),r};E.stringOfChar=function(t,e){for(var n=new vn,r=0;r<e;r++)n.append(t);return n.toString()};Ze.PI.get=function(){return new E(3.141592653589793,12246467991473532e-32)};Ze.TWO_PI.get=function(){return new E(6.283185307179586,24492935982947064e-32)};Ze.PI_2.get=function(){return new E(1.5707963267948966,6123233995736766e-32)};Ze.E.get=function(){return new E(2.718281828459045,14456468917292502e-32)};Ze.NaN.get=function(){return new E(z.NaN,z.NaN)};Ze.EPS.get=function(){return 123259516440783e-46};Ze.SPLIT.get=function(){return 134217729};Ze.MAX_PRINT_DIGITS.get=function(){return 32};Ze.TEN.get=function(){return E.valueOf(10)};Ze.ONE.get=function(){return E.valueOf(1)};Ze.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};Ze.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(E,Ze);var pe=function(){},mu={DP_SAFE_EPSILON:{configurable:!0}};pe.prototype.interfaces_=function(){return[]};pe.prototype.getClass=function(){return pe};pe.orientationIndex=function(t,e,n){var r=pe.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=E.valueOf(e.x).selfAdd(-t.x),o=E.valueOf(e.y).selfAdd(-t.y),s=E.valueOf(n.x).selfAdd(-e.x),a=E.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()};pe.signOfDet2x2=function(t,e,n,r){var i=t.multiply(r).selfSubtract(e.multiply(n));return i.signum()};pe.intersection=function(t,e,n,r){var i=E.valueOf(r.y).selfSubtract(n.y).selfMultiply(E.valueOf(e.x).selfSubtract(t.x)),o=E.valueOf(r.x).selfSubtract(n.x).selfMultiply(E.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=E.valueOf(r.x).selfSubtract(n.x).selfMultiply(E.valueOf(t.y).selfSubtract(n.y)),u=E.valueOf(r.y).selfSubtract(n.y).selfMultiply(E.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u),c=l.selfDivide(s).doubleValue(),p=E.valueOf(t.x).selfAdd(E.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=E.valueOf(e.x).selfSubtract(t.x).selfMultiply(E.valueOf(t.y).selfSubtract(n.y)),f=E.valueOf(e.y).selfSubtract(t.y).selfMultiply(E.valueOf(t.x).selfSubtract(n.x)),g=h.subtract(f),m=g.selfDivide(s).doubleValue(),d=E.valueOf(n.y).selfAdd(E.valueOf(r.y).selfSubtract(n.y).selfMultiply(m)).doubleValue();return new y(p,d)};pe.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return pe.signum(s);r=i+o}else if(i<0){if(o>=0)return pe.signum(s);r=-i-o}else return pe.signum(s);var a=pe.DP_SAFE_EPSILON*r;return s>=a||-s>=a?pe.signum(s):2};pe.signum=function(t){return t>0?1:t<0?-1:0};mu.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(pe,mu);var K=function(){},vo={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};vo.X.get=function(){return 0};vo.Y.get=function(){return 1};vo.Z.get=function(){return 2};vo.M.get=function(){return 3};K.prototype.setOrdinate=function(t,e,n){};K.prototype.size=function(){};K.prototype.getOrdinate=function(t,e){};K.prototype.getCoordinate=function(){};K.prototype.getCoordinateCopy=function(t){};K.prototype.getDimension=function(){};K.prototype.getX=function(t){};K.prototype.clone=function(){};K.prototype.expandEnvelope=function(t){};K.prototype.copy=function(){};K.prototype.getY=function(t){};K.prototype.toCoordinateArray=function(){};K.prototype.interfaces_=function(){return[Qo]};K.prototype.getClass=function(){return K};Object.defineProperties(K,vo);var _u=function(){},Vi=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_u),$t=function(){};$t.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++};$t.getProperty=function(t){return{"line.separator":`
`}[t]};var Ue=function t(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof y&&arguments[1]instanceof y){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(arguments.length===3){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(arguments.length===4){var p=arguments[0],h=arguments[1],f=arguments[2],g=arguments[3],m=p.y-h.y,d=h.x-p.x,x=p.x*h.y-h.x*p.y,v=f.y-g.y,I=g.x-f.x,C=f.x*g.y-g.x*f.y;this.x=d*C-I*x,this.y=v*x-m*C,this.w=m*I-v*d}};Ue.prototype.getY=function(){var t=this.y/this.w;if(z.isNaN(t)||z.isInfinite(t))throw new Vi;return t};Ue.prototype.getX=function(){var t=this.x/this.w;if(z.isNaN(t)||z.isInfinite(t))throw new Vi;return t};Ue.prototype.getCoordinate=function(){var t=new y;return t.x=this.getX(),t.y=this.getY(),t};Ue.prototype.interfaces_=function(){return[]};Ue.prototype.getClass=function(){return Ue};Ue.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=o*l-u*s,p=a*s-i*l,h=i*u-a*o,f=c/h,g=p/h;if(z.isNaN(f)||z.isInfinite(f)||z.isNaN(g)||z.isInfinite(g))throw new Vi;return new y(f,g)};var G=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof y){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},vu={serialVersionUID:{configurable:!0}};G.prototype.getArea=function(){return this.getWidth()*this.getHeight()};G.prototype.equals=function(t){if(!(t instanceof G))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()};G.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new G;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new G(e,r,n,i)};G.prototype.isNull=function(){return this._maxx<this._minx};G.prototype.getMaxX=function(){return this._maxx};G.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof y){var t=arguments[0];return this.covers(t.x,t.y)}else if(arguments[0]instanceof G){var e=arguments[0];return this.isNull()||e.isNull()?!1:e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};G.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof G){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}else if(arguments[0]instanceof y){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};G.prototype.getMinY=function(){return this._miny};G.prototype.getMinX=function(){return this._minx};G.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof y){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof G){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};G.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e};G.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};G.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0};G.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)};G.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};G.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};G.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};G.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e};G.prototype.expandBy=function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};G.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof G){var t=arguments[0];return this.covers(t)}else if(arguments[0]instanceof y){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};G.prototype.centre=function(){return this.isNull()?null:new y((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};G.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof y){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof G){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}};G.prototype.getMaxY=function(){return this._maxy};G.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)};G.prototype.hashCode=function(){var t=17;return t=37*t+y.hashCode(this._minx),t=37*t+y.hashCode(this._maxx),t=37*t+y.hashCode(this._miny),t=37*t+y.hashCode(this._maxy),t};G.prototype.interfaces_=function(){return[Be,qe]};G.prototype.getClass=function(){return G};G.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u)||c<a)}};vu.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(G,vu);var Je={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Jo=function(t){this.geometryFactory=t||new X};Jo.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Je.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(i=Je.emptyTypeStr.exec(t),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Ei[n]&&(e=Ei[n].apply(this,[r]))),e===void 0)throw new Error("Could not parse WKT "+t);return e};Jo.prototype.write=function(t){return this.extractGeometry(t)};Jo.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Un[e])return null;var n=e.toUpperCase(),r;return t.isEmpty()?r=n+" EMPTY":r=n+"("+Un[e].apply(this,[t])+")",r};var Un={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Un.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push("("+Un.point.apply(e,[t._geometries[r]])+")");return n.join(",")},linestring:function(t){for(var e=this,n=[],r=0,i=t._points._coordinates.length;r<i;++r)n.push(Un.coordinate.apply(e,[t._points._coordinates[r]]));return n.join(",")},linearring:function(t){for(var e=this,n=[],r=0,i=t._points._coordinates.length;r<i;++r)n.push(Un.coordinate.apply(e,[t._points._coordinates[r]]));return n.join(",")},multilinestring:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push("("+Un.linestring.apply(e,[t._geometries[r]])+")");return n.join(",")},polygon:function(t){var e=this,n=[];n.push("("+Un.linestring.apply(this,[t._shell])+")");for(var r=0,i=t._holes.length;r<i;++r)n.push("("+Un.linestring.apply(e,[t._holes[r]])+")");return n.join(",")},multipolygon:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push("("+Un.polygon.apply(e,[t._geometries[r]])+")");return n.join(",")},geometrycollection:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push(e.extractGeometry(t._geometries[r]));return n.join(",")}},Ei={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(Je.spaces);return this.geometryFactory.createPoint(new y(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e=this;if(t===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=t.trim().split(","),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(Je.trimParens,"$1"),i.push(Ei.point.apply(e,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e=t.trim().split(","),n=[],r,i=0,o=e.length;i<o;++i)r=e[i].trim().split(Je.spaces),n.push(new y(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e=t.trim().split(","),n=[],r,i=0,o=e.length;i<o;++i)r=e[i].trim().split(Je.spaces),n.push(new y(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){var e=this;if(t===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=t.trim().split(Je.parenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(Je.trimParens,"$1"),i.push(Ei.linestring.apply(e,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){var e=this;if(t===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,o=t.trim().split(Je.parenComma),s,a=[],u=0,l=o.length;u<l;++u)n=o[u].replace(Je.trimParens,"$1"),r=Ei.linestring.apply(e,[n]),i=e.geometryFactory.createLinearRing(r._points),u===0?s=i:a.push(i);return this.geometryFactory.createPolygon(s,a)},multipolygon:function(t){var e=this;if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=t.trim().split(Je.doubleParenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(Je.trimParens,"$1"),i.push(Ei.polygon.apply(e,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){var e=this;if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=t.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(e.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},$e=function(t){this.parser=new Jo(t)};$e.prototype.write=function(t){return this.parser.write(t)};$e.toLineString=function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Wn=function(t){function e(n){t.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new t().stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),zo=function(t){function e(){if(t.call(this),arguments.length===0)t.call(this);else if(arguments.length===1){var n=arguments[0];t.call(this,n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wn),V=function(){};V.prototype.interfaces_=function(){return[]};V.prototype.getClass=function(){return V};V.shouldNeverReachHere=function(){if(arguments.length===0)V.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new zo("Should never reach here"+(t!==null?": "+t:""))}};V.isTrue=function(){var t,e;if(arguments.length===1)t=arguments[0],V.isTrue(t,null);else if(arguments.length===2&&(t=arguments[0],e=arguments[1],!t))throw e===null?new zo:new zo(e)};V.equals=function(){var t,e,n;if(arguments.length===2)t=arguments[0],e=arguments[1],V.equals(t,e,null);else if(arguments.length===3&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new zo("Expected "+t+" but encountered "+e+(n!==null?": "+n:""))};var ht=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new y,this._intPt[1]=new y,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ai={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ht.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]};ht.prototype.getTopologySummary=function(){var t=new vn;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()};ht.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)};ht.prototype.getIntersectionNum=function(){return this._result};ht.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}};ht.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};ht.prototype.setPrecisionModel=function(t){this._precisionModel=t};ht.prototype.isInteriorIntersection=function(){var t=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var e=arguments[0],n=0;n<this._result;n++)if(!(t._intPt[n].equals2D(t._inputLines[e][0])||t._intPt[n].equals2D(t._inputLines[e][1])))return!0;return!1}};ht.prototype.getIntersection=function(t){return this._intPt[t]};ht.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};ht.prototype.hasIntersection=function(){return this._result!==ht.NO_INTERSECTION};ht.prototype.getEdgeDistance=function(t,e){var n=ht.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1]);return n};ht.prototype.isCollinear=function(){return this._result===ht.COLLINEAR_INTERSECTION};ht.prototype.toString=function(){return $e.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+$e.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};ht.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]};ht.prototype.isIntersection=function(t){for(var e=this,n=0;n<this._result;n++)if(e._intPt[n].equals2D(t))return!0;return!1};ht.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]};ht.prototype.interfaces_=function(){return[]};ht.prototype.getClass=function(){return ht};ht.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))r>i?o=r:o=i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);r>i?o=s:o=a,o===0&&!t.equals(e)&&(o=Math.max(s,a))}return V.isTrue(!(o===0&&!t.equals(e)),"Bad distance calculation"),o};ht.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return V.isTrue(!(o===0&&!t.equals(e)),"Invalid distance calculation"),o};ai.DONT_INTERSECT.get=function(){return 0};ai.DO_INTERSECT.get=function(){return 1};ai.COLLINEAR.get=function(){return 2};ai.NO_INTERSECTION.get=function(){return 0};ai.POINT_INTERSECTION.get=function(){return 1};ai.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(ht,ai);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(n){var r=new G(this._inputLines[0][0],this._inputLines[0][1]),i=new G(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},e.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,G.intersects(r,i,n)&&A.orientationIndex(r,i,n)===0&&A.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION}else return t.prototype.computeIntersection.apply(this,arguments)},e.prototype.normalizeToMinimum=function(n,r,i,o,s){s.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),s.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},e.prototype.safeHCoordinateIntersection=function(n,r,i,o){var s=null;try{s=Ue.intersection(n,r,i,o)}catch(a){if(a instanceof Vi)s=e.nearestEndpoint(n,r,i,o);else throw a}finally{}return s},e.prototype.intersection=function(n,r,i,o){var s=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(s)||(s=new y(e.nearestEndpoint(n,r,i,o))),this._precisionModel!==null&&this._precisionModel.makePrecise(s),s},e.prototype.smallestInAbsValue=function(n,r,i,o){var s=n,a=Math.abs(s);return Math.abs(r)<a&&(s=r,a=Math.abs(r)),Math.abs(i)<a&&(s=i,a=Math.abs(i)),Math.abs(o)<a&&(s=o),s},e.prototype.checkDD=function(n,r,i,o,s){var a=pe.intersection(n,r,i,o),u=this.isInSegmentEnvelopes(a);$t.out.println("DD in env = "+u+"  --------------------- "+a),s.distance(a)>1e-4&&$t.out.println("Distance = "+s.distance(a))},e.prototype.intersectionWithNormalization=function(n,r,i,o){var s=new y(n),a=new y(r),u=new y(i),l=new y(o),c=new y;this.normalizeToEnvCentre(s,a,u,l,c);var p=this.safeHCoordinateIntersection(s,a,u,l);return p.x+=c.x,p.y+=c.y,p},e.prototype.computeCollinearIntersection=function(n,r,i,o){var s=G.intersects(n,r,i),a=G.intersects(n,r,o),u=G.intersects(i,o,n),l=G.intersects(i,o,r);return s&&a?(this._intPt[0]=i,this._intPt[1]=o,t.COLLINEAR_INTERSECTION):u&&l?(this._intPt[0]=n,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!a&&!l?t.POINT_INTERSECTION:t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!a&&!u?t.POINT_INTERSECTION:t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!s&&!l?t.POINT_INTERSECTION:t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!s&&!u?t.POINT_INTERSECTION:t.COLLINEAR_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(n,r,i,o,s){var a=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,c=n.y>r.y?n.y:r.y,p=i.x<o.x?i.x:o.x,h=i.y<o.y?i.y:o.y,f=i.x>o.x?i.x:o.x,g=i.y>o.y?i.y:o.y,m=a>p?a:p,d=l<f?l:f,x=u>h?u:h,v=c<g?c:g,I=(m+d)/2,C=(x+v)/2;s.x=I,s.y=C,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},e.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!G.intersects(n,r,i,o))return t.NO_INTERSECTION;var s=A.orientationIndex(n,r,i),a=A.orientationIndex(n,r,o);if(s>0&&a>0||s<0&&a<0)return t.NO_INTERSECTION;var u=A.orientationIndex(i,o,n),l=A.orientationIndex(i,o,r);if(u>0&&l>0||u<0&&l<0)return t.NO_INTERSECTION;var c=s===0&&a===0&&u===0&&l===0;return c?this.computeCollinearIntersection(n,r,i,o):(s===0||a===0||u===0||l===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:s===0?this._intPt[0]=new y(i):a===0?this._intPt[0]=new y(o):u===0?this._intPt[0]=new y(n):l===0&&(this._intPt[0]=new y(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(n,r,i,o){var s=n,a=A.distancePointLine(n,i,o),u=A.distancePointLine(r,i,o);return u<a&&(a=u,s=r),u=A.distancePointLine(i,n,r),u<a&&(a=u,s=i),u=A.distancePointLine(o,n,r),u<a&&(a=u,s=o),s},e}(ht),Hr=function(){};Hr.prototype.interfaces_=function(){return[]};Hr.prototype.getClass=function(){return Hr};Hr.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Hr.signOfDet2x2(r,i,o,s)};Hr.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,t===0||r===0)return e===0||n===0?0:e>0?n>0?-i:i:n>0?i:-i;if(e===0||n===0)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0)if(n>0){if(!(t<=n))return i}else return i;else{if(n>0)return-i;if(t>=n)i=-i,t=-t,n=-n;else return-i}for(;;){if(s=Math.floor(n/t),n=n-s*t,r=r-s*e,r<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(s=Math.floor(t/n),t=t-s*n,e=e-s*r,e<0))return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(e===0)return t===0?0:i;if(t===0)return-i}};var sn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};sn.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Hr.signOfDet2x2(i,o,s,a);if(u===0)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}};sn.prototype.isPointInPolygon=function(){return this.getLocation()!==_.EXTERIOR};sn.prototype.getLocation=function(){return this._isPointOnSegment?_.BOUNDARY:this._crossingCount%2===1?_.INTERIOR:_.EXTERIOR};sn.prototype.isOnSegment=function(){return this._isPointOnSegment};sn.prototype.interfaces_=function(){return[]};sn.prototype.getClass=function(){return sn};sn.locatePointInRing=function(){if(arguments[0]instanceof y&&q(arguments[1],K)){for(var t=arguments[0],e=arguments[1],n=new sn(t),r=new y,i=new y,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof y&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new sn(s),l=1;l<a.length;l++){var c=a[l],p=a[l-1];if(u.countSegment(c,p),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var A=function(){},ui={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};A.prototype.interfaces_=function(){return[]};A.prototype.getClass=function(){return A};A.orientationIndex=function(t,e,n){return pe.orientationIndex(t,e,n)};A.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,s=t[r-1].y;e+=i*(s-o)}return e/2}else if(q(arguments[0],K)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new y,c=new y,p=new y;a.getCoordinate(0,c),a.getCoordinate(1,p);var h=c.x;p.x-=h;for(var f=0,g=1;g<u-1;g++)l.y=c.y,c.x=p.x,c.y=p.y,a.getCoordinate(g+1,p),p.x-=h,f+=c.x*(l.y-p.y);return f/2}};A.distanceLineLine=function(t,e,n,r){if(t.equals(e))return A.distancePointLine(t,n,r);if(n.equals(r))return A.distancePointLine(r,t,e);var i=!1;if(!G.intersects(t,e,n,r))i=!0;else{var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(o===0)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),u=a/o,l=s/o;(l<0||l>1||u<0||u>1)&&(i=!0)}}return i?Se.min(A.distancePointLine(t,n,r),A.distancePointLine(e,n,r),A.distancePointLine(n,t,e),A.distancePointLine(r,t,e)):0};A.isPointInRing=function(t,e){return A.locatePointInRing(t,e)!==_.EXTERIOR};A.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new y;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n};A.isCCW=function(t){var e=t.length-1;if(e<3)throw new ct("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do s=s-1,s<0&&(s=e);while(t[s].equals2D(n)&&s!==r);var a=r;do a=(a+1)%e;while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=A.computeOrientation(u,n,l),p=!1;return c===0?p=u.x>l.x:p=c>0,p};A.locatePointInRing=function(t,e){return sn.locatePointInRing(t,e)};A.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)};A.computeOrientation=function(t,e,n){return A.orientationIndex(t,e,n)};A.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new ct("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=A.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}};A.isOnLine=function(t,e){for(var n=new $r,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1};ui.CLOCKWISE.get=function(){return-1};ui.RIGHT.get=function(){return A.CLOCKWISE};ui.COUNTERCLOCKWISE.get=function(){return 1};ui.LEFT.get=function(){return A.COUNTERCLOCKWISE};ui.COLLINEAR.get=function(){return 0};ui.STRAIGHT.get=function(){return A.COLLINEAR};Object.defineProperties(A,ui);var Kn=function(){};Kn.prototype.filter=function(t){};Kn.prototype.interfaces_=function(){return[]};Kn.prototype.getClass=function(){return Kn};var B=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},An={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};B.prototype.isGeometryCollection=function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION};B.prototype.getFactory=function(){return this._factory};B.prototype.getGeometryN=function(t){return this};B.prototype.getArea=function(){return 0};B.prototype.isRectangle=function(){return!1};B.prototype.equals=function(){if(arguments[0]instanceof B){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}else if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof B))return!1;var n=e;return this.equalsExact(n)}};B.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)};B.prototype.geometryChanged=function(){this.apply(B.geometryChangedFilter)};B.prototype.geometryChangedAction=function(){this._envelope=null};B.prototype.equalsNorm=function(t){return t===null?!1:this.norm().equalsExact(t.norm())};B.prototype.getLength=function(){return 0};B.prototype.getNumGeometries=function(){return 1};B.prototype.compareTo=function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};B.prototype.getUserData=function(){return this._userData};B.prototype.getSRID=function(){return this._SRID};B.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};B.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION)throw new ct("This method does not support GeometryCollection arguments")};B.prototype.equal=function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n};B.prototype.norm=function(){var t=this.copy();return t.normalize(),t};B.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};B.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new G(this._envelope)};B.prototype.setSRID=function(t){this._SRID=t};B.prototype.setUserData=function(t){this._userData=t};B.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(s!==0)return s}return n.hasNext()?1:r.hasNext()?-1:0};B.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};B.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===B.SORTINDEX_MULTIPOINT||this.getSortIndex()===B.SORTINDEX_MULTILINESTRING||this.getSortIndex()===B.SORTINDEX_MULTIPOLYGON};B.prototype.interfaces_=function(){return[Qo,Be,qe]};B.prototype.getClass=function(){return B};B.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1};B.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1};An.serialVersionUID.get=function(){return 8763622679187377e3};An.SORTINDEX_POINT.get=function(){return 0};An.SORTINDEX_MULTIPOINT.get=function(){return 1};An.SORTINDEX_LINESTRING.get=function(){return 2};An.SORTINDEX_LINEARRING.get=function(){return 3};An.SORTINDEX_MULTILINESTRING.get=function(){return 4};An.SORTINDEX_POLYGON.get=function(){return 5};An.SORTINDEX_MULTIPOLYGON.get=function(){return 6};An.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};An.geometryChangedFilter.get=function(){return qs};Object.defineProperties(B,An);var qs=function(){};qs.interfaces_=function(){return[Kn]};qs.filter=function(t){t.geometryChangedAction()};var Sn=function(){};Sn.prototype.filter=function(t){};Sn.prototype.interfaces_=function(){return[]};Sn.prototype.getClass=function(){return Sn};var Fe=function(){},er={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Fe.prototype.isInBoundary=function(t){};Fe.prototype.interfaces_=function(){return[]};Fe.prototype.getClass=function(){return Fe};er.Mod2BoundaryNodeRule.get=function(){return bi};er.EndPointBoundaryNodeRule.get=function(){return Ci};er.MultiValentEndPointBoundaryNodeRule.get=function(){return Si};er.MonoValentEndPointBoundaryNodeRule.get=function(){return wi};er.MOD2_BOUNDARY_RULE.get=function(){return new bi};er.ENDPOINT_BOUNDARY_RULE.get=function(){return new Ci};er.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Si};er.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new wi};er.OGC_SFS_BOUNDARY_RULE.get=function(){return Fe.MOD2_BOUNDARY_RULE};Object.defineProperties(Fe,er);var bi=function(){};bi.prototype.isInBoundary=function(t){return t%2===1};bi.prototype.interfaces_=function(){return[Fe]};bi.prototype.getClass=function(){return bi};var Ci=function(){};Ci.prototype.isInBoundary=function(t){return t>0};Ci.prototype.interfaces_=function(){return[Fe]};Ci.prototype.getClass=function(){return Ci};var Si=function(){};Si.prototype.isInBoundary=function(t){return t>1};Si.prototype.interfaces_=function(){return[Fe]};Si.prototype.getClass=function(){return Si};var wi=function(){};wi.prototype.isInBoundary=function(t){return t===1};wi.prototype.interfaces_=function(){return[Fe]};wi.prototype.getClass=function(){return wi};var Lt=function(){};Lt.prototype.add=function(){};Lt.prototype.addAll=function(){};Lt.prototype.isEmpty=function(){};Lt.prototype.iterator=function(){};Lt.prototype.size=function(){};Lt.prototype.toArray=function(){};Lt.prototype.remove=function(){};function zs(t){this.message=t||""}zs.prototype=new Error;zs.prototype.name="IndexOutOfBoundsException";var $i=function(){};$i.prototype.hasNext=function(){};$i.prototype.next=function(){};$i.prototype.remove=function(){};var Ve=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Lt);function Xi(t){this.message=t||""}Xi.prototype=new Error;Xi.prototype.name="NoSuchElementException";var T=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Lt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Lt]},e.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},e.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},e.prototype.iterator=function(){return new Yc(this)},e.prototype.get=function(n){if(n<0||n>=this.size())throw new zs;return this.array_[n]},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},e.prototype.remove=function(n){for(var r=this,i=!1,o=0,s=this.array_.length;o<s;o++)if(r.array_[o]===n){r.array_.splice(o,1),i=!0;break}return i},e}(Ve),Yc=function(t){function e(n){t.call(this),this.arrayList_=n,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Xi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}($i),Eo=function(t){function e(){if(t.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(r){return this.get(r)},e.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=!1,a=i.iterator();a.hasNext();)r.add(a.next(),o),s=!0;return s}else return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var r=this,i=t.prototype.clone.call(this),o=0;o<this.size();o++)i.add(o,r.get(o).copy());return i},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];t.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1];return this.add(o,s,!0),!0}else if(arguments[0]instanceof y&&typeof arguments[1]=="boolean"){var a=arguments[0],u=arguments[1];if(!u&&this.size()>=1){var l=this.get(this.size()-1);if(l.equals2D(a))return null}t.prototype.add.call(this,a)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],p=arguments[1];return this.add(c,p),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var h=arguments[0],f=arguments[1],g=arguments[2];if(g)for(var m=0;m<h.length;m++)r.add(h[m],f);else for(var d=h.length-1;d>=0;d--)r.add(h[d],f);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof y){var x=arguments[0],v=arguments[1],I=arguments[2];if(!I){var C=this.size();if(C>0){if(x>0){var b=this.get(x-1);if(b.equals2D(v))return null}if(x<C){var L=this.get(x);if(L.equals2D(v))return null}}}t.prototype.add.call(this,x,v)}}else if(arguments.length===4){var M=arguments[0],R=arguments[1],S=arguments[2],F=arguments[3],$=1;S>F&&($=-1);for(var O=S;O!==F;O+=$)r.add(M[O],R);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new y(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(T),j=function(){},ts={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ts.ForwardComparator.get=function(){return io};ts.BidirectionalComparator.get=function(){return Li};ts.coordArrayType.get=function(){return new Array(0).fill(null)};j.prototype.interfaces_=function(){return[]};j.prototype.getClass=function(){return j};j.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))};j.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(j.indexOf(r,e)<0)return r}return null};j.scroll=function(t,e){var n=j.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);$t.arraycopy(t,n,r,0,t.length-n),$t.arraycopy(t,0,r,t.length-n,n),$t.arraycopy(r,0,t,0,t.length)};j.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(o.compare(r[s],i[s])!==0)return!1;return!0}};j.intersection=function(t,e){for(var n=new Eo,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()};j.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1};j.removeRepeatedPoints=function(t){if(!j.hasRepeatedPoints(t))return t;var e=new Eo(t,!1);return e.toCoordinateArray()};j.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}};j.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var r=new Array(e).fill(null);if(e===0)return r;for(var i=0,o=0;o<t.length;o++)t[o]!==null&&(r[i++]=t[o]);return r};j.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new y(t[n]);return e}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new y(r[i+u])};j.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};j.envelope=function(t){for(var e=new G,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e};j.toCoordinateArray=function(t){return t.toArray(j.coordArrayType)};j.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]};j.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1};j.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(r!==0)return r}return 1};j.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(r!==0)return r;n++}return n<e.length?-1:n<t.length?1:0};j.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e};j.extract=function(t,e,n){e=Se.clamp(e,0,t.length),n=Se.clamp(n,-1,t.length);var r=n-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i};Object.defineProperties(j,ts);var io=function(){};io.prototype.compare=function(t,e){var n=t,r=e;return j.compare(n,r)};io.prototype.interfaces_=function(){return[Ii]};io.prototype.getClass=function(){return io};var Li=function(){};Li.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=j.compare(n,r),o=j.isEqualReversed(n,r);return o?0:i};Li.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=j.increasingDirection(n),o=j.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(l!==0)return l;s+=i,a+=o}return 0};Li.prototype.interfaces_=function(){return[Ii]};Li.prototype.getClass=function(){return Li};var li=function(){};li.prototype.get=function(){};li.prototype.put=function(){};li.prototype.size=function(){};li.prototype.values=function(){};li.prototype.entrySet=function(){};var Hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(li);function xo(t){this.message=t||""}xo.prototype=new Error;xo.prototype.name="OperationNotSupported";function es(){}es.prototype=new Lt;es.prototype.contains=function(){};var Us=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Lt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(n){for(var r=this,i=0,o=this.array_.length;i<o;i++){var s=r.array_[i];if(s===n)return!0}return!1},e.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},e.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},e.prototype.remove=function(n){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},e.prototype.iterator=function(){return new Wc(this)},e}(es),Wc=function(t){function e(n){t.call(this),this.hashSet_=n,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Xi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new xo},e}($i),Xn=0,Nr=1;function Ra(t){return t===null?Xn:t.color}function ot(t){return t===null?null:t.parent}function qn(t,e){t!==null&&(t.color=e)}function vs(t){return t===null?null:t.left}function Ta(t){return t===null?null:t.right}function Kt(){this.root_=null,this.size_=0}Kt.prototype=new Hc;Kt.prototype.get=function(t){for(var e=this.root_;e!==null;){var n=t.compareTo(e.key);if(n<0)e=e.left;else if(n>0)e=e.right;else return e.value}return null};Kt.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Xn,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=t.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=e,o}while(n!==null);var s={key:t,left:null,right:null,value:e,parent:r,color:Xn,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null};Kt.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=Nr;t!=null&&t!==this.root_&&t.parent.color===Nr;)if(ot(t)===vs(ot(ot(t)))){var n=Ta(ot(ot(t)));Ra(n)===Nr?(qn(ot(t),Xn),qn(n,Xn),qn(ot(ot(t)),Nr),t=ot(ot(t))):(t===Ta(ot(t))&&(t=ot(t),e.rotateLeft(t)),qn(ot(t),Xn),qn(ot(ot(t)),Nr),e.rotateRight(ot(ot(t))))}else{var r=vs(ot(ot(t)));Ra(r)===Nr?(qn(ot(t),Xn),qn(r,Xn),qn(ot(ot(t)),Nr),t=ot(ot(t))):(t===vs(ot(t))&&(t=ot(t),e.rotateRight(t)),qn(ot(t),Xn),qn(ot(ot(t)),Nr),e.rotateLeft(ot(ot(t))))}this.root_.color=Xn};Kt.prototype.values=function(){var t=new T,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=Kt.successor(e))!==null;)t.add(e.value);return t};Kt.prototype.entrySet=function(){var t=new Us,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=Kt.successor(e))!==null;)t.add(e);return t};Kt.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent===null?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}};Kt.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent===null?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}};Kt.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t};Kt.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}else{for(var n=t.parent,r=t;n!==null&&r===n.right;)r=n,n=n.parent;return n}};Kt.prototype.size=function(){return this.size_};var oo=function(){};oo.prototype.interfaces_=function(){return[]};oo.prototype.getClass=function(){return oo};function Eu(){}Eu.prototype=new es;function ln(){this.array_=[],arguments[0]instanceof Lt&&this.addAll(arguments[0])}ln.prototype=new Eu;ln.prototype.contains=function(t){for(var e=this,n=0,r=this.array_.length;n<r;n++){var i=e.array_[n];if(i.compareTo(t)===0)return!0}return!1};ln.prototype.add=function(t){var e=this;if(this.contains(t))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=e.array_[n];if(i.compareTo(t)===1)return e.array_.splice(n,0,t),!0}return this.array_.push(t),!0};ln.prototype.addAll=function(t){for(var e=this,n=t.iterator();n.hasNext();)e.add(n.next());return!0};ln.prototype.remove=function(t){throw new xo};ln.prototype.size=function(){return this.array_.length};ln.prototype.isEmpty=function(){return this.array_.length===0};ln.prototype.toArray=function(){for(var t=this,e=[],n=0,r=this.array_.length;n<r;n++)e.push(t.array_[n]);return e};ln.prototype.iterator=function(){return new ns(this)};var ns=function(t){this.treeSet_=t,this.position_=0};ns.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Xi;return this.treeSet_.array_[this.position_++]};ns.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};ns.prototype.remove=function(){throw new xo};var wr=function(){};wr.sort=function(){var t=arguments[0],e,n,r,i;if(arguments.length===1)i=function(s,a){return s.compareTo(a)},t.sort(i);else if(arguments.length===2)r=arguments[1],i=function(s,a){return r.compare(s,a)},t.sort(i);else if(arguments.length===3){n=t.slice(arguments[1],arguments[2]),n.sort();var o=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length));for(t.splice(0,t.length),e=0;e<o.length;e++)t.push(o[e])}else if(arguments.length===4)for(n=t.slice(arguments[1],arguments[2]),r=arguments[3],i=function(s,a){return r.compare(s,a)},n.sort(i),o=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length)),t.splice(0,t.length),e=0;e<o.length;e++)t.push(o[e])};wr.asList=function(t){for(var e=new T,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Z=function(){},Qe={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Qe.P.get=function(){return 0};Qe.L.get=function(){return 1};Qe.A.get=function(){return 2};Qe.FALSE.get=function(){return-1};Qe.TRUE.get=function(){return-2};Qe.DONTCARE.get=function(){return-3};Qe.SYM_FALSE.get=function(){return"F"};Qe.SYM_TRUE.get=function(){return"T"};Qe.SYM_DONTCARE.get=function(){return"*"};Qe.SYM_P.get=function(){return"0"};Qe.SYM_L.get=function(){return"1"};Qe.SYM_A.get=function(){return"2"};Z.prototype.interfaces_=function(){return[]};Z.prototype.getClass=function(){return Z};Z.toDimensionSymbol=function(t){switch(t){case Z.FALSE:return Z.SYM_FALSE;case Z.TRUE:return Z.SYM_TRUE;case Z.DONTCARE:return Z.SYM_DONTCARE;case Z.P:return Z.SYM_P;case Z.L:return Z.SYM_L;case Z.A:return Z.SYM_A}throw new ct("Unknown dimension value: "+t)};Z.toDimensionValue=function(t){switch(ro.toUpperCase(t)){case Z.SYM_FALSE:return Z.FALSE;case Z.SYM_TRUE:return Z.TRUE;case Z.SYM_DONTCARE:return Z.DONTCARE;case Z.SYM_P:return Z.P;case Z.SYM_L:return Z.L;case Z.SYM_A:return Z.A}throw new ct("Unknown dimension symbol: "+t)};Object.defineProperties(Z,Qe);var cn=function(){};cn.prototype.filter=function(t){};cn.prototype.interfaces_=function(){return[]};cn.prototype.getClass=function(){return cn};var Xe=function(){};Xe.prototype.filter=function(t,e){};Xe.prototype.isDone=function(){};Xe.prototype.isGeometryChanged=function(){};Xe.prototype.interfaces_=function(){return[]};Xe.prototype.getClass=function(){return Xe};var oe=function(t){function e(r,i){if(t.call(this,i),this._geometries=r||[],t.hasNullElements(this._geometries))throw new ct("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new G,o=0;o<this._geometries.length;o++)i.expandToInclude(r._geometries[o].getEnvelopeInternal());return i},e.prototype.getGeometryN=function(r){return this._geometries[r]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),o=-1,s=0;s<this._geometries.length;s++)for(var a=r._geometries[s].getCoordinates(),u=0;u<a.length;u++)o++,i[o]=a[u];return i},e.prototype.getArea=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getArea();return i},e.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._geometries.length!==s._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!r._geometries[a].equalsExact(s._geometries[a],o))return!1;return!0}else return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();wr.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var r=this,i=Z.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getBoundaryDimension());return i},e.prototype.getDimension=function(){for(var r=this,i=Z.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getDimension());return i},e.prototype.getLength=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getLength();return i},e.prototype.getNumPoints=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getNumPoints();return i},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createGeometryCollection(o)},e.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=new ln(wr.asList(this._geometries)),s=new ln(wr.asList(i._geometries));return this.compare(o,s)}else if(arguments.length===2){for(var a=arguments[0],u=arguments[1],l=a,c=this.getNumGeometries(),p=l.getNumGeometries(),h=0;h<c&&h<p;){var f=r.getGeometryN(h),g=l.getGeometryN(h),m=f.compareToSameClass(g,u);if(m!==0)return m;h++}return h<c?1:h<p?-1:0}},e.prototype.apply=function(){var r=this;if(q(arguments[0],Sn))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(q(arguments[0],Xe)){var s=arguments[0];if(this._geometries.length===0)return null;for(var a=0;a<this._geometries.length&&(r._geometries[a].apply(s),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(q(arguments[0],cn)){var u=arguments[0];u.filter(this);for(var l=0;l<this._geometries.length;l++)r._geometries[l].apply(u)}else if(q(arguments[0],Kn)){var c=arguments[0];c.filter(this);for(var p=0;p<this._geometries.length;p++)r._geometries[p].apply(c)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),V.shouldNeverReachHere(),null},e.prototype.clone=function(){var r=this,i=t.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var o=0;o<this._geometries.length;o++)i._geometries[o]=r._geometries[o].clone();return i},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new e(i,this._factory)},e.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(e,n),e}(B),Tr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return B.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?t.prototype.equalsExact.call(this,r,i):!1}else return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Z.FALSE:0},e.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[i-1-s]=r._geometries[s].reverse();return this.getFactory().createMultiLineString(o)},e.prototype.getBoundary=function(){return new Te(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new e(i,this._factory)},e.prototype.interfaces_=function(){return[oo]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(e,n),e}(oe),Te=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var t=arguments[0],e=Fe.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Te.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)};Te.prototype.getBoundary=function(){return this._geom instanceof dt?this.boundaryLineString(this._geom):this._geom instanceof Tr?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};Te.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this._bnRule.isInBoundary(2);return e?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])};Te.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};Te.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new T;this._endpointMap=new Kt;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);i.getNumPoints()!==0&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue(),u=a.count;e._bnRule.isInBoundary(u)&&n.add(s.getKey())}return j.toCoordinateArray(n)};Te.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);e===null&&(e=new Uo,this._endpointMap.put(t,e)),e.count++};Te.prototype.interfaces_=function(){return[]};Te.prototype.getClass=function(){return Te};Te.getBoundary=function(){if(arguments.length===1){var t=arguments[0],e=new Te(t);return e.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Te(n,r);return i.getBoundary()}};var Uo=function(){this.count=null};Uo.prototype.interfaces_=function(){return[]};Uo.prototype.getClass=function(){return Uo};function Kc(){}function Zc(){}var Qc=function(){};function Jc(){}function tp(){}function ep(){}var Me=function(){},Vs={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Me.prototype.interfaces_=function(){return[]};Me.prototype.getClass=function(){return Me};Me.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)};Me.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new Jc,n=new Kc;return t.printStackTrace(n),e.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o="";new Zc(Me.getStackTrace(r));for(var s=new ep,a=0;a<i;a++)try{o+=s.readLine()+Me.NEWLINE}catch(u){if(u instanceof tp)V.shouldNeverReachHere();else throw u}finally{}return o}};Me.split=function(t,e){for(var n=e.length,r=new T,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),i=i.substring(o+n),o=i.indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a};Me.toString=function(){if(arguments.length===1){var t=arguments[0];return Me.SIMPLE_ORDINATE_FORMAT.format(t)}};Me.spaces=function(t){return Me.chars(" ",t)};Vs.NEWLINE.get=function(){return $t.getProperty("line.separator")};Vs.SIMPLE_ORDINATE_FORMAT.get=function(){return new Qc};Object.defineProperties(Me,Vs);var It=function(){};It.prototype.interfaces_=function(){return[]};It.prototype.getClass=function(){return It};It.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))};It.isRing=function(t){var e=t.size();return e===0?!0:e<=3?!1:t.getOrdinate(0,K.X)===t.getOrdinate(e-1,K.X)&&t.getOrdinate(0,K.Y)===t.getOrdinate(e-1,K.Y)};It.isEqual=function(t,e){var n=t.size(),r=e.size();if(n!==r)return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),o=0;o<n;o++)for(var s=0;s<i;s++){var a=t.getOrdinate(o,s),u=e.getOrdinate(o,s);if(t.getOrdinate(o,s)!==e.getOrdinate(o,s)&&!(z.isNaN(a)&&z.isNaN(u)))return!1}return!0};It.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(It.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)It.copy(e,i-1,r,o,1);return r};It.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)It.swap(t,r,e-r)};It.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}};It.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)It.copyCoord(t,e+o,n,r+o)};It.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var n=t.getDimension(),r=new vn;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Me.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}};It.ensureValidRing=function(t,e){var n=e.size();if(n===0)return e;if(n<=3)return It.createClosedRing(t,e,4);var r=e.getOrdinate(0,K.X)===e.getOrdinate(n-1,K.X)&&e.getOrdinate(0,K.Y)===e.getOrdinate(n-1,K.Y);return r?e:It.createClosedRing(t,e,n+1)};It.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();It.copy(e,0,r,0,i);for(var o=i;o<n;o++)It.copy(e,0,r,o,1);return r};var dt=function(t){function e(r,i){t.call(this,i),this._points=null,this.init(r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new G:this._points.expandEnvelope(new G)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._points.size()!==s._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!r.equal(r._points.getCoordinate(a),s._points.getCoordinate(a),o))return!1;return!0}else return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&It.reverse(r._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Z.FALSE:0},e.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return A.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var r=this._points.copy();It.reverse(r);var i=this.getFactory().createLineString(r);return i},e.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],o=i,s=0,a=0;s<this._points.size()&&a<o._points.size();){var u=r._points.getCoordinate(s).compareTo(o._points.getCoordinate(a));if(u!==0)return u;s++,a++}return s<this._points.size()?1:a<o._points.size()?-1:0}else if(arguments.length===2){var l=arguments[0],c=arguments[1],p=l;return c.compare(this._points,p._points)}},e.prototype.apply=function(){var r=this;if(q(arguments[0],Sn))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(r._points.getCoordinate(o));else if(q(arguments[0],Xe)){var s=arguments[0];if(this._points.size()===0)return null;for(var a=0;a<this._points.size()&&(s.filter(r._points,a),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(q(arguments[0],cn)){var u=arguments[0];u.filter(this)}else if(q(arguments[0],Kn)){var l=arguments[0];l.filter(this)}},e.prototype.getBoundary=function(){return new Te(this).getBoundary()},e.prototype.isEquivalentClass=function(r){return r instanceof e},e.prototype.clone=function(){var r=t.prototype.clone.call(this);return r._points=this._points.clone(),r},e.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return this._points.size()===0},e.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new ct("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},e.prototype.isCoordinate=function(r){for(var i=this,o=0;o<this._points.size();o++)if(i._points.getCoordinate(o).equals(r))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},e.prototype.interfaces_=function(){return[oo]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(B),so=function(){};so.prototype.interfaces_=function(){return[]};so.prototype.getClass=function(){return so};var ye=function(t){function e(r,i){t.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new G;var r=new G;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Z.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var o=arguments[0],s=arguments[1],a=o;return s.compare(this._coordinates,a._coordinates)}},e.prototype.apply=function(){if(q(arguments[0],Sn)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(q(arguments[0],Xe)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(q(arguments[0],cn)){var o=arguments[0];o.filter(this)}else if(q(arguments[0],Kn)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var r=t.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return this._coordinates.size()===0},e.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),V.isTrue(r.size()<=1),this._coordinates=r},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[so]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(e,n),e}(B),pr=function(){};pr.prototype.interfaces_=function(){return[]};pr.prototype.getClass=function(){return pr};var Tt=function(t){function e(r,i,o){if(t.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),t.hasNullElements(i))throw new ct("holes must not contain null elements");if(r.isEmpty()&&t.hasNonEmptyElements(i))throw new ct("shell is empty but holes are not");this._shell=r,this._holes=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),o=-1,s=this._shell.getCoordinates(),a=0;a<s.length;a++)o++,i[o]=s[a];for(var u=0;u<this._holes.length;u++)for(var l=r._holes[u].getCoordinates(),c=0;c<l.length;c++)o++,i[o]=l[c];return i},e.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(A.signedArea(this._shell.getCoordinateSequence()));for(var o=0;o<this._holes.length;o++)i-=Math.abs(A.signedArea(r._holes[o].getCoordinateSequence()));return i},e.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var s=r.getX(o);if(!(s===i.getMinX()||s===i.getMaxX()))return!1;var a=r.getY(o);if(!(a===i.getMinY()||a===i.getMaxY()))return!1}for(var u=r.getX(0),l=r.getY(0),c=1;c<=4;c++){var p=r.getX(c),h=r.getY(c),f=p!==u,g=h!==l;if(f===g)return!1;u=p,l=h}return!0},e.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i,a=this._shell,u=s._shell;if(!a.equalsExact(u,o)||this._holes.length!==s._holes.length)return!1;for(var l=0;l<this._holes.length;l++)if(!r._holes[l].equalsExact(s._holes[l],o))return!1;return!0}else return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);wr.sort(this._holes)}else if(arguments.length===2){var o=arguments[0],s=arguments[1];if(o.isEmpty())return null;var a=new Array(o.getCoordinates().length-1).fill(null);$t.arraycopy(o.getCoordinates(),0,a,0,a.length);var u=j.minCoordinate(o.getCoordinates());j.scroll(a,u),$t.arraycopy(a,0,o.getCoordinates(),0,a.length),o.getCoordinates()[a.length]=a[0],A.isCCW(o.getCoordinates())===s&&j.reverse(o.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var o=0;o<this._holes.length;o++)i+=r._holes[o].getLength();return i},e.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),o=0;o<this._holes.length;o++)i+=r._holes[o].getNumPoints();return i},e.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].copy().reverse();return i},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this._shell,s=i._shell;return o.compareToSameClass(s)}else if(arguments.length===2){var a=arguments[0],u=arguments[1],l=a,c=this._shell,p=l._shell,h=c.compareToSameClass(p,u);if(h!==0)return h;for(var f=this.getNumInteriorRing(),g=l.getNumInteriorRing(),m=0;m<f&&m<g;){var d=r.getInteriorRingN(m),x=l.getInteriorRingN(m),v=d.compareToSameClass(x,u);if(v!==0)return v;m++}return m<f?1:m<g?-1:0}},e.prototype.apply=function(r){var i=this;if(q(r,Sn)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(q(r,Xe)){if(this._shell.apply(r),!r.isDone())for(var s=0;s<this._holes.length&&(i._holes[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(q(r,cn))r.filter(this);else if(q(r,Kn)){r.filter(this),this._shell.apply(r);for(var a=0;a<this._holes.length;a++)i._holes[a].apply(r)}},e.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var o=0;o<this._holes.length;o++)i[o+1]=r._holes[o];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},e.prototype.clone=function(){var r=this,i=t.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].clone();return i},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var r=this,i=this._shell.copy(),o=new Array(this._holes.length).fill(null),s=0;s<o.length;s++)o[s]=r._holes[s].copy();return new e(i,o,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(r){return this._holes[r]},e.prototype.interfaces_=function(){return[pr]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(B),Pi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return B.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?t.prototype.equalsExact.call(this,r,i):!1}else return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Z.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new e(i,this._factory)},e.prototype.interfaces_=function(){return[so]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(e,n),e}(oe),wn=function(t){function e(r,i){r instanceof y&&i instanceof X&&(r=i.getCoordinateSequenceFactory().create(r)),t.call(this,r,i),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return B.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Z.FALSE},e.prototype.isClosed=function(){return this.isEmpty()?!0:t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var r=this._points.copy();It.reverse(r);var i=this.getFactory().createLinearRing(r);return i},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new ct("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new ct("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(dt),bn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return B.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?t.prototype.equalsExact.call(this,r,i):!1}else return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createMultiPolygon(o)},e.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new T,o=0;o<this._geometries.length;o++)for(var s=r._geometries[o],a=s.getBoundary(),u=0;u<a.getNumGeometries();u++)i.add(a.getGeometryN(u));var l=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(l))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new e(i,this._factory)},e.prototype.interfaces_=function(){return[pr]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(oe),Ge=function(t){this._factory=t||null,this._isUserDataCopied=!1},rs={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ge.prototype.setCopyUserData=function(t){this._isUserDataCopied=t};Ge.prototype.edit=function(t,e){if(t===null)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n};Ge.prototype.editInternal=function(t,e){return this._factory===null&&(this._factory=t.getFactory()),t instanceof oe?this.editGeometryCollection(t,e):t instanceof Tt?this.editPolygon(t,e):t instanceof ye?e.edit(t,this._factory):t instanceof dt?e.edit(t,this._factory):(V.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)};Ge.prototype.editGeometryCollection=function(t,e){for(var n=this,r=e.edit(t,this._factory),i=new T,o=0;o<r.getNumGeometries();o++){var s=n.edit(r.getGeometryN(o),e);s===null||s.isEmpty()||i.add(s)}return r.getClass()===Pi?this._factory.createMultiPoint(i.toArray([])):r.getClass()===Tr?this._factory.createMultiLineString(i.toArray([])):r.getClass()===bn?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};Ge.prototype.editPolygon=function(t,e){var n=this,r=e.edit(t,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),e);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var o=new T,s=0;s<r.getNumInteriorRing();s++){var a=n.edit(r.getInteriorRingN(s),e);a===null||a.isEmpty()||o.add(a)}return this._factory.createPolygon(i,o.toArray([]))};Ge.prototype.interfaces_=function(){return[]};Ge.prototype.getClass=function(){return Ge};Ge.GeometryEditorOperation=function(){};rs.NoOpGeometryOperation.get=function(){return ao};rs.CoordinateOperation.get=function(){return uo};rs.CoordinateSequenceOperation.get=function(){return lo};Object.defineProperties(Ge,rs);var ao=function(){};ao.prototype.edit=function(t,e){return t};ao.prototype.interfaces_=function(){return[Ge.GeometryEditorOperation]};ao.prototype.getClass=function(){return ao};var uo=function(){};uo.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return n===null?t:t instanceof wn?e.createLinearRing(n):t instanceof dt?e.createLineString(n):t instanceof ye?n.length>0?e.createPoint(n[0]):e.createPoint():t};uo.prototype.interfaces_=function(){return[Ge.GeometryEditorOperation]};uo.prototype.getClass=function(){return uo};var lo=function(){};lo.prototype.edit=function(t,e){return t instanceof wn?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof dt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof ye?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t};lo.prototype.interfaces_=function(){return[Ge.GeometryEditorOperation]};lo.prototype.getClass=function(){return lo};var vt=function(){var t=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new y}else if(q(arguments[0],K)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,o===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new y}}},xu={serialVersionUID:{configurable:!0}};vt.prototype.setOrdinate=function(t,e,n){switch(e){case K.X:this._coordinates[t].x=n;break;case K.Y:this._coordinates[t].y=n;break;case K.Z:this._coordinates[t].z=n;break;default:throw new ct("invalid ordinateIndex")}};vt.prototype.size=function(){return this._coordinates.length};vt.prototype.getOrdinate=function(t,e){switch(e){case K.X:return this._coordinates[t].x;case K.Y:return this._coordinates[t].y;case K.Z:return this._coordinates[t].z}return z.NaN};vt.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}else if(arguments.length===2){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}};vt.prototype.getCoordinateCopy=function(t){return new y(this._coordinates[t])};vt.prototype.getDimension=function(){return this._dimension};vt.prototype.getX=function(t){return this._coordinates[t].x};vt.prototype.clone=function(){for(var t=this,e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)e[n]=t._coordinates[n].clone();return new vt(e,this._dimension)};vt.prototype.expandEnvelope=function(t){for(var e=this,n=0;n<this._coordinates.length;n++)t.expandToInclude(e._coordinates[n]);return t};vt.prototype.copy=function(){for(var t=this,e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)e[n]=t._coordinates[n].copy();return new vt(e,this._dimension)};vt.prototype.toString=function(){var t=this;if(this._coordinates.length>0){var e=new vn(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)e.append(", "),e.append(t._coordinates[n]);return e.append(")"),e.toString()}else return"()"};vt.prototype.getY=function(t){return this._coordinates[t].y};vt.prototype.toCoordinateArray=function(){return this._coordinates};vt.prototype.interfaces_=function(){return[K,qe]};vt.prototype.getClass=function(){return vt};xu.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(vt,xu);var Ln=function(){},$s={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ln.prototype.readResolve=function(){return Ln.instance()};Ln.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new vt(t)}else if(q(arguments[0],K)){var e=arguments[0];return new vt(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new vt(n):new vt(n,r)}};Ln.prototype.interfaces_=function(){return[Ni,qe]};Ln.prototype.getClass=function(){return Ln};Ln.instance=function(){return Ln.instanceObject};$s.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};$s.instanceObject.get=function(){return new Ln};Object.defineProperties(Ln,$s);var Iu=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n){return this.map_.get(n)||null},e.prototype.put=function(n,r){return this.map_.set(n,r),r},e.prototype.values=function(){for(var n=new T,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},e.prototype.entrySet=function(){var n=new Us;return this.map_.entries().forEach(function(r){return n.add(r)}),n},e.prototype.size=function(){return this.map_.size()},e}(li),J=function t(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=t.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof pn){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},Xs={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};J.prototype.equals=function(t){if(!(t instanceof J))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale};J.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new un(n).compareTo(new un(r))};J.prototype.getScale=function(){return this._scale};J.prototype.isFloating=function(){return this._modelType===J.FLOATING||this._modelType===J.FLOATING_SINGLE};J.prototype.getType=function(){return this._modelType};J.prototype.toString=function(){var t="UNKNOWN";return this._modelType===J.FLOATING?t="Floating":this._modelType===J.FLOATING_SINGLE?t="Floating-Single":this._modelType===J.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t};J.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(z.isNaN(t))return t;if(this._modelType===J.FLOATING_SINGLE){var e=t;return e}return this._modelType===J.FIXED?Math.round(t*this._scale)/this._scale:t}else if(arguments[0]instanceof y){var n=arguments[0];if(this._modelType===J.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};J.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===J.FLOATING?t=16:this._modelType===J.FLOATING_SINGLE?t=6:this._modelType===J.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t};J.prototype.setScale=function(t){this._scale=Math.abs(t)};J.prototype.interfaces_=function(){return[qe,Be]};J.prototype.getClass=function(){return J};J.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e};Xs.serialVersionUID.get=function(){return 7777263578777804e3};Xs.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(J,Xs);var pn=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},js={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};pn.prototype.readResolve=function(){return pn.nameToTypeMap.get(this._name)};pn.prototype.toString=function(){return this._name};pn.prototype.interfaces_=function(){return[qe]};pn.prototype.getClass=function(){return pn};js.serialVersionUID.get=function(){return-552860263173159e4};js.nameToTypeMap.get=function(){return new Iu};Object.defineProperties(pn,js);J.Type=pn;J.FIXED=new pn("FIXED");J.FLOATING=new pn("FLOATING");J.FLOATING_SINGLE=new pn("FLOATING SINGLE");var X=function t(){this._precisionModel=new J,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?q(arguments[0],Ni)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof J&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Nu={serialVersionUID:{configurable:!0}};X.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new y(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new y(t.getMinX(),t.getMinY()),new y(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new y(t.getMinX(),t.getMinY()),new y(t.getMinX(),t.getMaxY()),new y(t.getMaxX(),t.getMaxY()),new y(t.getMaxX(),t.getMinY()),new y(t.getMinX(),t.getMinY())]),null)};X.prototype.createLineString=function(t){if(t){if(t instanceof Array)return new dt(this.getCoordinateSequenceFactory().create(t),this);if(q(t,K))return new dt(t,this)}else return new dt(this.getCoordinateSequenceFactory().create([]),this)};X.prototype.createMultiLineString=function(){if(arguments.length===0)return new Tr(null,this);if(arguments.length===1){var t=arguments[0];return new Tr(t,this)}};X.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();e===null&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(e===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(X.toGeometryArray(t));var a=t.iterator().next(),u=t.size()>1;if(u){if(a instanceof Tt)return this.createMultiPolygon(X.toPolygonArray(t));if(a instanceof dt)return this.createMultiLineString(X.toLineStringArray(t));if(a instanceof ye)return this.createMultiPoint(X.toPointArray(t));V.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a};X.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)};X.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof y){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}else if(q(arguments[0],K)){var e=arguments[0];return new ye(e,this)}}};X.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};X.prototype.createPolygon=function(){if(arguments.length===0)return new Tt(null,null,this);if(arguments.length===1){if(q(arguments[0],K)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof wn){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new Tt(r,i,this)}};X.prototype.getSRID=function(){return this._SRID};X.prototype.createGeometryCollection=function(){if(arguments.length===0)return new oe(null,this);if(arguments.length===1){var t=arguments[0];return new oe(t,this)}};X.prototype.createGeometry=function(t){var e=new Ge(this);return e.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};X.prototype.getPrecisionModel=function(){return this._precisionModel};X.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(q(arguments[0],K)){var e=arguments[0];return new wn(e,this)}}};X.prototype.createMultiPolygon=function(){if(arguments.length===0)return new bn(null,this);if(arguments.length===1){var t=arguments[0];return new bn(t,this)}};X.prototype.createMultiPoint=function(){var t=this;if(arguments.length===0)return new Pi(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Pi(e,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(q(arguments[0],K)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=t.getCoordinateSequenceFactory().create(1,r.getDimension());It.copy(r,o,s,0,1),i[o]=t.createPoint(s)}return this.createMultiPoint(i)}}};X.prototype.interfaces_=function(){return[qe]};X.prototype.getClass=function(){return X};X.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};X.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)};X.getDefaultCoordinateSequenceFactory=function(){return Ln.instance()};X.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};X.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};X.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};X.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};X.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};X.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)};X.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)};Nu.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(X,Nu);var np=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],is=function(t){this.geometryFactory=t||new X};is.prototype.read=function(t){var e;typeof t=="string"?e=JSON.parse(t):e=t;var n=e.type;if(!en[n])throw new Error("Unknown GeoJSON type: "+e.type);return np.indexOf(n)!==-1?en[n].apply(this,[e.coordinates]):n==="GeometryCollection"?en[n].apply(this,[e.geometries]):en[n].apply(this,[e])};is.prototype.write=function(t){var e=t.getGeometryType();if(!Vn[e])throw new Error("Geometry is not supported");return Vn[e].apply(this,[t])};var en={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!en[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=en.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e=this,n={};if(t.features){n.features=[];for(var r=0;r<t.features.length;++r)n.features.push(e.read(t.features[r]))}return t.bbox&&(n.bbox=this.parse.bbox.apply(this,[t.bbox])),n},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new y(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new y(t[0],t[1]),new y(t[2],t[1]),new y(t[2],t[3]),new y(t[0],t[3]),new y(t[0],t[1])])},Point:function(t){var e=new y(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=this,n=[],r=0;r<t.length;++r)n.push(en.Point.apply(e,[t[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(t){var e=en.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=this,n=[],r=0;r<t.length;++r)n.push(en.LineString.apply(e,[t[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(t){for(var e=this,n=en.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<t.length;++o){var s=t[o],a=en.coordinates.apply(e,[s]),u=e.geometryFactory.createLinearRing(a);i.push(u)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(t){for(var e=this,n=[],r=0;r<t.length;++r){var i=t[r];n.push(en.Polygon.apply(e,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(t){for(var e=this,n=[],r=0;r<t.length;++r){var i=t[r];n.push(e.read(i))}return this.geometryFactory.createGeometryCollection(n)}},Vn={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=Vn.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=Vn.Point.apply(e,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(t){for(var e=this,n=[],r=t.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(Vn.coordinate.apply(e,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=Vn.LineString.apply(e,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(t){var e=this,n=[],r=Vn.LineString.apply(this,[t._shell]);n.push(r.coordinates);for(var i=0;i<t._holes.length;++i){var o=t._holes[i],s=Vn.LineString.apply(e,[o]);n.push(s.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=Vn.Polygon.apply(e,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=i.getGeometryType();n.push(Vn[o].apply(e,[i]))}return{type:"GeometryCollection",geometries:n}}},Ys=function(t){this.geometryFactory=t||new X,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new is(this.geometryFactory)};Ys.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===J.FIXED&&this.reducePrecision(e),e};Ys.prototype.reducePrecision=function(t){var e=this,n,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(n=0,r=t.points.length;n<r;n++)e.precisionModel.makePrecise(t.points[n]);else if(t.geometries)for(n=0,r=t.geometries.length;n<r;n++)e.reducePrecision(t.geometries[n])};var bu=function(){this.parser=new is(this.geometryFactory)};bu.prototype.write=function(t){return this.parser.write(t)};var w=function(){},os={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};w.prototype.interfaces_=function(){return[]};w.prototype.getClass=function(){return w};w.opposite=function(t){return t===w.LEFT?w.RIGHT:t===w.RIGHT?w.LEFT:t};os.ON.get=function(){return 0};os.LEFT.get=function(){return 1};os.RIGHT.get=function(){return 2};Object.defineProperties(w,os);function ss(t){this.message=t||""}ss.prototype=new Error;ss.prototype.name="EmptyStackException";function En(){this.array_=[]}En.prototype=new Ve;En.prototype.add=function(t){return this.array_.push(t),!0};En.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]};En.prototype.push=function(t){return this.array_.push(t),t};En.prototype.pop=function(t){if(this.array_.length===0)throw new ss;return this.array_.pop()};En.prototype.peek=function(){if(this.array_.length===0)throw new ss;return this.array_[this.array_.length-1]};En.prototype.empty=function(){return this.array_.length===0};En.prototype.isEmpty=function(){return this.empty()};En.prototype.search=function(t){return this.array_.indexOf(t)};En.prototype.size=function(){return this.array_.length};En.prototype.toArray=function(){for(var t=this,e=[],n=0,r=this.array_.length;n<r;n++)e.push(t.array_[n]);return e};var hn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};hn.prototype.getCoordinate=function(){return this._minCoord};hn.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n};hn.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();V.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=A.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===A.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===A.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};hn.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge(),r=n.getCoordinates();if(e<0||e+1>=r.length||r[e].y===r[e+1].y)return-1;var i=w.LEFT;return r[e].y<r[e+1].y&&(i=w.RIGHT),i};hn.prototype.getEdge=function(){return this._orientedDe};hn.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(e._minCoord===null||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])};hn.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode(),e=t.getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};hn.prototype.findEdge=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();r.isForward()&&e.checkForRightmostCoordinate(r)}V.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===w.LEFT&&(this._orientedDe=this._minDe.getSym())};hn.prototype.interfaces_=function(){return[]};hn.prototype.getClass=function(){return hn};var Zn=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new y(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},e}(Wn),as=function(){this.array_=[]};as.prototype.addLast=function(t){this.array_.push(t)};as.prototype.removeFirst=function(){return this.array_.shift()};as.prototype.isEmpty=function(){return this.array_.length===0};var se=function(){this._finder=null,this._dirEdgeList=new T,this._nodes=new T,this._rightMostCoord=null,this._env=null,this._finder=new hn};se.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}};se.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};se.prototype.computeNodeDepth=function(t){for(var e=this,n=null,r=t.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new Zn("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(n);for(var o=t.getEdges().iterator();o.hasNext();){var s=o.next();s.setVisited(!0),e.copySymDepths(s)}};se.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(w.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)};se.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};se.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(w.RIGHT)>=1&&e.getDepth(w.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}};se.prototype.computeDepths=function(t){var e=this,n=new Us,r=new as,i=t.getNode();for(r.addLast(i),n.add(i),t.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),e.computeNodeDepth(o);for(var s=o.getEdges().iterator();s.hasNext();){var a=s.next(),u=a.getSym();if(!u.isVisited()){var l=u.getNode();n.contains(l)||(r.addLast(l),n.add(l))}}}};se.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0};se.prototype.getEnvelope=function(){if(this._env===null){for(var t=new G,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)t.expandToInclude(r[i]);this._env=t}return this._env};se.prototype.addReachable=function(t){var e=this,n=new En;for(n.add(t);!n.empty();){var r=n.pop();e.add(r,n)}};se.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(w.LEFT,t.getDepth(w.RIGHT)),e.setDepth(w.RIGHT,t.getDepth(w.LEFT))};se.prototype.add=function(t,e){var n=this;t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),s=o.getNode();s.isVisited()||e.push(s)}};se.prototype.getNodes=function(){return this._nodes};se.prototype.getDirectedEdges=function(){return this._dirEdgeList};se.prototype.interfaces_=function(){return[Be]};se.prototype.getClass=function(){return se};var st=function t(){var e=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[w.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[w.ON]=s,this.location[w.LEFT]=a,this.location[w.RIGHT]=u}};st.prototype.setAllLocations=function(t){for(var e=this,n=0;n<this.location.length;n++)e.location[n]=t};st.prototype.isNull=function(){for(var t=this,e=0;e<this.location.length;e++)if(t.location[e]!==_.NONE)return!1;return!0};st.prototype.setAllLocationsIfNull=function(t){for(var e=this,n=0;n<this.location.length;n++)e.location[n]===_.NONE&&(e.location[n]=t)};st.prototype.isLine=function(){return this.location.length===1};st.prototype.merge=function(t){var e=this;if(t.location.length>this.location.length){var n=new Array(3).fill(null);n[w.ON]=this.location[w.ON],n[w.LEFT]=_.NONE,n[w.RIGHT]=_.NONE,this.location=n}for(var r=0;r<this.location.length;r++)e.location[r]===_.NONE&&r<t.location.length&&(e.location[r]=t.location[r])};st.prototype.getLocations=function(){return this.location};st.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[w.LEFT];this.location[w.LEFT]=this.location[w.RIGHT],this.location[w.RIGHT]=t};st.prototype.toString=function(){var t=new vn;return this.location.length>1&&t.append(_.toLocationSymbol(this.location[w.LEFT])),t.append(_.toLocationSymbol(this.location[w.ON])),this.location.length>1&&t.append(_.toLocationSymbol(this.location[w.RIGHT])),t.toString()};st.prototype.setLocations=function(t,e,n){this.location[w.ON]=t,this.location[w.LEFT]=e,this.location[w.RIGHT]=n};st.prototype.get=function(t){return t<this.location.length?this.location[t]:_.NONE};st.prototype.isArea=function(){return this.location.length>1};st.prototype.isAnyNull=function(){for(var t=this,e=0;e<this.location.length;e++)if(t.location[e]===_.NONE)return!0;return!1};st.prototype.setLocation=function(){if(arguments.length===1){var t=arguments[0];this.setLocation(w.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}};st.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(_.NONE)};st.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]};st.prototype.allPositionsEqual=function(t){for(var e=this,n=0;n<this.location.length;n++)if(e.location[n]!==t)return!1;return!0};st.prototype.interfaces_=function(){return[]};st.prototype.getClass=function(){return st};var et=function t(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new st(e),this.elt[1]=new st(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new st(n.elt[0]),this.elt[1]=new st(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new st(_.NONE),this.elt[1]=new st(_.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new st(o,s,a),this.elt[1]=new st(o,s,a)}else if(arguments.length===4){var u=arguments[0],l=arguments[1],c=arguments[2],p=arguments[3];this.elt[0]=new st(_.NONE,_.NONE,_.NONE),this.elt[1]=new st(_.NONE,_.NONE,_.NONE),this.elt[u].setLocations(l,c,p)}};et.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t};et.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)};et.prototype.isNull=function(t){return this.elt[t].isNull()};et.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}};et.prototype.isLine=function(t){return this.elt[t].isLine()};et.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)e.elt[n]===null&&t.elt[n]!==null?e.elt[n]=new st(t.elt[n]):e.elt[n].merge(t.elt[n])};et.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};et.prototype.getLocation=function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(w.ON)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}};et.prototype.toString=function(){var t=new vn;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()};et.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}};et.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()};et.prototype.setLocation=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(w.ON,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};et.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)};et.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)};et.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new st(this.elt[t].location[0]))};et.prototype.interfaces_=function(){return[]};et.prototype.getClass=function(){return et};et.toLineLabel=function(t){for(var e=new et(_.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var wt=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new T,this._pts=new T,this._label=new et(_.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new T,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};wt.prototype.computeRing=function(){var t=this;if(this._ring!==null)return null;for(var e=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)e[n]=t._pts.get(n);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=A.isCCW(this._ring.getCoordinates())};wt.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};wt.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(n===null)throw new Zn("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Zn("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();V.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)};wt.prototype.getLinearRing=function(){return this._ring};wt.prototype.getCoordinate=function(t){return this._pts.get(t)};wt.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode(),r=n.getEdges().getOutgoingDegree(t);r>t._maxNodeDegree&&(t._maxNodeDegree=r),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2};wt.prototype.addPoints=function(t,e,n){var r=this,i=t.getCoordinates();if(e){var o=1;n&&(o=0);for(var s=o;s<i.length;s++)r._pts.add(i[s])}else{var a=i.length-2;n&&(a=i.length-1);for(var u=a;u>=0;u--)r._pts.add(i[u])}};wt.prototype.isHole=function(){return this._isHole};wt.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)};wt.prototype.containsPoint=function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t)||!A.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(t))return!1}return!0};wt.prototype.addHole=function(t){this._holes.add(t)};wt.prototype.isShell=function(){return this._shell===null};wt.prototype.getLabel=function(){return this._label};wt.prototype.getEdges=function(){return this._edges};wt.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};wt.prototype.getShell=function(){return this._shell};wt.prototype.mergeLabel=function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=e.getLocation(n,w.RIGHT);if(r===_.NONE)return null;if(this._label.getLocation(n)===_.NONE)return this._label.setLocation(n,r),null}};wt.prototype.setShell=function(t){this._shell=t,t!==null&&t.addHole(this)};wt.prototype.toPolygon=function(t){for(var e=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=e._holes.get(r).getLinearRing();var i=t.createPolygon(this.getLinearRing(),n);return i};wt.prototype.interfaces_=function(){return[]};wt.prototype.getClass=function(){return wt};var rp=function(t){function e(){var n=arguments[0],r=arguments[1];t.call(this,n,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},e.prototype.getNext=function(n){return n.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wt),ip=function(t){function e(){var n=arguments[0],r=arguments[1];t.call(this,n,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var n=this,r=new T,i=this._startDe;do{if(i.getMinEdgeRing()===null){var o=new rp(i,n._geometryFactory);r.add(o)}i=i.getNext()}while(i!==this._startDe);return r},e.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},e.prototype.getNext=function(n){return n.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wt),we=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var t=arguments[0];this._label=t}};we.prototype.setVisited=function(t){this._isVisited=t};we.prototype.setInResult=function(t){this._isInResult=t};we.prototype.isCovered=function(){return this._isCovered};we.prototype.isCoveredSet=function(){return this._isCoveredSet};we.prototype.setLabel=function(t){this._label=t};we.prototype.getLabel=function(){return this._label};we.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0};we.prototype.updateIM=function(t){V.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)};we.prototype.isInResult=function(){return this._isInResult};we.prototype.isVisited=function(){return this._isVisited};we.prototype.interfaces_=function(){return[]};we.prototype.getClass=function(){return we};var us=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new et(0,_.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(n){},e.prototype.computeMergedLocation=function(n,r){var i=_.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==_.BOUNDARY&&(i=o)}return i},e.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new et(n,r):this._label.setLocation(n,r)}else return t.prototype.setLabel.apply(this,arguments)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof e){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof et)for(var i=arguments[0],o=0;o<2;o++){var s=n.computeMergedLocation(i,o),a=n._label.getLocation(o);a===_.NONE&&n._label.setLocation(o,s)}},e.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},e.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=_.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case _.BOUNDARY:i=_.INTERIOR;break;case _.INTERIOR:i=_.BOUNDARY;break;default:i=_.BOUNDARY;break}this._label.setLocation(n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(we),fn=function(){this.nodeMap=new Kt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};fn.prototype.find=function(t){return this.nodeMap.get(t)};fn.prototype.addNode=function(){if(arguments[0]instanceof y){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}else if(arguments[0]instanceof us){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};fn.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}};fn.prototype.iterator=function(){return this.nodeMap.values().iterator()};fn.prototype.values=function(){return this.nodeMap.values()};fn.prototype.getBoundaryNodes=function(t){for(var e=new T,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===_.BOUNDARY&&e.add(r)}return e};fn.prototype.add=function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)};fn.prototype.interfaces_=function(){return[]};fn.prototype.getClass=function(){return fn};var rt=function(){},Io={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};rt.prototype.interfaces_=function(){return[]};rt.prototype.getClass=function(){return rt};rt.isNorthern=function(t){return t===rt.NE||t===rt.NW};rt.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return n===2};rt.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(n===2)return-1;var r=t<e?t:e,i=t>e?t:e;return r===0&&i===3?3:r};rt.isInHalfPlane=function(t,e){return e===rt.SE?t===rt.SE||t===rt.SW:t===e||t===e+1};rt.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new ct("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?rt.NE:rt.SE:e>=0?rt.NW:rt.SW}else if(arguments[0]instanceof y&&arguments[1]instanceof y){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new ct("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?rt.NE:rt.SE:r.y>=n.y?rt.NW:rt.SW}};Io.NE.get=function(){return 0};Io.NW.get=function(){return 1};Io.SW.get=function(){return 2};Io.SE.get=function(){return 3};Object.defineProperties(rt,Io);var Zt=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Zt.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:A.computeOrientation(t._p0,t._p1,this._p1)};Zt.prototype.getDy=function(){return this._dy};Zt.prototype.getCoordinate=function(){return this._p0};Zt.prototype.setNode=function(t){this._node=t};Zt.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)};Zt.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)};Zt.prototype.getDirectedCoordinate=function(){return this._p1};Zt.prototype.getDx=function(){return this._dx};Zt.prototype.getLabel=function(){return this._label};Zt.prototype.getEdge=function(){return this._edge};Zt.prototype.getQuadrant=function(){return this._quadrant};Zt.prototype.getNode=function(){return this._node};Zt.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};Zt.prototype.computeLabel=function(t){};Zt.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=rt.quadrant(this._dx,this._dy),V.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};Zt.prototype.interfaces_=function(){return[Be]};Zt.prototype.getClass=function(){return Zt};var Ms=function(t){function e(){var n=arguments[0],r=arguments[1];if(t.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(n){return this._depth[n]},e.prototype.setVisited=function(n){this._isVisited=n},e.prototype.computeDirectedLabel=function(){this._label=new et(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new Zn("assigned depths do not match",this.getCoordinate());this._depth[n]=r},e.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,w.LEFT)===_.INTERIOR&&n._label.getLocation(i,w.RIGHT)===_.INTERIOR||(r=!1);return r},e.prototype.setNextMin=function(n){this._nextMin=n},e.prototype.print=function(n){t.prototype.print.call(this,n),n.print(" "+this._depth[w.LEFT]+"/"+this._depth[w.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},e.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},e.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,_.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,_.EXTERIOR);return n&&r&&i},e.prototype.setEdgeRing=function(n){this._edgeRing=n},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},e.prototype.setInResult=function(n){this._isInResult=n},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},e.prototype.setSym=function(n){this._sym=n},e.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},e.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===w.LEFT&&(o=-1);var s=w.opposite(n),a=i*o,u=r+a;this.setDepth(n,r),this.setDepth(s,u)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(n){this._next=n},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(n,r){return n===_.EXTERIOR&&r===_.INTERIOR?1:n===_.INTERIOR&&r===_.EXTERIOR?-1:0},e}(Zt),Oi=function(){};Oi.prototype.createNode=function(t){return new us(t,null)};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};var ft=function(){if(this._edges=new T,this._nodes=null,this._edgeEndList=new T,arguments.length===0)this._nodes=new fn(new Oi);else if(arguments.length===1){var t=arguments[0];this._nodes=new fn(t)}};ft.prototype.printEdges=function(t){var e=this;t.println("Edges:");for(var n=0;n<this._edges.size();n++){t.println("edge "+n+":");var r=e._edges.get(n);r.print(t),r.eiList.print(t)}};ft.prototype.find=function(t){return this._nodes.find(t)};ft.prototype.addNode=function(){if(arguments[0]instanceof us){var t=arguments[0];return this._nodes.addNode(t)}else if(arguments[0]instanceof y){var e=arguments[0];return this._nodes.addNode(e)}};ft.prototype.getNodeIterator=function(){return this._nodes.iterator()};ft.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}};ft.prototype.debugPrintln=function(t){$t.out.println(t)};ft.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(t)===_.BOUNDARY};ft.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}};ft.prototype.matchInSameDirection=function(t,e,n,r){return t.equals(n)?A.computeOrientation(t,e,r)===A.COLLINEAR&&rt.quadrant(t,e)===rt.quadrant(n,r):!1};ft.prototype.getEdgeEnds=function(){return this._edgeEndList};ft.prototype.debugPrint=function(t){$t.out.print(t)};ft.prototype.getEdgeIterator=function(){return this._edges.iterator()};ft.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1])||n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null};ft.prototype.insertEdge=function(t){this._edges.add(t)};ft.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null};ft.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Ms(r,!0),o=new Ms(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}};ft.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)};ft.prototype.getNodes=function(){return this._nodes.values()};ft.prototype.findEdge=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(t.equals(o[0])&&e.equals(o[1]))return i}return null};ft.prototype.interfaces_=function(){return[]};ft.prototype.getClass=function(){return ft};ft.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}};var me=function(){this._geometryFactory=null,this._shellList=new T;var t=arguments[0];this._geometryFactory=t};me.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}};me.prototype.computePolygons=function(t){for(var e=this,n=new T,r=t.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(e._geometryFactory);n.add(o)}return n};me.prototype.placeFreeHoles=function(t,e){for(var n=this,r=e.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var o=n.findEdgeRingContaining(i,t);if(o===null)throw new Zn("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}};me.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=this,i=new T,o=t.iterator();o.hasNext();){var s=o.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings(),u=r.findShell(a);u!==null?(r.placePolygonHoles(u,a),e.add(u)):n.addAll(a)}else i.add(s)}return i};me.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1};me.prototype.buildMaximalEdgeRings=function(t){for(var e=this,n=new T,r=t.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var o=new ip(i,e._geometryFactory);n.add(o),o.setInResult()}}return n};me.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}};me.prototype.getPolygons=function(){var t=this.computePolygons(this._shellList);return t};me.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();o!==null&&(s=o.getLinearRing().getEnvelopeInternal());var p=!1;c.contains(r)&&A.isPointInRing(i,l.getCoordinates())&&(p=!0),p&&(o===null||s.contains(c))&&(o=u)}return o};me.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return V.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n};me.prototype.add=function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];ft.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new T,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};me.prototype.interfaces_=function(){return[]};me.prototype.getClass=function(){return me};var Ri=function(){};Ri.prototype.getBounds=function(){};Ri.prototype.interfaces_=function(){return[]};Ri.prototype.getClass=function(){return Ri};var je=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};je.prototype.getItem=function(){return this._item};je.prototype.getBounds=function(){return this._bounds};je.prototype.interfaces_=function(){return[Ri,qe]};je.prototype.getClass=function(){return je};var Qn=function(){this._size=null,this._items=null,this._size=0,this._items=new T,this._items.add(null)};Qn.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t};Qn.prototype.size=function(){return this._size};Qn.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);t*2<=this._size&&(n=t*2,n!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)};Qn.prototype.clear=function(){this._size=0,this._items.clear()};Qn.prototype.isEmpty=function(){return this._size===0};Qn.prototype.add=function(t){var e=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)e._items.set(n,e._items.get(Math.trunc(n/2)));this._items.set(n,t)};Qn.prototype.interfaces_=function(){return[]};Qn.prototype.getClass=function(){return Qn};var hr=function(){};hr.prototype.visitItem=function(t){};hr.prototype.interfaces_=function(){return[]};hr.prototype.getClass=function(){return hr};var Wr=function(){};Wr.prototype.insert=function(t,e){};Wr.prototype.remove=function(t,e){};Wr.prototype.query=function(){};Wr.prototype.interfaces_=function(){return[]};Wr.prototype.getClass=function(){return Wr};var Rt=function(){if(this._childBoundables=new T,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var t=arguments[0];this._level=t}},Cu={serialVersionUID:{configurable:!0}};Rt.prototype.getLevel=function(){return this._level};Rt.prototype.size=function(){return this._childBoundables.size()};Rt.prototype.getChildBoundables=function(){return this._childBoundables};Rt.prototype.addChildBoundable=function(t){V.isTrue(this._bounds===null),this._childBoundables.add(t)};Rt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Rt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Rt.prototype.interfaces_=function(){return[Ri,qe]};Rt.prototype.getClass=function(){return Rt};Cu.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Rt,Cu);var Ye=function(){};Ye.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}};Ye.min=function(t){return Ye.sort(t),t.get(0)};Ye.sort=function(t,e){var n=t.toArray();e?wr.sort(n,e):wr.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])};Ye.singletonList=function(t){var e=new T;return e.add(t),e};var Ct=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Ct.prototype.expandToQueue=function(t,e){var n=Ct.isComposite(this._boundable1),r=Ct.isComposite(this._boundable2);if(n&&r)return Ct.area(this._boundable1)>Ct.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new ct("neither boundable is composite")};Ct.prototype.isLeaves=function(){return!(Ct.isComposite(this._boundable1)||Ct.isComposite(this._boundable2))};Ct.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0};Ct.prototype.expand=function(t,e,n,r){for(var i=this,o=t.getChildBoundables(),s=o.iterator();s.hasNext();){var a=s.next(),u=new Ct(a,e,i._itemDistance);u.getDistance()<r&&n.add(u)}};Ct.prototype.getBoundable=function(t){return t===0?this._boundable1:this._boundable2};Ct.prototype.getDistance=function(){return this._distance};Ct.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};Ct.prototype.interfaces_=function(){return[Be]};Ct.prototype.getClass=function(){return Ct};Ct.area=function(t){return t.getBounds().getArea()};Ct.isComposite=function(t){return t instanceof Rt};var Ft=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new T,this._nodeCapacity=null,arguments.length===0){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(arguments.length===1){var n=arguments[0];V.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},ls={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ft.prototype.getNodeCapacity=function(){return this._nodeCapacity};Ft.prototype.lastNode=function(t){return t.get(t.size()-1)};Ft.prototype.size=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Rt?n+=t.size(i):i instanceof je&&(n+=1)}return n}};Ft.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof je&&i.getItem()===e&&(n=i)}return n!==null?(t.getChildBoundables().remove(n),!0):!1};Ft.prototype.itemsTree=function(){var t=this;if(arguments.length===0){this.build();var e=this.itemsTree(this._root);return e===null?new T:e}else if(arguments.length===1){for(var n=arguments[0],r=new T,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Rt){var s=t.itemsTree(o);s!==null&&r.add(s)}else o instanceof je?r.add(o.getItem()):V.shouldNeverReachHere()}return r.size()<=0?null:r}};Ft.prototype.insert=function(t,e){V.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new je(t,e))};Ft.prototype.boundablesAtLevel=function(){var t=this;if(arguments.length===1){var e=arguments[0],n=new T;return this.boundablesAtLevel(e,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(V.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Rt?t.boundablesAtLevel(r,a,o):(V.isTrue(a instanceof je),r===-1&&o.add(a))}return null}};Ft.prototype.query=function(){var t=this;if(arguments.length===1){var e=arguments[0];this.build();var n=new T;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(q(arguments[2],hr)&&arguments[0]instanceof Object&&arguments[1]instanceof Rt)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof Rt?t.query(o,c,a):c instanceof je?a.visitItem(c.getItem()):V.shouldNeverReachHere())}else if(q(arguments[2],Ve)&&arguments[0]instanceof Object&&arguments[1]instanceof Rt)for(var p=arguments[0],h=arguments[1],f=arguments[2],g=h.getChildBoundables(),m=0;m<g.size();m++){var d=g.get(m);t.getIntersectsOp().intersects(d.getBounds(),p)&&(d instanceof Rt?t.query(p,d,f):d instanceof je?f.add(d.getItem()):V.shouldNeverReachHere())}}};Ft.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Ft.prototype.getRoot=function(){return this.build(),this._root};Ft.prototype.remove=function(){var t=this;if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),e)?this.remove(e,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof Rt&&(s=t.remove(r,l,o),s)){a=l;break}}return a!==null&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}};Ft.prototype.createHigherLevels=function(t,e){V.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)};Ft.prototype.depth=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Rt){var o=t.depth(i);o>n&&(n=o)}}return n+1}};Ft.prototype.createParentBoundables=function(t,e){var n=this;V.isTrue(!t.isEmpty());var r=new T;r.add(this.createNode(e));var i=new T(t);Ye.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r};Ft.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Ft.prototype.interfaces_=function(){return[qe]};Ft.prototype.getClass=function(){return Ft};Ft.compareDoubles=function(t,e){return t>e?1:t<e?-1:0};ls.IntersectsOp.get=function(){return op};ls.serialVersionUID.get=function(){return-3886435814360241e3};ls.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Ft,ls);var op=function(){},Ti=function(){};Ti.prototype.distance=function(t,e){};Ti.prototype.interfaces_=function(){return[]};Ti.prototype.getClass=function(){return Ti};var Su=function(t){function e(r){r=r||e.DEFAULT_NODE_CAPACITY,t.call(this,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var o=this;V.isTrue(r.length>0);for(var s=new T,a=0;a<r.length;a++)s.addAll(o.createParentBoundablesFromVerticalSlice(r[a],i));return s},e.prototype.createNode=function(r){return new Ma(r)},e.prototype.size=function(){return arguments.length===0?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;t.prototype.insert.call(this,r,i)}else return t.prototype.insert.apply(this,arguments)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),s=new Array(i).fill(null),a=r.iterator(),u=0;u<i;u++){s[u]=new T;for(var l=0;a.hasNext()&&l<o;){var c=a.next();s[u].add(c),l++}}return s},e.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return t.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];t.prototype.query.call(this,i,o)}else if(arguments.length===3){if(q(arguments[2],hr)&&arguments[0]instanceof Object&&arguments[1]instanceof Rt){var s=arguments[0],a=arguments[1],u=arguments[2];t.prototype.query.call(this,s,a,u)}else if(q(arguments[2],Ve)&&arguments[0]instanceof Object&&arguments[1]instanceof Rt){var l=arguments[0],c=arguments[1],p=arguments[2];t.prototype.query.call(this,l,c,p)}}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return t.prototype.createParentBoundables.call(this,r,i)},e.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return t.prototype.remove.call(this,r,i)}else return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return arguments.length===0?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(r,i){V.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),s=new T(r);Ye.sort(s,e.xComparator);var a=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(a,i)},e.prototype.nearestNeighbour=function(){if(arguments.length===1){if(q(arguments[0],Ti)){var r=arguments[0],i=new Ct(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof Ct){var o=arguments[0];return this.nearestNeighbour(o,z.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof e&&q(arguments[1],Ti)){var s=arguments[0],a=arguments[1],u=new Ct(this.getRoot(),s.getRoot(),a);return this.nearestNeighbour(u)}else if(arguments[0]instanceof Ct&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],p=c,h=null,f=new Qn;for(f.add(l);!f.isEmpty()&&p>0;){var g=f.poll(),m=g.getDistance();if(m>=p)break;g.isLeaves()?(p=m,h=g):g.expandToQueue(f,p)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(arguments.length===3){var d=arguments[0],x=arguments[1],v=arguments[2],I=new je(d,x),C=new Ct(this.getRoot(),I,v);return this.nearestNeighbour(C)[0]}},e.prototype.interfaces_=function(){return[Wr,qe]},e.prototype.getClass=function(){return e},e.centreX=function(r){return e.avg(r.getMinX(),r.getMaxX())},e.avg=function(r,i){return(r+i)/2},e.centreY=function(r){return e.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return Ma},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Ii]},compare:function(r,i){return t.compareDoubles(e.centreX(r.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Ii]},compare:function(r,i){return t.compareDoubles(e.centreY(r.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Ft),Ma=function(t){function e(){var n=arguments[0];t.call(this,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new G(i.getBounds()):n.expandToInclude(i.getBounds())}return n},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rt),le=function(){};le.prototype.interfaces_=function(){return[]};le.prototype.getClass=function(){return le};le.relativeSign=function(t,e){return t<e?-1:t>e?1:0};le.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=le.relativeSign(e.x,n.x),i=le.relativeSign(e.y,n.y);switch(t){case 0:return le.compareValue(r,i);case 1:return le.compareValue(i,r);case 2:return le.compareValue(i,-r);case 3:return le.compareValue(-r,i);case 4:return le.compareValue(-r,-i);case 5:return le.compareValue(-i,-r);case 6:return le.compareValue(-i,r);case 7:return le.compareValue(r,-i)}return V.shouldNeverReachHere("invalid octant value"),0};le.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var fr=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new y(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};fr.prototype.getCoordinate=function(){return this.coord};fr.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)};fr.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:le.compare(this._segmentOctant,this.coord,e.coord)};fr.prototype.isEndPoint=function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t};fr.prototype.isInterior=function(){return this._isInterior};fr.prototype.interfaces_=function(){return[Be]};fr.prototype.getClass=function(){return fr};var ae=function(){this._nodeMap=new Kt,this._edge=null;var t=arguments[0];this._edge=t};ae.prototype.getSplitCoordinates=function(){var t=this,e=new Eo;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();t.addEdgeCoordinates(r,i,e),r=i}return e.toCoordinateArray()};ae.prototype.addCollapsedNodes=function(){var t=this,e=new T;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var n=e.iterator();n.hasNext();){var r=n.next().intValue();t.add(t._edge.getCoordinate(r),r)}};ae.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}};ae.prototype.findCollapsesFromExistingVertices=function(t){for(var e=this,n=0;n<this._edge.size()-2;n++){var r=e._edge.getCoordinate(n),i=e._edge.getCoordinate(n+2);r.equals2D(i)&&t.add(new un(n+1))}};ae.prototype.addEdgeCoordinates=function(t,e,n){var r=this,i=this._edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(i);n.add(new y(t.coord),!1);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)n.add(r._edge.getCoordinate(s));o&&n.add(new y(e.coord))};ae.prototype.iterator=function(){return this._nodeMap.values().iterator()};ae.prototype.addSplitEdges=function(t){var e=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=e.createSplitEdge(r,i);t.add(o),r=i}};ae.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,r===1?(n[0]=t.segmentIndex+1,!0):!1};ae.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),s=e.findCollapseIndex(i,o,n);s&&t.add(new un(n[0])),i=o}};ae.prototype.getEdge=function(){return this._edge};ae.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)};ae.prototype.createSplitEdge=function(t,e){var n=this,r=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new y(t.coord);for(var u=t.segmentIndex+1;u<=e.segmentIndex;u++)s[a++]=n._edge.getCoordinate(u);return o&&(s[a]=new y(e.coord)),new Nt(s,this._edge.getData())};ae.prototype.add=function(t,e){var n=new fr(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return r!==null?(V.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};ae.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0),r=n.getCoordinate(0);if(!r.equals2D(e[0]))throw new Wn("bad split edge start point at "+r);var i=t.get(t.size()-1),o=i.getCoordinates(),s=o[o.length-1];if(!s.equals2D(e[e.length-1]))throw new Wn("bad split edge end point at "+s)};ae.prototype.interfaces_=function(){return[]};ae.prototype.getClass=function(){return ae};var Kr=function(){};Kr.prototype.interfaces_=function(){return[]};Kr.prototype.getClass=function(){return Kr};Kr.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new ct("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof y&&arguments[1]instanceof y){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(s===0&&a===0)throw new ct("Cannot compute the octant for two identical points "+i);return Kr.octant(s,a)}};var Pn=function(){};Pn.prototype.getCoordinates=function(){};Pn.prototype.size=function(){};Pn.prototype.getCoordinate=function(t){};Pn.prototype.isClosed=function(){};Pn.prototype.setData=function(t){};Pn.prototype.getData=function(){};Pn.prototype.interfaces_=function(){return[]};Pn.prototype.getClass=function(){return Pn};var co=function(){};co.prototype.addIntersection=function(t,e){};co.prototype.interfaces_=function(){return[Pn]};co.prototype.getClass=function(){return co};var Nt=function(){this._nodeList=new ae(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Nt.prototype.getCoordinates=function(){return this._pts};Nt.prototype.size=function(){return this._pts.length};Nt.prototype.getCoordinate=function(t){return this._pts[t]};Nt.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Nt.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))};Nt.prototype.setData=function(t){this._data=t};Nt.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Kr.octant(t,e)};Nt.prototype.getData=function(){return this._data};Nt.prototype.addIntersection=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],o=new y(n.getIntersection(i));this.addIntersection(o,r)}};Nt.prototype.toString=function(){return $e.toLineString(new vt(this._pts))};Nt.prototype.getNodeList=function(){return this._nodeList};Nt.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}var o=this._nodeList.add(t,n);return o};Nt.prototype.addIntersections=function(t,e,n){for(var r=this,i=0;i<t.getIntersectionNum();i++)r.addIntersection(t,e,n,i)};Nt.prototype.interfaces_=function(){return[co]};Nt.prototype.getClass=function(){return Nt};Nt.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new T;return Nt.getNodedSubstrings(t,e),e}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var k=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new y,this.p1=new y;else if(arguments.length===1){var t=arguments[0];this.p0=new y(t.p0),this.p1=new y(t.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new y(e,n),this.p1=new y(r,i)}},wu={serialVersionUID:{configurable:!0}};k.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};k.prototype.orientationIndex=function(){if(arguments[0]instanceof k){var t=arguments[0],e=A.orientationIndex(this.p0,this.p1,t.p0),n=A.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}else if(arguments[0]instanceof y){var r=arguments[0];return A.orientationIndex(this.p0,this.p1,r)}};k.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])};k.prototype.isVertical=function(){return this.p0.x===this.p1.x};k.prototype.equals=function(t){if(!(t instanceof k))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)};k.prototype.intersection=function(t){var e=new $r;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null};k.prototype.project=function(){if(arguments[0]instanceof y){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new y(t);var e=this.projectionFactor(t),n=new y;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof k){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new k(s,a)}};k.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};k.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};k.prototype.getCoordinate=function(t){return t===0?this.p0:this.p1};k.prototype.distancePerpendicular=function(t){return A.distancePointLinePerpendicular(t,this.p0,this.p1)};k.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};k.prototype.midPoint=function(){return k.midPoint(this.p0,this.p1)};k.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;if(r<=0)return z.NaN;var i=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;return i};k.prototype.closestPoints=function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),r=z.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);i=s.distance(t.p1),i<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);i=a.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return i=u.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=u),n};k.prototype.closestPoint=function(t){var e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);var n=this.p0.distance(t),r=this.p1.distance(t);return n<r?this.p0:this.p1};k.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};k.prototype.getLength=function(){return this.p0.distance(this.p1)};k.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)};k.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t};k.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)};k.prototype.lineIntersection=function(t){try{var e=Ue.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){if(!(n instanceof Vi))throw n}finally{}return null};k.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};k.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(e!==0){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}var l=n-u,c=r+a,p=new y(l,c);return p};k.prototype.setCoordinates=function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}};k.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||z.isNaN(e))&&(e=1),e};k.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};k.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};k.prototype.distance=function(){if(arguments[0]instanceof k){var t=arguments[0];return A.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}else if(arguments[0]instanceof y){var e=arguments[0];return A.distancePointLine(e,this.p0,this.p1)}};k.prototype.pointAlong=function(t){var e=new y;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e};k.prototype.hashCode=function(){var t=z.doubleToLongBits(this.p0.x);t^=z.doubleToLongBits(this.p0.y)*31;var e=Math.trunc(t)^Math.trunc(t>>32),n=z.doubleToLongBits(this.p1.x);n^=z.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return e^r};k.prototype.interfaces_=function(){return[Be,qe]};k.prototype.getClass=function(){return k};k.midPoint=function(t,e){return new y((t.x+e.x)/2,(t.y+e.y)/2)};wu.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(k,wu);var po=function(){this.tempEnv1=new G,this.tempEnv2=new G,this._overlapSeg1=new k,this._overlapSeg2=new k};po.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};po.prototype.interfaces_=function(){return[]};po.prototype.getClass=function(){return po};var _e=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};_e.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]};_e.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e===1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)};_e.prototype.getCoordinates=function(){for(var t=this,e=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)e[n++]=t._pts[r];return e};_e.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)};_e.prototype.setId=function(t){this._id=t};_e.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)};_e.prototype.getEnvelope=function(){if(this._env===null){var t=this._pts[this._start],e=this._pts[this._end];this._env=new G(t,e)}return this._env};_e.prototype.getEndIndex=function(){return this._end};_e.prototype.getStartIndex=function(){return this._start};_e.prototype.getContext=function(){return this._context};_e.prototype.getId=function(){return this._id};_e.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t===1&&i-r===1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),p=Math.trunc((r+i)/2);t<c&&(r<p&&this.computeOverlapsInternal(t,c,n,r,p,o),p<i&&this.computeOverlapsInternal(t,c,n,p,i,o)),c<e&&(r<p&&this.computeOverlapsInternal(c,e,n,r,p,o),p<i&&this.computeOverlapsInternal(c,e,n,p,i,o))};_e.prototype.interfaces_=function(){return[]};_e.prototype.getClass=function(){return _e};var an=function(){};an.prototype.interfaces_=function(){return[]};an.prototype.getClass=function(){return an};an.getChainStartIndices=function(t){var e=0,n=new T;n.add(new un(e));do{var r=an.findChainEnd(t,e);n.add(new un(r)),e=r}while(e<t.length-1);var i=an.toIntArray(n);return i};an.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=rt.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])){var o=rt.quadrant(t[i-1],t[i]);if(o!==r)break}i++}return i-1};an.getChains=function(){if(arguments.length===1){var t=arguments[0];return an.getChains(t,null)}else if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new T,i=an.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new _e(e,i[o],i[o+1],n);r.add(s)}return r}};an.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Mr=function(){};Mr.prototype.computeNodes=function(t){};Mr.prototype.getNodedSubstrings=function(){};Mr.prototype.interfaces_=function(){return[]};Mr.prototype.getClass=function(){return Mr};var ho=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}};ho.prototype.setSegmentIntersector=function(t){this._segInt=t};ho.prototype.interfaces_=function(){return[Mr]};ho.prototype.getClass=function(){return ho};var Hs=function(t){function e(r){r?t.call(this,r):t.call(this),this._monoChains=new T,this._index=new Su,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Nt.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(r){for(var i=this,o=an.getChains(r.getCoordinates(),r),s=o.iterator();s.hasNext();){var a=s.next();a.setId(i._idCounter++),i._index.insert(a.getEnvelope(),a),i._monoChains.add(a)}},e.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var o=r.iterator();o.hasNext();)i.add(o.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var r=this,i=new Da(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var s=o.next(),a=r._index.query(s.getEnvelope()),u=a.iterator();u.hasNext();){var l=u.next();if(l.getId()>s.getId()&&(s.computeOverlaps(l,i),r._nOverlaps++),r._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Da},Object.defineProperties(e,n),e}(ho),Da=function(t){function e(){t.call(this),this._si=null;var n=arguments[0];this._si=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=n.getContext(),a=i.getContext();this._si.processIntersections(s,r,a,o)}else return t.prototype.overlap.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(po),Q=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setQuadrantSegments(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},nr={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Q.prototype.getEndCapStyle=function(){return this._endCapStyle};Q.prototype.isSingleSided=function(){return this._isSingleSided};Q.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=Q.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Q.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Q.JOIN_ROUND&&(this._quadrantSegments=Q.DEFAULT_QUADRANT_SEGMENTS)};Q.prototype.getJoinStyle=function(){return this._joinStyle};Q.prototype.setJoinStyle=function(t){this._joinStyle=t};Q.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t};Q.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Q.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Q.prototype.setEndCapStyle=function(t){this._endCapStyle=t};Q.prototype.getMitreLimit=function(){return this._mitreLimit};Q.prototype.setMitreLimit=function(t){this._mitreLimit=t};Q.prototype.setSingleSided=function(t){this._isSingleSided=t};Q.prototype.interfaces_=function(){return[]};Q.prototype.getClass=function(){return Q};Q.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)};nr.CAP_ROUND.get=function(){return 1};nr.CAP_FLAT.get=function(){return 2};nr.CAP_SQUARE.get=function(){return 3};nr.JOIN_ROUND.get=function(){return 1};nr.JOIN_MITRE.get=function(){return 2};nr.JOIN_BEVEL.get=function(){return 3};nr.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};nr.DEFAULT_MITRE_LIMIT.get=function(){return 5};nr.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Q,nr);var yt=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=A.COUNTERCLOCKWISE,this._inputLine=t||null},No={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};yt.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!this.isConcave(i,o,s)||!this.isShallow(i,o,s,r)?!1:this.isShallowSampled(i,o,t,n,r)};yt.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=yt.DELETE,o=!0,i=!0),o?e=r:e=n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i};yt.prototype.isShallowConcavity=function(t,e,n,r){var i=A.computeOrientation(t,e,n),o=i===this._angleOrientation;if(!o)return!1;var s=A.distancePointLine(e,t,n);return s<r};yt.prototype.isShallowSampled=function(t,e,n,r,i){var o=this,s=Math.trunc((r-n)/yt.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=n;a<r;a+=s)if(!o.isShallow(t,e,o._inputLine[a],i))return!1;return!0};yt.prototype.isConcave=function(t,e,n){var r=A.computeOrientation(t,e,n),i=r===this._angleOrientation;return i};yt.prototype.simplify=function(t){var e=this;this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=A.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=e.deleteShallowConcavities();while(n);return this.collapseLine()};yt.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===yt.DELETE;)e++;return e};yt.prototype.isShallow=function(t,e,n,r){var i=A.distancePointLine(e,t,n);return i<r};yt.prototype.collapseLine=function(){for(var t=this,e=new Eo,n=0;n<this._inputLine.length;n++)t._isDeleted[n]!==yt.DELETE&&e.add(t._inputLine[n]);return e.toCoordinateArray()};yt.prototype.interfaces_=function(){return[]};yt.prototype.getClass=function(){return yt};yt.simplify=function(t,e){var n=new yt(t);return n.simplify(e)};No.INIT.get=function(){return 0};No.DELETE.get=function(){return 1};No.KEEP.get=function(){return 1};No.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(yt,No);var Le=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new T},Lu={COORDINATE_ARRAY_TYPE:{configurable:!0}};Le.prototype.getCoordinates=function(){var t=this._ptList.toArray(Le.COORDINATE_ARRAY_TYPE);return t};Le.prototype.setPrecisionModel=function(t){this._precisionModel=t};Le.prototype.addPt=function(t){var e=new y(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)};Le.prototype.revere=function(){};Le.prototype.addPts=function(t,e){var n=this;if(e)for(var r=0;r<t.length;r++)n.addPt(t[r]);else for(var i=t.length-1;i>=0;i--)n.addPt(t[i])};Le.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1),n=t.distance(e);return n<this._minimimVertexDistance};Le.prototype.toString=function(){var t=new X,e=t.createLineString(this.getCoordinates());return e.toString()};Le.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new y(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)};Le.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t};Le.prototype.interfaces_=function(){return[]};Le.prototype.getClass=function(){return Le};Lu.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(Le,Lu);var W=function(){},ci={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};W.prototype.interfaces_=function(){return[]};W.prototype.getClass=function(){return W};W.toDegrees=function(t){return t*180/Math.PI};W.normalize=function(t){for(;t>Math.PI;)t-=W.PI_TIMES_2;for(;t<=-Math.PI;)t+=W.PI_TIMES_2;return t};W.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}};W.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=r*o+i*s;return a>0};W.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=r*o+i*s;return a<0};W.interiorAngle=function(t,e,n){var r=W.angle(e,t),i=W.angle(e,n);return Math.abs(i-r)};W.normalizePositive=function(t){if(t<0){for(;t<0;)t+=W.PI_TIMES_2;t>=W.PI_TIMES_2&&(t=0)}else{for(;t>=W.PI_TIMES_2;)t-=W.PI_TIMES_2;t<0&&(t=0)}return t};W.angleBetween=function(t,e,n){var r=W.angle(e,t),i=W.angle(e,n);return W.diff(r,i)};W.diff=function(t,e){var n=null;return t<e?n=e-t:n=t-e,n>Math.PI&&(n=2*Math.PI-n),n};W.toRadians=function(t){return t*Math.PI/180};W.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?W.COUNTERCLOCKWISE:n<0?W.CLOCKWISE:W.NONE};W.angleBetweenOriented=function(t,e,n){var r=W.angle(e,t),i=W.angle(e,n),o=i-r;return o<=-Math.PI?o+W.PI_TIMES_2:o>Math.PI?o-W.PI_TIMES_2:o};ci.PI_TIMES_2.get=function(){return 2*Math.PI};ci.PI_OVER_2.get=function(){return Math.PI/2};ci.PI_OVER_4.get=function(){return Math.PI/4};ci.COUNTERCLOCKWISE.get=function(){return A.COUNTERCLOCKWISE};ci.CLOCKWISE.get=function(){return A.CLOCKWISE};ci.NONE.get=function(){return A.COLLINEAR};Object.defineProperties(W,ci);var lt=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new k,this._seg1=new k,this._offset0=new k,this._offset1=new k,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new $r,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Q.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},bo={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};lt.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=A.computeOrientation(this._s0,this._s1,this._s2),r=n===A.CLOCKWISE&&this._side===w.LEFT||n===A.COUNTERCLOCKWISE&&this._side===w.RIGHT;n===0?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)};lt.prototype.addLineEndCap=function(t,e){var n=new k(t,e),r=new k;this.computeOffsetSegment(n,w.LEFT,this._distance,r);var i=new k;this.computeOffsetSegment(n,w.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Q.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,A.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Q.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Q.CAP_SQUARE:var u=new y;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new y(r.p1.x+u.x,r.p1.y+u.y),c=new y(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c);break}};lt.prototype.getCoordinates=function(){var t=this._segList.getCoordinates();return t};lt.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Ue.intersection(e.p0,e.p1,n.p0,n.p1);var s=r<=0?1:o.distance(t)/Math.abs(r);s>this._bufParams.getMitreLimit()&&(i=!1)}catch(a){if(a instanceof Vi)o=new y(0,0),i=!1;else throw a}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())};lt.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===A.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,i),this._segList.addPt(n)};lt.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*lt.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Q.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Q.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))};lt.prototype.createSquare=function(t){this._segList.addPt(new y(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new y(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new y(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new y(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()};lt.prototype.addSegments=function(t,e){this._segList.addPts(t,e)};lt.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};lt.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};lt.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};lt.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=W.angle(i,this._seg0.p0),s=W.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),a=s/2,u=W.normalize(o+a),l=W.normalize(u+Math.PI),c=r*n,p=c*Math.abs(Math.sin(a)),h=n-p,f=i.x+c*Math.cos(l),g=i.y+c*Math.sin(l),m=new y(f,g),d=new k(i,m),x=d.pointAlongOffset(1,h),v=d.pointAlongOffset(1,-h);this._side===w.LEFT?(this._segList.addPt(x),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(x))};lt.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===w.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u};lt.prototype.addFilletArc=function(t,e,n,r,i){var o=this,s=r===A.CLOCKWISE?-1:1,a=Math.abs(e-n),u=Math.trunc(a/this._filletAngleQuantum+.5);if(u<1)return null;for(var l=0,c=a/u,p=l,h=new y;p<a;){var f=e+s*p;h.x=t.x+i*Math.cos(f),h.y=t.y+i*Math.sin(f),o._segList.addPt(h),p+=c}};lt.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*lt.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new y((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new y((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};lt.prototype.createCircle=function(t){var e=new y(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};lt.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)};lt.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Le,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*lt.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};lt.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var e=this._li.getIntersectionNum();e>=2&&(this._bufParams.getJoinStyle()===Q.JOIN_BEVEL||this._bufParams.getJoinStyle()===Q.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,A.CLOCKWISE,this._distance))};lt.prototype.closeRing=function(){this._segList.closeRing()};lt.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};lt.prototype.interfaces_=function(){return[]};lt.prototype.getClass=function(){return lt};bo.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};bo.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};bo.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};bo.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(lt,bo);var he=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};he.prototype.getOffsetCurve=function(t,e){if(this._distance=e,e===0)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&j.reverse(o),o};he.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=yt.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],w.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=yt.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],w.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()};he.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===w.RIGHT&&(r=-r);var i=yt.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=s!==1;n.addNextSegment(i[s],a)}n.closeRing()};he.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=yt.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],w.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=yt.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],w.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()};he.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Q.CAP_ROUND:e.createCircle(t);break;case Q.CAP_SQUARE:e.createSquare(t);break}};he.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||e===0)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);var o=r.getCoordinates();return o};he.prototype.getBufferParameters=function(){return this._bufParams};he.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()};he.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return he.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()};he.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=yt.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],w.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=yt.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],w.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()};he.prototype.getSegGen=function(t){return new lt(this._precisionModel,this._bufParams,t)};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new y(t[n]);return e};var Zr=function(){this._subgraphs=null,this._seg=new k,this._cga=new A;var t=arguments[0];this._subgraphs=t},Pu={DepthSegment:{configurable:!0}};Zr.prototype.findStabbedSegments=function(){var t=this;if(arguments.length===1){for(var e=arguments[0],n=new T,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(q(arguments[2],Ve)&&arguments[0]instanceof y&&arguments[1]instanceof Ms)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var p=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(p<s.x)&&!t._seg.isHorizontal()&&!(s.y<t._seg.p0.y||s.y>t._seg.p1.y)&&A.computeOrientation(t._seg.p0,t._seg.p1,s)!==A.RIGHT){var h=a.getDepth(w.LEFT);t._seg.p0.equals(l[c])||(h=a.getDepth(w.RIGHT));var f=new Dr(t._seg,h);u.add(f)}}else if(q(arguments[2],Ve)&&arguments[0]instanceof y&&q(arguments[1],Ve))for(var g=arguments[0],m=arguments[1],d=arguments[2],x=m.iterator();x.hasNext();){var v=x.next();v.isForward()&&t.findStabbedSegments(g,v,d)}}};Zr.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);if(e.size()===0)return 0;var n=Ye.min(e);return n._leftDepth};Zr.prototype.interfaces_=function(){return[]};Zr.prototype.getClass=function(){return Zr};Pu.DepthSegment.get=function(){return Dr};Object.defineProperties(Zr,Pu);var Dr=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new k(t),this._leftDepth=e};Dr.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return n!==0||(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(e._upwardSeg)};Dr.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return n!==0?n:t.p1.compareTo(e.p1)};Dr.prototype.toString=function(){return this._upwardSeg.toString()};Dr.prototype.interfaces_=function(){return[Be]};Dr.prototype.getClass=function(){return Dr};var tt=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};tt.prototype.area=function(){return tt.area(this.p0,this.p1,this.p2)};tt.prototype.signedArea=function(){return tt.signedArea(this.p0,this.p1,this.p2)};tt.prototype.interpolateZ=function(t){if(t===null)throw new ct("Supplied point is null.");return tt.interpolateZ(t,this.p0,this.p1,this.p2)};tt.prototype.longestSideLength=function(){return tt.longestSideLength(this.p0,this.p1,this.p2)};tt.prototype.isAcute=function(){return tt.isAcute(this.p0,this.p1,this.p2)};tt.prototype.circumcentre=function(){return tt.circumcentre(this.p0,this.p1,this.p2)};tt.prototype.area3D=function(){return tt.area3D(this.p0,this.p1,this.p2)};tt.prototype.centroid=function(){return tt.centroid(this.p0,this.p1,this.p2)};tt.prototype.inCentre=function(){return tt.inCentre(this.p0,this.p1,this.p2)};tt.prototype.interfaces_=function(){return[]};tt.prototype.getClass=function(){return tt};tt.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)};tt.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2};tt.det=function(t,e,n,r){return t*r-e*n};tt.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,p=t.x-i,h=t.y-o,f=(l*p-a*h)/c,g=(-u*p+s*h)/c,m=e.z+f*(n.z-e.z)+g*(r.z-e.z);return m};tt.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s};tt.isAcute=function(t,e,n){return!(!W.isAcute(t,e,n)||!W.isAcute(e,n,t)||!W.isAcute(n,t,e))};tt.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*tt.det(o,s,a,u),c=tt.det(s,o*o+s*s,u,a*a+u*u),p=tt.det(o,o*o+s*s,a,a*a+u*u),h=r-c/l,f=i+p/l;return new y(h,f)};tt.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Ue(t.x+n/2,t.y+r/2,1),o=new Ue(t.x-r+n/2,t.y+n+r/2,1);return new Ue(i,o)};tt.angleBisector=function(t,e,n){var r=e.distance(t),i=e.distance(n),o=r/(r+i),s=n.x-t.x,a=n.y-t.y,u=new y(t.x+o*s,t.y+o*a);return u};tt.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=i*u-o*a,c=o*s-r*u,p=r*a-i*s,h=l*l+c*c+p*p,f=Math.sqrt(h)/2;return f};tt.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new y(r,i)};tt.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new y(a,u)};var ke=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new T;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};ke.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,_.EXTERIOR,_.INTERIOR)};ke.prototype.addPolygon=function(t){var e=this,n=this._distance,r=w.LEFT;this._distance<0&&(n=-this._distance,r=w.RIGHT);var i=t.getExteriorRing(),o=j.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,_.EXTERIOR,_.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=j.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,w.opposite(r),_.INTERIOR,_.EXTERIOR)}};ke.prototype.isTriangleErodedCompletely=function(t,e){var n=new tt(t[0],t[1],t[2]),r=n.inCentre(),i=A.distancePointLine(r,n.p0,n.p1);return i<Math.abs(e)};ke.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=j.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,_.EXTERIOR,_.INTERIOR)};ke.prototype.addCurve=function(t,e,n){if(t===null||t.length<2)return null;var r=new Nt(t,new et(0,_.BOUNDARY,e,n));this._curveList.add(r)};ke.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};ke.prototype.addPolygonRing=function(t,e,n,r,i){if(e===0&&t.length<wn.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=wn.MINIMUM_VALID_SIZE&&A.isCCW(t)&&(o=i,s=r,n=w.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)};ke.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Tt?this.addPolygon(t):t instanceof dt?this.addLineString(t):t instanceof ye?this.addPoint(t):t instanceof Pi?this.addCollection(t):t instanceof Tr?this.addCollection(t):t instanceof bn?this.addCollection(t):t instanceof oe&&this.addCollection(t)};ke.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(n.length===4)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i};ke.prototype.addCollection=function(t){for(var e=this,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);e.add(r)}};ke.prototype.interfaces_=function(){return[]};ke.prototype.getClass=function(){return ke};var Mi=function(){};Mi.prototype.locate=function(t){};Mi.prototype.interfaces_=function(){return[]};Mi.prototype.getClass=function(){return Mi};var Cn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Cn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Cn.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Xi;var t=this._parent.getGeometryN(this._index++);return t instanceof oe?(this._subcollectionIterator=new Cn(t),this._subcollectionIterator.next()):t};Cn.prototype.remove=function(){throw new Error(this.getClass().getName())};Cn.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};Cn.prototype.interfaces_=function(){return[$i]};Cn.prototype.getClass=function(){return Cn};Cn.isAtomic=function(t){return!(t instanceof oe)};var be=function(){this._geom=null;var t=arguments[0];this._geom=t};be.prototype.locate=function(t){return be.locate(t,this._geom)};be.prototype.interfaces_=function(){return[Mi]};be.prototype.getClass=function(){return be};be.isPointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?A.isPointInRing(t,e.getCoordinates()):!1};be.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!be.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(be.isPointInRing(t,i))return!1}return!0};be.containsPoint=function(t,e){if(e instanceof Tt)return be.containsPointInPolygon(t,e);if(e instanceof oe)for(var n=new Cn(e);n.hasNext();){var r=n.next();if(r!==e&&be.containsPoint(t,r))return!0}return!1};be.locate=function(t,e){return e.isEmpty()?_.EXTERIOR:be.containsPoint(t,e)?_.INTERIOR:_.EXTERIOR};var Qt=function(){this._edgeMap=new Kt,this._edgeList=null,this._ptInAreaLocation=[_.NONE,_.NONE]};Qt.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return e===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};Qt.prototype.propagateSideLabels=function(t){for(var e=_.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(t)&&i.getLocation(t,w.LEFT)!==_.NONE&&(e=i.getLocation(t,w.LEFT))}if(e===_.NONE)return null;for(var o=e,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();if(u.getLocation(t,w.ON)===_.NONE&&u.setLocation(t,w.ON,o),u.isArea(t)){var l=u.getLocation(t,w.LEFT),c=u.getLocation(t,w.RIGHT);if(c!==_.NONE){if(c!==o)throw new Zn("side location conflict",a.getCoordinate());l===_.NONE&&V.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),o=l}else V.isTrue(u.getLocation(t,w.LEFT)===_.NONE,"found single null side"),u.setLocation(t,w.RIGHT,o),u.setLocation(t,w.LEFT,o)}}};Qt.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()};Qt.prototype.print=function(t){$t.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}};Qt.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};Qt.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel(),i=r.getLocation(t,w.LEFT);V.isTrue(i!==_.NONE,"Found unlabelled area edge");for(var o=i,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();V.isTrue(u.isArea(t),"Found non-area edge");var l=u.getLocation(t,w.LEFT),c=u.getLocation(t,w.RIGHT);if(l===c||c!==o)return!1;o=l}return!0};Qt.prototype.findIndex=function(t){var e=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=e._edgeList.get(n);if(r===t)return n}return-1};Qt.prototype.iterator=function(){return this.getEdges().iterator()};Qt.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new T(this._edgeMap.values())),this._edgeList};Qt.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===_.NONE&&(this._ptInAreaLocation[t]=be.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]};Qt.prototype.toString=function(){var t=new vn;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(`
`)}return t.toString()};Qt.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}};Qt.prototype.computeLabelling=function(t){var e=this;this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),s=0;s<2;s++)o.isLine(s)&&o.getLocation(s)===_.BOUNDARY&&(n[s]=!0);for(var a=this.iterator();a.hasNext();)for(var u=a.next(),l=u.getLabel(),c=0;c<2;c++)if(l.isAnyNull(c)){var p=_.NONE;if(n[c])p=_.EXTERIOR;else{var h=u.getCoordinate();p=e.getLocation(c,h,t)}l.setAllLocationsIfNull(c,p)}};Qt.prototype.getDegree=function(){return this._edgeMap.size()};Qt.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null};Qt.prototype.interfaces_=function(){return[]};Qt.prototype.getClass=function(){return Qt};var sp=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var a=n._resultAreaEdgeList.get(s),u=a.getSym();if(a.getLabel().isArea())switch(r===null&&a.isInResult()&&(r=a),o){case n._SCANNING_FOR_INCOMING:if(!u.isInResult())continue;i=u,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!a.isInResult())continue;i.setNext(a),o=n._SCANNING_FOR_INCOMING;break}}if(o===this._LINKING_TO_OUTGOING){if(r===null)throw new Zn("no outgoing dirEdge found",this.getCoordinate());V.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},e.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},e.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var o=n.get(r-1),s=i.getQuadrant(),a=o.getQuadrant();return rt.isNorthern(s)&&rt.isNorthern(a)?i:!rt.isNorthern(s)&&!rt.isNorthern(a)?o:i.getDy()!==0?i:o.getDy()!==0?o:(V.shouldNeverReachHere("found two horizontal edges incident on node"),null)},e.prototype.print=function(n){$t.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},e.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new T;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.setAllLocationsIfNull(0,n.getLocation(0)),o.setAllLocationsIfNull(1,n.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,o=this._edgeList.size()-1;o>=0;o--){var s=n._edgeList.get(o),a=s.getSym();i===null&&(i=a),r!==null&&a.setNext(r),r=s}i.setNext(r)},e.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(w.LEFT),s=r.getDepth(w.RIGHT),a=this.computeDepths(i+1,this._edgeList.size(),o),u=this.computeDepths(0,i,a);if(u!==s)throw new Zn("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var l=arguments[0],c=arguments[1],p=arguments[2],h=p,f=l;f<c;f++){var g=n._edgeList.get(f);g.setEdgeDepths(w.RIGHT,h),h=g.getDepth(w.LEFT)}return h}},e.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,s=this._SCANNING_FOR_INCOMING,a=this._resultAreaEdgeList.size()-1;a>=0;a--){var u=r._resultAreaEdgeList.get(a),l=u.getSym();switch(i===null&&u.getEdgeRing()===n&&(i=u),s){case r._SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==n)continue;o=l,s=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(u.getEdgeRing()!==n)continue;o.setNextMin(u),s=r._SCANNING_FOR_INCOMING;break}}s===this._LINKING_TO_OUTGOING&&(V.isTrue(i!==null,"found null for first outgoing dirEdge"),V.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},e.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var o=arguments[0],s=0,a=this.iterator();a.hasNext();){var u=a.next();u.getEdgeRing()===o&&s++}return s}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var n=_.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=_.INTERIOR;break}if(o.isInResult()){n=_.EXTERIOR;break}}}if(n===_.NONE)return null;for(var s=n,a=this.iterator();a.hasNext();){var u=a.next(),l=u.getSym();u.isLineEdge()?u.getEdge().setCovered(s===_.INTERIOR):(u.isInResult()&&(s=_.EXTERIOR),l.isInResult()&&(s=_.INTERIOR))}},e.prototype.computeLabelling=function(n){var r=this;t.prototype.computeLabelling.call(this,n),this._label=new et(_.NONE);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),s=o.getEdge(),a=s.getLabel(),u=0;u<2;u++){var l=a.getLocation(u);(l===_.INTERIOR||l===_.BOUNDARY)&&r._label.setLocation(u,_.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qt),Ou=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(n){return new us(n,new sp)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oi),gr=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};gr.prototype.compareTo=function(t){var e=t,n=gr.compareOriented(this._pts,this._orientation,e._pts,e._orientation);return n};gr.prototype.interfaces_=function(){return[Be]};gr.prototype.getClass=function(){return gr};gr.orientation=function(t){return j.increasingDirection(t)===1};gr.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(c!==0)return c;u+=i,l+=o;var p=u===s,h=l===a;if(p&&!h)return-1;if(!p&&h)return 1;if(p&&h)return 0}};var He=function(){this._edges=new T,this._ocaMap=new Kt};He.prototype.print=function(t){var e=this;t.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=e._edges.get(n);n>0&&t.print(","),t.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&t.print(","),t.print(i[o].x+" "+i[o].y);t.println(")")}t.print(")  ")};He.prototype.addAll=function(t){for(var e=this,n=t.iterator();n.hasNext();)e.add(n.next())};He.prototype.findEdgeIndex=function(t){for(var e=this,n=0;n<this._edges.size();n++)if(e._edges.get(n).equals(t))return n;return-1};He.prototype.iterator=function(){return this._edges.iterator()};He.prototype.getEdges=function(){return this._edges};He.prototype.get=function(t){return this._edges.get(t)};He.prototype.findEqualEdge=function(t){var e=new gr(t.getCoordinates()),n=this._ocaMap.get(e);return n};He.prototype.add=function(t){this._edges.add(t);var e=new gr(t.getCoordinates());this._ocaMap.put(e,t)};He.prototype.interfaces_=function(){return[]};He.prototype.getClass=function(){return He};var Ar=function(){};Ar.prototype.processIntersections=function(t,e,n,r){};Ar.prototype.isDone=function(){};Ar.prototype.interfaces_=function(){return[]};Ar.prototype.getClass=function(){return Ar};var Pe=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Pe.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&this._li.getIntersectionNum()===1){if(Pe.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(e===0&&r===i||r===0&&e===i)return!0}}return!1};Pe.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Pe.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Pe.prototype.getLineIntersector=function(){return this._li};Pe.prototype.hasProperIntersection=function(){return this._hasProper};Pe.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Pe.prototype.hasIntersection=function(){return this._hasIntersection};Pe.prototype.isDone=function(){return!1};Pe.prototype.hasInteriorIntersection=function(){return this._hasInterior};Pe.prototype.interfaces_=function(){return[Ar]};Pe.prototype.getClass=function(){return Pe};Pe.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1};var gn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new y(t),this.segmentIndex=e,this.dist=n};gn.prototype.getSegmentIndex=function(){return this.segmentIndex};gn.prototype.getCoordinate=function(){return this.coord};gn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)};gn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)};gn.prototype.isEndPoint=function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t};gn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};gn.prototype.getDistance=function(){return this.dist};gn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0};gn.prototype.interfaces_=function(){return[Be]};gn.prototype.getClass=function(){return gn};var On=function(){this._nodeMap=new Kt,this.edge=null;var t=arguments[0];this.edge=t};On.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}};On.prototype.iterator=function(){return this._nodeMap.values().iterator()};On.prototype.addSplitEdges=function(t){var e=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=e.createSplitEdge(r,i);t.add(o),r=i}};On.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)};On.prototype.createSplitEdge=function(t,e){var n=this,r=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],o=e.dist>0||!e.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new y(t.coord);for(var u=t.segmentIndex+1;u<=e.segmentIndex;u++)s[a++]=n.edge.pts[u];return o&&(s[a]=e.coord),new Vo(s,new et(this.edge._label))};On.prototype.add=function(t,e,n){var r=new gn(t,e,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};On.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1};On.prototype.interfaces_=function(){return[]};On.prototype.getClass=function(){return On};var Fr=function(){};Fr.prototype.getChainStartIndices=function(t){var e=this,n=0,r=new T;r.add(new un(n));do{var i=e.findChainEnd(t,n);r.add(new un(i)),n=i}while(n<t.length-1);var o=Fr.toIntArray(r);return o};Fr.prototype.findChainEnd=function(t,e){for(var n=rt.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){var i=rt.quadrant(t[r-1],t[r]);if(i!==n)break;r++}return r-1};Fr.prototype.interfaces_=function(){return[]};Fr.prototype.getClass=function(){return Fr};Fr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Jn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new G,this.env2=new G;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Fr;this.startIndex=e.getChainStartIndices(this.pts)};Jn.prototype.getCoordinates=function(){return this.pts};Jn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n};Jn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n};Jn.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],p=this.pts[o],h=s.pts[a],f=s.pts[u];if(o-i===1&&u-a===1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,p),this.env2.init(h,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((i+o)/2),m=Math.trunc((a+u)/2);i<g&&(a<m&&this.computeIntersectsForChain(i,g,s,a,m,l),m<u&&this.computeIntersectsForChain(i,g,s,m,u,l)),g<o&&(a<m&&this.computeIntersectsForChain(g,o,s,a,m,l),m<u&&this.computeIntersectsForChain(g,o,s,m,u,l))}};Jn.prototype.getStartIndexes=function(){return this.startIndex};Jn.prototype.computeIntersects=function(t,e){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<t.startIndex.length-1;i++)n.computeIntersectsForChain(r,t,i,e)};Jn.prototype.interfaces_=function(){return[]};Jn.prototype.getClass=function(){return Jn};var Vt=function t(){var e=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)e._depth[n][r]=t.NULL_VALUE},Ru={NULL_VALUE:{configurable:!0}};Vt.prototype.getDepth=function(t,e){return this._depth[t][e]};Vt.prototype.setDepth=function(t,e,n){this._depth[t][e]=n};Vt.prototype.isNull=function(){var t=this;if(arguments.length===0){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==Vt.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===Vt.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._depth[i][o]===Vt.NULL_VALUE}};Vt.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}};Vt.prototype.getDelta=function(t){return this._depth[t][w.RIGHT]-this._depth[t][w.LEFT]};Vt.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?_.EXTERIOR:_.INTERIOR};Vt.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Vt.prototype.add=function(){var t=this;if(arguments.length===1)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);(i===_.EXTERIOR||i===_.INTERIOR)&&(t.isNull(n,r)?t._depth[n][r]=Vt.depthAtLocation(i):t._depth[n][r]+=Vt.depthAtLocation(i))}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];a===_.INTERIOR&&this._depth[o][s]++}};Vt.prototype.interfaces_=function(){return[]};Vt.prototype.getClass=function(){return Vt};Vt.depthAtLocation=function(t){return t===_.EXTERIOR?0:t===_.INTERIOR?1:Vt.NULL_VALUE};Ru.NULL_VALUE.get=function(){return-1};Object.defineProperties(Vt,Ru);var Vo=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new On(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Vt,this._depthDelta=0,arguments.length===1){var n=arguments[0];e.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new e(n,et.toLineLabel(this._label));return r},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(n){this._isIsolated=n},e.prototype.setName=function(n){this._name=n},e.prototype.equals=function(n){var r=this;if(!(n instanceof e))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var o=!0,s=!0,a=this.pts.length,u=0;u<this.pts.length;u++)if(r.pts[u].equals2D(i.pts[u])||(o=!1),r.pts[u].equals2D(i.pts[--a])||(s=!1),!o&&!s)return!1;return!0},e.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},e.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(n){e.updateIM(this._label,n)},e.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},e.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Jn(this)),this._mce},e.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new G;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},e.prototype.addIntersection=function(n,r,i,o){var s=new y(n.getIntersection(o)),a=r,u=n.getEdgeDistance(i,o),l=a+1;if(l<this.pts.length){var c=this.pts[l];s.equals2D(c)&&(a=l,u=0)}this.eiList.add(s,a,u)},e.prototype.toString=function(){var n=this,r=new vn;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},e.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},e.prototype.setDepthDelta=function(n){this._depthDelta=n},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(n,r,i){for(var o=this,s=0;s<n.getIntersectionNum();s++)o.addIntersection(n,r,i,s)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,w.ON),n.getLocation(1,w.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,w.LEFT),n.getLocation(1,w.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,w.RIGHT),n.getLocation(1,w.RIGHT),2))}else return t.prototype.updateIM.apply(this,arguments)},e}(we),ie=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new He,this._bufParams=t||null};ie.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t};ie.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new et(t.getLabel()),r.flip()),n.merge(r);var i=ie.depthDelta(r),o=e.getDepthDelta(),s=o+i;e.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(ie.depthDelta(t.getLabel()))};ie.prototype.buildSubgraphs=function(t,e){for(var n=new T,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Zr(n),a=s.getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}};ie.prototype.createSubgraphs=function(t){for(var e=new T,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new se;i.create(r),e.add(i)}}return Ye.sort(e,Ye.reverseOrder()),e};ie.prototype.createEmptyResultGeometry=function(){var t=this._geomFact.createPolygon();return t};ie.prototype.getNoder=function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new Hs,n=new $r;return n.setPrecisionModel(t),e.setSegmentIntersector(new Pe(n)),e};ie.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new he(n,this._bufParams),i=new ke(t,e,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new ft(new Ou),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),a=new me(this._geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this._geomFact.buildGeometry(u);return l};ie.prototype.computeNodedEdges=function(t,e){var n=this,r=this.getNoder(e);r.computeNodes(t);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var s=o.next(),a=s.getCoordinates();if(!(a.length===2&&a[0].equals2D(a[1]))){var u=s.getData(),l=new Vo(s.getCoordinates(),new et(u));n.insertUniqueEdge(l)}}};ie.prototype.setNoder=function(t){this._workingNoder=t};ie.prototype.interfaces_=function(){return[]};ie.prototype.getClass=function(){return ie};ie.depthDelta=function(t){var e=t.getLocation(0,w.LEFT),n=t.getLocation(0,w.RIGHT);return e===_.INTERIOR&&n===_.EXTERIOR?1:e===_.EXTERIOR&&n===_.INTERIOR?-1:0};ie.convertSegStrings=function(t){for(var e=new X,n=new T;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var dr=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};dr.prototype.rescale=function(){var t=this;if(q(arguments[0],Lt))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;i.length===2&&i[0].equals2D(i[1])&&$t.out.println(i)}};dr.prototype.scale=function(){var t=this;if(q(arguments[0],Lt)){for(var e=arguments[0],n=new T,r=e.iterator();r.hasNext();){var i=r.next();n.add(new Nt(t.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new y(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=j.removeRepeatedPoints(s);return u}};dr.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};dr.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t};dr.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)};dr.prototype.interfaces_=function(){return[Mr]};dr.prototype.getClass=function(){return dr};var dn=function(){this._li=new $r,this._segStrings=null;var t=arguments[0];this._segStrings=t},Tu={fact:{configurable:!0}};dn.prototype.checkEndPtVertexIntersections=function(){var t=this;if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new Wn("found endpt/interior pt intersection at index "+l+" :pt "+i)}};dn.prototype.checkInteriorIntersections=function(){var t=this;if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(o,l,s,c);else if(arguments.length===4){var p=arguments[0],h=arguments[1],f=arguments[2],g=arguments[3];if(p===f&&h===g)return null;var m=p.getCoordinates()[h],d=p.getCoordinates()[h+1],x=f.getCoordinates()[g],v=f.getCoordinates()[g+1];if(this._li.computeIntersection(m,d,x,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,m,d)||this.hasInteriorIntersection(this._li,x,v)))throw new Wn("found non-noded intersection at "+m+"-"+d+" and "+x+"-"+v)}};dn.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};dn.prototype.checkCollapses=function(){var t=this;if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])};dn.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!(i.equals(e)||i.equals(n)))return!0}return!1};dn.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Wn("found non-noded collapse at "+dn.fact.createLineString([t,e,n]))};dn.prototype.interfaces_=function(){return[]};dn.prototype.getClass=function(){return dn};Tu.fact.get=function(){return new X};Object.defineProperties(dn,Tu);var fe=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new ct("Scale factor must be non-zero");e!==1&&(this._pt=new y(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new y,this._p1Scaled=new y),this.initCorners(this._pt)},Mu={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};fe.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return V.isTrue(!(s&&a),"Found bad envelope test"),a};fe.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new y(this._maxx,this._maxy),this._corner[1]=new y(this._minx,this._maxy),this._corner[2]=new y(this._minx,this._miny),this._corner[3]=new y(this._maxx,this._miny)};fe.prototype.intersects=function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};fe.prototype.scale=function(t){return Math.round(t*this._scaleFactor)};fe.prototype.getCoordinate=function(){return this._originalPt};fe.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)};fe.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var t=fe.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new G(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv};fe.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))};fe.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||t.equals(this._pt)||e.equals(this._pt))};fe.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return this.intersects(n,r)?(t.addIntersection(this.getCoordinate(),e),!0):!1};fe.prototype.interfaces_=function(){return[]};fe.prototype.getClass=function(){return fe};Mu.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(fe,Mu);var fo=function(){this.tempEnv1=new G,this.selectedSegment=new k};fo.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}};fo.prototype.interfaces_=function(){return[]};fo.prototype.getClass=function(){return fo};var Di=function(){this._index=null;var t=arguments[0];this._index=t},Du={HotPixelSnapAction:{configurable:!0}};Di.prototype.snap=function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new Au(e,n,r);return this._index.query(i,{interfaces_:function(){return[hr]},visitItem:function(s){var a=s;a.select(i,o)}}),o.isNodeAdded()}};Di.prototype.interfaces_=function(){return[]};Di.prototype.getClass=function(){return Di};Du.HotPixelSnapAction.get=function(){return Au};Object.defineProperties(Di,Du);var Au=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return t.prototype.select.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fo),Qr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new T};Qr.prototype.processIntersections=function(t,e,n,r){var i=this;if(t===n&&e===r)return null;var o=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)i._interiorIntersections.add(i._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}};Qr.prototype.isDone=function(){return!1};Qr.prototype.getInteriorIntersections=function(){return this._interiorIntersections};Qr.prototype.interfaces_=function(){return[Ar]};Qr.prototype.getClass=function(){return Qr};var Rn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new $r,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Rn.prototype.checkCorrectness=function(t){var e=Nt.getNodedSubstrings(t),n=new dn(e);try{n.checkValid()}catch(r){if(r instanceof _u)r.printStackTrace();else throw r}finally{}};Rn.prototype.getNodedSubstrings=function(){return Nt.getNodedSubstrings(this._nodedSegStrings)};Rn.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)};Rn.prototype.findInteriorIntersections=function(t,e){var n=new Qr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()};Rn.prototype.computeVertexSnaps=function(){var t=this;if(q(arguments[0],Lt))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof Nt)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new fe(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}};Rn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Hs,this._pointSnapper=new Di(this._noder.getIndex()),this.snapRound(t,this._li)};Rn.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new fe(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}};Rn.prototype.interfaces_=function(){return[Mr]};Rn.prototype.getClass=function(){return Rn};var Ut=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Q,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},ji={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ut.prototype.bufferFixedPrecision=function(t){var e=new dr(new Rn(new J(1)),t.getScale()),n=new ie(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Ut.prototype.bufferReducedPrecision=function(){var t=this;if(arguments.length===0){for(var e=Ut.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(o){if(o instanceof Zn)t._saveException=o;else throw o}finally{}if(t._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=Ut.precisionScaleFactor(this._argGeom,this._distance,n),i=new J(r);this.bufferFixedPrecision(i)}};Ut.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===J.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()};Ut.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)};Ut.prototype.bufferOriginalPrecision=function(){try{var t=new ie(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(e instanceof Wn)this._saveException=e;else throw e}finally{}};Ut.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry};Ut.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)};Ut.prototype.interfaces_=function(){return[]};Ut.prototype.getClass=function(){return Ut};Ut.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Ut(t),r=n.getResultGeometry(e);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof B&&typeof arguments[1]=="number"){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Ut(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}else if(arguments[2]instanceof Q&&arguments[0]instanceof B&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],p=arguments[2],h=new Ut(l,p),f=h.getResultGeometry(c);return f}}else if(arguments.length===4){var g=arguments[0],m=arguments[1],d=arguments[2],x=arguments[3],v=new Ut(g);v.setQuadrantSegments(d),v.setEndCapStyle(x);var I=v.getResultGeometry(m);return I}};Ut.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Se.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=e>0?e:0,s=i+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-a,l=Math.pow(10,u);return l};ji.CAP_ROUND.get=function(){return Q.CAP_ROUND};ji.CAP_BUTT.get=function(){return Q.CAP_FLAT};ji.CAP_FLAT.get=function(){return Q.CAP_FLAT};ji.CAP_SQUARE.get=function(){return Q.CAP_SQUARE};ji.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Ut,ji);var ee=function(){this._pt=[new y,new y],this._distance=z.NaN,this._isNull=!0};ee.prototype.getCoordinates=function(){return this._pt};ee.prototype.getCoordinate=function(t){return this._pt[t]};ee.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}};ee.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};ee.prototype.getDistance=function(){return this._distance};ee.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}};ee.prototype.interfaces_=function(){return[]};ee.prototype.getClass=function(){return ee};var In=function(){};In.prototype.interfaces_=function(){return[]};In.prototype.getClass=function(){return In};In.computeDistance=function(){if(arguments[2]instanceof ee&&arguments[0]instanceof dt&&arguments[1]instanceof y)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new k,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof ee&&arguments[0]instanceof Tt&&arguments[1]instanceof y){var a=arguments[0],u=arguments[1],l=arguments[2];In.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)In.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof ee&&arguments[0]instanceof B&&arguments[1]instanceof y){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof dt)In.computeDistance(p,h,f);else if(p instanceof Tt)In.computeDistance(p,h,f);else if(p instanceof oe)for(var g=p,m=0;m<g.getNumGeometries();m++){var d=g.getGeometryN(m);In.computeDistance(d,h,f)}else f.setMinimum(p.getCoordinate(),h)}else if(arguments[2]instanceof ee&&arguments[0]instanceof k&&arguments[1]instanceof y){var x=arguments[0],v=arguments[1],I=arguments[2],C=x.closestPoint(v);I.setMinimum(C,v)}};var Gr=function(t){this._maxPtDist=new ee,this._inputGeom=t||null},Ws={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Gr.prototype.computeMaxMidpointDistance=function(t){var e=new yr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())};Gr.prototype.computeMaxVertexDistance=function(t){var e=new Jr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())};Gr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()};Gr.prototype.getDistancePoints=function(){return this._maxPtDist};Gr.prototype.interfaces_=function(){return[]};Gr.prototype.getClass=function(){return Gr};Ws.MaxPointDistanceFilter.get=function(){return Jr};Ws.MaxMidpointDistanceFilter.get=function(){return yr};Object.defineProperties(Gr,Ws);var Jr=function(t){this._maxPtDist=new ee,this._minPtDist=new ee,this._geom=t||null};Jr.prototype.filter=function(t){this._minPtDist.initialize(),In.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Jr.prototype.getMaxPointDistance=function(){return this._maxPtDist};Jr.prototype.interfaces_=function(){return[Sn]};Jr.prototype.getClass=function(){return Jr};var yr=function(t){this._maxPtDist=new ee,this._minPtDist=new ee,this._geom=t||null};yr.prototype.filter=function(t,e){if(e===0)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new y((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),In.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};yr.prototype.isDone=function(){return!1};yr.prototype.isGeometryChanged=function(){return!1};yr.prototype.getMaxPointDistance=function(){return this._maxPtDist};yr.prototype.interfaces_=function(){return[Xe]};yr.prototype.getClass=function(){return yr};var Yn=function(t){this._comps=t||null};Yn.prototype.filter=function(t){t instanceof Tt&&this._comps.add(t)};Yn.prototype.interfaces_=function(){return[cn]};Yn.prototype.getClass=function(){return Yn};Yn.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return Yn.getPolygons(t,new T)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof Tt?n.add(e):e instanceof oe&&e.apply(new Yn(n)),n}};var zt=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};zt.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof wn){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof dt&&this._lines.add(t)};zt.prototype.setForceToLineString=function(t){this._isForcedToLineString=t};zt.prototype.interfaces_=function(){return[Kn]};zt.prototype.getClass=function(){return zt};zt.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(zt.getLines(t))}else if(arguments.length===2){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(zt.getLines(e,n))}};zt.getLines=function(){if(arguments.length===1){var t=arguments[0];return zt.getLines(t,!1)}else if(arguments.length===2){if(q(arguments[0],Lt)&&q(arguments[1],Lt)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();zt.getLines(i,n)}return n}else if(arguments[0]instanceof B&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1],a=new T;return o.apply(new zt(a,s)),a}else if(arguments[0]instanceof B&&q(arguments[1],Lt)){var u=arguments[0],l=arguments[1];return u instanceof dt?l.add(u):u.apply(new zt(l)),l}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&q(arguments[0],Lt)&&q(arguments[1],Lt)){for(var c=arguments[0],p=arguments[1],h=arguments[2],f=c.iterator();f.hasNext();){var g=f.next();zt.getLines(g,p,h)}return p}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof B&&q(arguments[1],Lt)){var m=arguments[0],d=arguments[1],x=arguments[2];return m.apply(new zt(d,x)),d}}};var We=function(){if(this._boundaryRule=Fe.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t===null)throw new ct("Rule must be non-null");this._boundaryRule=t}};We.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof y&&arguments[1]instanceof Tt){var e=arguments[0],n=arguments[1];if(n.isEmpty())return _.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===_.EXTERIOR)return _.EXTERIOR;if(i===_.BOUNDARY)return _.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===_.INTERIOR)return _.EXTERIOR;if(a===_.BOUNDARY)return _.BOUNDARY}return _.INTERIOR}else if(arguments[0]instanceof y&&arguments[1]instanceof dt){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return _.EXTERIOR;var c=l.getCoordinates();return!l.isClosed()&&(u.equals(c[0])||u.equals(c[c.length-1]))?_.BOUNDARY:A.isOnLine(u,c)?_.INTERIOR:_.EXTERIOR}else if(arguments[0]instanceof y&&arguments[1]instanceof ye){var p=arguments[0],h=arguments[1],f=h.getCoordinate();return f.equals2D(p)?_.INTERIOR:_.EXTERIOR}};We.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?A.locatePointInRing(t,e.getCoordinates()):_.EXTERIOR};We.prototype.intersects=function(t,e){return this.locate(t,e)!==_.EXTERIOR};We.prototype.updateLocationInfo=function(t){t===_.INTERIOR&&(this._isIn=!0),t===_.BOUNDARY&&this._numBoundaries++};We.prototype.computeLocation=function(t,e){var n=this;if(e instanceof ye&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof dt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Tt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Tr)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof bn)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof oe)for(var l=new Cn(e);l.hasNext();){var c=l.next();c!==e&&n.computeLocation(t,c)}};We.prototype.locate=function(t,e){return e.isEmpty()?_.EXTERIOR:e instanceof dt?this.locateInternal(t,e):e instanceof Tt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?_.BOUNDARY:this._numBoundaries>0||this._isIn?_.INTERIOR:_.EXTERIOR)};We.prototype.interfaces_=function(){return[]};We.prototype.getClass=function(){return We};var ne=function t(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Fu={INSIDE_AREA:{configurable:!0}};ne.prototype.isInsideArea=function(){return this._segIndex===ne.INSIDE_AREA};ne.prototype.getCoordinate=function(){return this._pt};ne.prototype.getGeometryComponent=function(){return this._component};ne.prototype.getSegmentIndex=function(){return this._segIndex};ne.prototype.interfaces_=function(){return[]};ne.prototype.getClass=function(){return ne};Fu.INSIDE_AREA.get=function(){return-1};Object.defineProperties(ne,Fu);var ar=function(t){this._pts=t||null};ar.prototype.filter=function(t){t instanceof ye&&this._pts.add(t)};ar.prototype.interfaces_=function(){return[cn]};ar.prototype.getClass=function(){return ar};ar.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof ye?Ye.singletonList(t):ar.getPoints(t,new T)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof ye?n.add(e):e instanceof oe&&e.apply(new ar(n)),n}};var ti=function(){this._locations=null;var t=arguments[0];this._locations=t};ti.prototype.filter=function(t){(t instanceof ye||t instanceof dt||t instanceof Tt)&&this._locations.add(new ne(t,0,t.getCoordinate()))};ti.prototype.interfaces_=function(){return[cn]};ti.prototype.getClass=function(){return ti};ti.getLocations=function(t){var e=new T;return t.apply(new ti(e)),e};var Xt=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new We,this._minDistanceLocation=null,this._minDistance=z.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Xt.prototype.computeContainmentDistance=function(){var t=this;if(arguments.length===0){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,o=Yn.getPolygons(this._geom[n]);if(o.size()>0){var s=ti.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&q(arguments[0],Ve)&&q(arguments[1],Ve)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var p=a.get(c),h=0;h<u.size();h++)if(t.computeContainmentDistance(p,u.get(h),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ne&&arguments[1]instanceof Tt){var f=arguments[0],g=arguments[1],m=arguments[2],d=f.getCoordinate();if(_.EXTERIOR!==this._ptLocator.locate(d,g))return this._minDistance=0,m[0]=f,m[1]=new ne(g,d),null}}};Xt.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};Xt.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=zt.getLines(this._geom[0]),n=zt.getLines(this._geom[1]),r=ar.getPoints(this._geom[0]),i=ar.getPoints(this._geom[1]);if(this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance)||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance))return null;t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),this.updateMinDistance(t,!1)};Xt.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};Xt.prototype.updateMinDistance=function(t,e){if(t[0]===null)return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])};Xt.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return t};Xt.prototype.computeMinDistance=function(){var t=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof dt&&arguments[1]instanceof ye){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=A.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new k(i[s],i[s+1]),l=u.closestPoint(o);r[0]=new ne(e,s,l),r[1]=new ne(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof dt&&arguments[1]instanceof dt){var c=arguments[0],p=arguments[1],h=arguments[2];if(c.getEnvelopeInternal().distance(p.getEnvelopeInternal())>this._minDistance)return null;for(var f=c.getCoordinates(),g=p.getCoordinates(),m=0;m<f.length-1;m++)for(var d=0;d<g.length-1;d++){var x=A.distanceLineLine(f[m],f[m+1],g[d],g[d+1]);if(x<t._minDistance){t._minDistance=x;var v=new k(f[m],f[m+1]),I=new k(g[d],g[d+1]),C=v.closestPoints(I);h[0]=new ne(c,m,C[0]),h[1]=new ne(p,d,C[1])}if(t._minDistance<=t._terminateDistance)return null}}}};Xt.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new ne(o,0,o.getCoordinate()),n[1]=new ne(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};Xt.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new ct("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};Xt.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};Xt.prototype.interfaces_=function(){return[]};Xt.prototype.getClass=function(){return Xt};Xt.distance=function(t,e){var n=new Xt(t,e);return n.distance()};Xt.isWithinDistance=function(t,e,n){var r=new Xt(t,e,n);return r.distance()<=n};Xt.nearestPoints=function(t,e){var n=new Xt(t,e);return n.nearestPoints()};var Wt=function(){this._pt=[new y,new y],this._distance=z.NaN,this._isNull=!0};Wt.prototype.getCoordinates=function(){return this._pt};Wt.prototype.getCoordinate=function(t){return this._pt[t]};Wt.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}};Wt.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};Wt.prototype.toString=function(){return $e.toLineString(this._pt[0],this._pt[1])};Wt.prototype.getDistance=function(){return this._distance};Wt.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}};Wt.prototype.interfaces_=function(){return[]};Wt.prototype.getClass=function(){return Wt};var rn=function(){};rn.prototype.interfaces_=function(){return[]};rn.prototype.getClass=function(){return rn};rn.computeDistance=function(){if(arguments[2]instanceof Wt&&arguments[0]instanceof dt&&arguments[1]instanceof y)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new k,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Wt&&arguments[0]instanceof Tt&&arguments[1]instanceof y){var a=arguments[0],u=arguments[1],l=arguments[2];rn.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)rn.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Wt&&arguments[0]instanceof B&&arguments[1]instanceof y){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof dt)rn.computeDistance(p,h,f);else if(p instanceof Tt)rn.computeDistance(p,h,f);else if(p instanceof oe)for(var g=p,m=0;m<g.getNumGeometries();m++){var d=g.getGeometryN(m);rn.computeDistance(d,h,f)}else f.setMinimum(p.getCoordinate(),h)}else if(arguments[2]instanceof Wt&&arguments[0]instanceof k&&arguments[1]instanceof y){var x=arguments[0],v=arguments[1],I=arguments[2],C=x.closestPoint(v);I.setMinimum(C,v)}};var De=function(){this._g0=null,this._g1=null,this._ptDist=new Wt,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ks={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};De.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};De.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new ct("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t};De.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)};De.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};De.prototype.computeOrientedDistance=function(t,e,n){var r=new ei(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new mr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}};De.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};De.prototype.interfaces_=function(){return[]};De.prototype.getClass=function(){return De};De.distance=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new De(t,e);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new De(r,i);return s.setDensifyFraction(o),s.distance()}};Ks.MaxPointDistanceFilter.get=function(){return ei};Ks.MaxDensifiedByFractionDistanceFilter.get=function(){return mr};Object.defineProperties(De,Ks);var ei=function(){this._maxPtDist=new Wt,this._minPtDist=new Wt,this._euclideanDist=new rn,this._geom=null;var t=arguments[0];this._geom=t};ei.prototype.filter=function(t){this._minPtDist.initialize(),rn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ei.prototype.getMaxPointDistance=function(){return this._maxPtDist};ei.prototype.interfaces_=function(){return[Sn]};ei.prototype.getClass=function(){return ei};var mr=function(){this._maxPtDist=new Wt,this._minPtDist=new Wt,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};mr.prototype.filter=function(t,e){var n=this;if(e===0)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,l=r.y+a*s,c=new y(u,l);n._minPtDist.initialize(),rn.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};mr.prototype.isDone=function(){return!1};mr.prototype.isGeometryChanged=function(){return!1};mr.prototype.getMaxPointDistance=function(){return this._maxPtDist};mr.prototype.interfaces_=function(){return[Xe]};mr.prototype.getClass=function(){return mr};var de=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Zs={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};de.prototype.checkMaximumDistance=function(t,e,n){var r=new De(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+$e.toLineString(i[0],i[1])+")"}};de.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=de.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),de.VERBOSE&&$t.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};de.prototype.checkNegativeValid=function(){if(!(this._input instanceof Tt||this._input instanceof bn||this._input instanceof oe))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)};de.prototype.getErrorIndicator=function(){return this._errorIndicator};de.prototype.checkMinimumDistance=function(t,e,n){var r=new Xt(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+$e.toLineString(i[0],i[1])+" )"}};de.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)};de.prototype.getErrorLocation=function(){return this._errorLocation};de.prototype.getPolygonLines=function(t){for(var e=new T,n=new zt(e),r=Yn.getPolygons(t),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return t.getFactory().buildGeometry(e)};de.prototype.getErrorMessage=function(){return this._errMsg};de.prototype.interfaces_=function(){return[]};de.prototype.getClass=function(){return de};Zs.VERBOSE.get=function(){return!1};Zs.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(de,Zs);var jt=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Qs={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};jt.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};jt.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*jt.MAX_ENV_DIFF_FRAC;t===0&&(t=.001);var e=new G(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new G(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};jt.prototype.checkDistance=function(){var t=new de(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")};jt.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};jt.prototype.checkPolygonal=function(){this._result instanceof Tt||this._result instanceof bn||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};jt.prototype.getErrorIndicator=function(){return this._errorIndicator};jt.prototype.getErrorLocation=function(){return this._errorLocation};jt.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};jt.prototype.report=function(t){if(!jt.VERBOSE)return null;$t.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))};jt.prototype.getErrorMessage=function(){return this._errorMsg};jt.prototype.interfaces_=function(){return[]};jt.prototype.getClass=function(){return jt};jt.isValidMsg=function(t,e,n){var r=new jt(t,e,n);return r.isValid()?null:r.getErrorMessage()};jt.isValid=function(t,e,n){var r=new jt(t,e,n);return!!r.isValid()};Qs.VERBOSE.get=function(){return!1};Qs.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(jt,Qs);var yn=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};yn.prototype.getCoordinates=function(){return this._pts};yn.prototype.size=function(){return this._pts.length};yn.prototype.getCoordinate=function(t){return this._pts[t]};yn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};yn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Kr.octant(this.getCoordinate(t),this.getCoordinate(t+1))};yn.prototype.setData=function(t){this._data=t};yn.prototype.getData=function(){return this._data};yn.prototype.toString=function(){return $e.toLineString(new vt(this._pts))};yn.prototype.interfaces_=function(){return[Pn]};yn.prototype.getClass=function(){return yn};var Gt=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new T,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Gt.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Gt.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t};Gt.prototype.getIntersectionSegments=function(){return this._intSegments};Gt.prototype.count=function(){return this._intersectionCount};Gt.prototype.getIntersections=function(){return this._intersections};Gt.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Gt.prototype.setKeepIntersections=function(t){this._keepIntersections=t};Gt.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection()||t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(t,e)||this.isEndSegment(n,r);if(!i)return null}var o=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=s,this._intSegments[2]=a,this._intSegments[3]=u,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Gt.prototype.isEndSegment=function(t,e){return e===0||e>=t.size()-2};Gt.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Gt.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Gt.prototype.interfaces_=function(){return[Ar]};Gt.prototype.getClass=function(){return Gt};Gt.createAllIntersectionsFinder=function(t){var e=new Gt(t);return e.setFindAllIntersections(!0),e};Gt.createAnyIntersectionFinder=function(t){return new Gt(t)};Gt.createIntersectionCounter=function(t){var e=new Gt(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ke=function(){this._li=new $r,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ke.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Ke.prototype.getIntersections=function(){return this._segInt.getIntersections()};Ke.prototype.isValid=function(){return this.execute(),this._isValid};Ke.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Ke.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Gt(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Hs;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Ke.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Zn(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Ke.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+$e.toLineString(t[0],t[1])+" and "+$e.toLineString(t[2],t[3])};Ke.prototype.interfaces_=function(){return[]};Ke.prototype.getClass=function(){return Ke};Ke.computeIntersections=function(t){var e=new Ke(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var kr=function t(){this._nv=null;var e=arguments[0];this._nv=new Ke(t.toSegmentStrings(e))};kr.prototype.checkValid=function(){this._nv.checkValid()};kr.prototype.interfaces_=function(){return[]};kr.prototype.getClass=function(){return kr};kr.toSegmentStrings=function(t){for(var e=new T,n=t.iterator();n.hasNext();){var r=n.next();e.add(new yn(r.getCoordinates(),r))}return e};kr.checkValid=function(t){var e=new kr(t);e.checkValid()};var ni=function(t){this._mapOp=t};ni.prototype.map=function(t){for(var e=this,n=new T,r=0;r<t.getNumGeometries();r++){var i=e._mapOp.map(t.getGeometryN(r));i.isEmpty()||n.add(i)}return t.getFactory().createGeometryCollection(X.toGeometryArray(n))};ni.prototype.interfaces_=function(){return[]};ni.prototype.getClass=function(){return ni};ni.map=function(t,e){var n=new ni(e);return n.map(t)};var mn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new T,this._resultLineList=new T;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};mn.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}};mn.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)};mn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList};mn.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&!t.isVisited()&&U.isResultOfOp(r,e)&&!i.isCovered()&&(n.add(i),t.setVisitedEdge(!0))};mn.prototype.findCoveredLineEdges=function(){for(var t=this,e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var s=t._op.isCoveredByA(i.getCoordinate());o.setCovered(s)}}};mn.prototype.labelIsolatedLines=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?e.labelIsolatedLine(r,0):e.labelIsolatedLine(r,1))}};mn.prototype.buildLines=function(t){for(var e=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=e._geometryFactory.createLineString(r.getCoordinates());e._resultLineList.add(i),r.setInResult(!0)}};mn.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();if(t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult())return null;V.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),U.isResultOfOp(r,e)&&e===U.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))};mn.prototype.interfaces_=function(){return[]};mn.prototype.getClass=function(){return mn};var ri=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new T;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};ri.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}};ri.prototype.extractNonCoveredResultNodes=function(t){for(var e=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||t===U.INTERSECTION)){var i=r.getLabel();U.isResultOfOp(i,t)&&e.filterCoveredNodeToPoint(r)}}};ri.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList};ri.prototype.interfaces_=function(){return[]};ri.prototype.getClass=function(){return ri};var ge=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};ge.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))};ge.prototype.transformPolygon=function(t,e){var n=this,r=!0,i=this.transformLinearRing(t.getExteriorRing(),t);(i===null||!(i instanceof wn)||i.isEmpty())&&(r=!1);for(var o=new T,s=0;s<t.getNumInteriorRing();s++){var a=n.transformLinearRing(t.getInteriorRingN(s),t);a===null||a.isEmpty()||(a instanceof wn||(r=!1),o.add(a))}if(r)return this._factory.createPolygon(i,o.toArray([]));var u=new T;return i!==null&&u.add(i),u.addAll(o),this._factory.buildGeometry(u)};ge.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)};ge.prototype.getInputGeometry=function(){return this._inputGeom};ge.prototype.transformMultiLineString=function(t,e){for(var n=this,r=new T,i=0;i<t.getNumGeometries();i++){var o=n.transformLineString(t.getGeometryN(i),t);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};ge.prototype.transformCoordinates=function(t,e){return this.copy(t)};ge.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))};ge.prototype.transformMultiPoint=function(t,e){for(var n=this,r=new T,i=0;i<t.getNumGeometries();i++){var o=n.transformPoint(t.getGeometryN(i),t);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};ge.prototype.transformMultiPolygon=function(t,e){for(var n=this,r=new T,i=0;i<t.getNumGeometries();i++){var o=n.transformPolygon(t.getGeometryN(i),t);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};ge.prototype.copy=function(t){return t.copy()};ge.prototype.transformGeometryCollection=function(t,e){for(var n=this,r=new T,i=0;i<t.getNumGeometries();i++){var o=n.transform(t.getGeometryN(i));o!==null&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(X.toGeometryArray(r)):this._factory.buildGeometry(r)};ge.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof ye)return this.transformPoint(t,null);if(t instanceof Pi)return this.transformMultiPoint(t,null);if(t instanceof wn)return this.transformLinearRing(t,null);if(t instanceof dt)return this.transformLineString(t,null);if(t instanceof Tr)return this.transformMultiLineString(t,null);if(t instanceof Tt)return this.transformPolygon(t,null);if(t instanceof bn)return this.transformMultiPolygon(t,null);if(t instanceof oe)return this.transformGeometryCollection(t,null);throw new ct("Unknown Geometry subtype: "+t.getClass().getName())};ge.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};ge.prototype.interfaces_=function(){return[]};ge.prototype.getClass=function(){return ge};var Tn=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new k,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof dt&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Tn.prototype.snapVertices=function(t,e){for(var n=this,r=this._isClosed?t.size()-1:t.size(),i=0;i<r;i++){var o=t.get(i),s=n.findSnapForVertex(o,e);s!==null&&(t.set(i,new y(s)),i===0&&n._isClosed&&t.set(t.size()-1,new y(s)))}};Tn.prototype.findSnapForVertex=function(t,e){for(var n=this,r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<n._snapTolerance)return e[r]}return null};Tn.prototype.snapTo=function(t){var e=new Eo(this._srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n};Tn.prototype.snapSegments=function(t,e){var n=this;if(e.length===0)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var i=0;i<r;i++){var o=e[i],s=n.findSegmentIndexToSnap(o,t);s>=0&&t.add(s+1,new y(o),!1)}};Tn.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=z.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i};Tn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t};Tn.prototype.interfaces_=function(){return[]};Tn.prototype.getClass=function(){return Tn};Tn.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])};var Et=function(t){this._srcGeom=t||null},Gu={SNAP_PRECISION_FACTOR:{configurable:!0}};Et.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t),r=new ku(e,n);return r.transform(this._srcGeom)};Et.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new ku(t,n,!0),i=r.transform(this._srcGeom),o=i;return e&&q(o,pr)&&(o=i.buffer(0)),o};Et.prototype.computeSnapTolerance=function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n};Et.prototype.extractTargetCoordinates=function(t){for(var e=new ln,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))};Et.prototype.computeMinimumSegmentLength=function(t){for(var e=z.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e};Et.prototype.interfaces_=function(){return[]};Et.prototype.getClass=function(){return Et};Et.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Et(t);r[0]=i.snapTo(e,n);var o=new Et(e);return r[1]=o.snapTo(r[0],n),r};Et.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=Et.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===J.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return Math.min(Et.computeOverlaySnapTolerance(i),Et.computeOverlaySnapTolerance(o))}};Et.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),r=n*Et.SNAP_PRECISION_FACTOR;return r};Et.snapToSelf=function(t,e,n){var r=new Et(t);return r.snapToSelf(e,n)};Gu.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Et,Gu);var ku=function(t){function e(n,r,i){t.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(n,r){var i=new Tn(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},e.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ge),te=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};te.prototype.getCommon=function(){return z.longBitsToDouble(this._commonBits)};te.prototype.add=function(t){var e=z.doubleToLongBits(t);if(this._isFirst)return this._commonBits=e,this._commonSignExp=te.signExpBits(this._commonBits),this._isFirst=!1,null;var n=te.signExpBits(e);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=te.numCommonMostSigMantissaBits(this._commonBits,e),this._commonBits=te.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};te.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],e=z.longBitsToDouble(t),n=z.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}};te.prototype.interfaces_=function(){return[]};te.prototype.getClass=function(){return te};te.getBit=function(t,e){var n=1<<e;return t&n?1:0};te.signExpBits=function(t){return t>>52};te.zeroLowerBits=function(t,e){var n=(1<<e)-1,r=~n,i=t&r;return i};te.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(te.getBit(t,r)!==te.getBit(e,r))return n;n++}return 52};var _r=function(){this._commonCoord=null,this._ccFilter=new ii},Js={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};_r.prototype.addCommonBits=function(t){var e=new vr(this._commonCoord);t.apply(e),t.geometryChanged()};_r.prototype.removeCommonBits=function(t){if(this._commonCoord.x===0&&this._commonCoord.y===0)return t;var e=new y(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new vr(e);return t.apply(n),t.geometryChanged(),t};_r.prototype.getCommonCoordinate=function(){return this._commonCoord};_r.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};_r.prototype.interfaces_=function(){return[]};_r.prototype.getClass=function(){return _r};Js.CommonCoordinateFilter.get=function(){return ii};Js.Translater.get=function(){return vr};Object.defineProperties(_r,Js);var ii=function(){this._commonBitsX=new te,this._commonBitsY=new te};ii.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)};ii.prototype.getCommonCoordinate=function(){return new y(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};ii.prototype.interfaces_=function(){return[Sn]};ii.prototype.getClass=function(){return ii};var vr=function(){this.trans=null;var t=arguments[0];this.trans=t};vr.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)};vr.prototype.isDone=function(){return!1};vr.prototype.isGeometryChanged=function(){return!0};vr.prototype.interfaces_=function(){return[Xe]};vr.prototype.getClass=function(){return vr};var kt=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};kt.prototype.selfSnap=function(t){var e=new Et(t),n=e.snapTo(t,this._snapTolerance);return n};kt.prototype.removeCommonBits=function(t){this._cbr=new _r,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e};kt.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t};kt.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=U.overlayOp(e[0],e[1],t);return this.prepareResult(n)};kt.prototype.checkValid=function(t){t.isValid()||$t.out.println("Snapped geometry is invalid")};kt.prototype.computeSnapTolerance=function(){this._snapTolerance=Et.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};kt.prototype.snap=function(t){var e=this.removeCommonBits(t),n=Et.snap(e[0],e[1],this._snapTolerance);return n};kt.prototype.interfaces_=function(){return[]};kt.prototype.getClass=function(){return kt};kt.overlayOp=function(t,e,n){var r=new kt(t,e);return r.getResultGeometry(n)};kt.union=function(t,e){return kt.overlayOp(t,e,U.UNION)};kt.intersection=function(t,e){return kt.overlayOp(t,e,U.INTERSECTION)};kt.symDifference=function(t,e){return kt.overlayOp(t,e,U.SYMDIFFERENCE)};kt.difference=function(t,e){return kt.overlayOp(t,e,U.DIFFERENCE)};var ue=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ue.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=U.overlayOp(this._geom[0],this._geom[1],t);var i=!0;i&&(n=!0)}catch(o){if(o instanceof Wn)r=o;else throw o}finally{}if(!n)try{e=kt.overlayOp(this._geom[0],this._geom[1],t)}catch(o){throw o instanceof Wn?r:o}finally{}return e};ue.prototype.interfaces_=function(){return[]};ue.prototype.getClass=function(){return ue};ue.overlayOp=function(t,e,n){var r=new ue(t,e);return r.getResultGeometry(n)};ue.union=function(t,e){return ue.overlayOp(t,e,U.UNION)};ue.intersection=function(t,e){return ue.overlayOp(t,e,U.INTERSECTION)};ue.symDifference=function(t,e){return ue.overlayOp(t,e,U.SYMDIFFERENCE)};ue.difference=function(t,e){return ue.overlayOp(t,e,U.DIFFERENCE)};var go=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};go.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)};go.prototype.interfaces_=function(){return[]};go.prototype.getClass=function(){return go};var ve=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ta={INSERT:{configurable:!0},DELETE:{configurable:!0}};ve.prototype.isDelete=function(){return this._eventType===ve.DELETE};ve.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t};ve.prototype.getObject=function(){return this._obj};ve.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0};ve.prototype.getInsertEvent=function(){return this._insertEvent};ve.prototype.isInsert=function(){return this._eventType===ve.INSERT};ve.prototype.isSameLabel=function(t){return this._label===null?!1:this._label===t._label};ve.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};ve.prototype.interfaces_=function(){return[Be]};ve.prototype.getClass=function(){return ve};ta.INSERT.get=function(){return 1};ta.DELETE.get=function(){return 2};Object.defineProperties(ve,ta);var $o=function(){};$o.prototype.interfaces_=function(){return[]};$o.prototype.getClass=function(){return $o};var Yt=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Yt.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&this._li.getIntersectionNum()===1){if(Yt.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(e===0&&r===i||r===0&&e===i)return!0}}return!1};Yt.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Yt.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t};Yt.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Yt.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(t.isIntersection(i))return!0}return!1};Yt.prototype.hasProperIntersection=function(){return this._hasProper};Yt.prototype.hasIntersection=function(){return this._hasIntersection};Yt.prototype.isDone=function(){return this._isDone};Yt.prototype.isBoundaryPoint=function(t,e){return e===null?!1:!!(this.isBoundaryPointInternal(t,e[0])||this.isBoundaryPointInternal(t,e[1]))};Yt.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e};Yt.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};Yt.prototype.interfaces_=function(){return[]};Yt.prototype.getClass=function(){return Yt};Yt.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1};var ap=function(t){function e(){t.call(this),this.events=new T,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){var n=this;Ye.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},e.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=n.events.get(i);if(o.isInsert()&&n.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Yt&&q(arguments[0],Ve)&&q(arguments[1],Ve)){var s=arguments[0],a=arguments[1],u=arguments[2];this.addEdges(s,s),this.addEdges(a,a),this.computeIntersections(u)}else if(typeof arguments[2]=="boolean"&&q(arguments[0],Ve)&&arguments[1]instanceof Yt){var l=arguments[0],c=arguments[1],p=arguments[2];p?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(c)}}},e.prototype.addEdge=function(n,r){for(var i=this,o=n.getMonotoneChainEdge(),s=o.getStartIndexes(),a=0;a<s.length-1;a++){var u=new go(o,a),l=new ve(r,o.getMinX(a),u);i.events.add(l),i.events.add(new ve(o.getMaxX(a),l))}},e.prototype.processOverlaps=function(n,r,i,o){for(var s=this,a=i.getObject(),u=n;u<r;u++){var l=s.events.get(u);if(l.isInsert()){var c=l.getObject();i.isSameLabel(l)||(a.computeIntersections(c,o),s.nOverlaps++)}}},e.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var o=i.next();n.addEdge(o,o)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.iterator();u.hasNext();){var l=u.next();n.addEdge(l,a)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($o),Mn=function(){this._min=z.POSITIVE_INFINITY,this._max=z.NEGATIVE_INFINITY},Bu={NodeComparator:{configurable:!0}};Mn.prototype.getMin=function(){return this._min};Mn.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)};Mn.prototype.getMax=function(){return this._max};Mn.prototype.toString=function(){return $e.toLineString(new y(this._min,0),new y(this._max,0))};Mn.prototype.interfaces_=function(){return[]};Mn.prototype.getClass=function(){return Mn};Bu.NodeComparator.get=function(){return yo};Object.defineProperties(Mn,Bu);var yo=function(){};yo.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0};yo.prototype.interfaces_=function(){return[Ii]};yo.prototype.getClass=function(){return yo};var up=function(t){function e(){t.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mn),lp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},e.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mn),Dn=function(){this._leaves=new T,this._root=null,this._level=0};Dn.prototype.buildTree=function(){var t=this;Ye.sort(this._leaves,new Mn.NodeComparator);for(var e=this._leaves,n=null,r=new T;;){if(t.buildLevel(e,r),r.size()===1)return r.get(0);n=e,e=r,r=n}};Dn.prototype.insert=function(t,e,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new up(t,e,n))};Dn.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)};Dn.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Dn.prototype.printNode=function(t){$t.out.println($e.toLineString(new y(t._min,this._level),new y(t._max,this._level)))};Dn.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Dn.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n),i=n+1<t.size()?t.get(n):null;if(i===null)e.add(r);else{var o=new lp(t.get(n),t.get(n+1));e.add(o)}}};Dn.prototype.interfaces_=function(){return[]};Dn.prototype.getClass=function(){return Dn};var Ai=function(){this._items=new T};Ai.prototype.visitItem=function(t){this._items.add(t)};Ai.prototype.getItems=function(){return this._items};Ai.prototype.interfaces_=function(){return[hr]};Ai.prototype.getClass=function(){return Ai};var Fi=function(){this._index=null;var t=arguments[0];if(!q(t,pr))throw new ct("Argument must be Polygonal");this._index=new Br(t)},ea={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Fi.prototype.locate=function(t){var e=new sn(t),n=new Gi(e);return this._index.query(t.y,t.y,n),e.getLocation()};Fi.prototype.interfaces_=function(){return[Mi]};Fi.prototype.getClass=function(){return Fi};ea.SegmentVisitor.get=function(){return Gi};ea.IntervalIndexedGeometry.get=function(){return Br};Object.defineProperties(Fi,ea);var Gi=function(){this._counter=null;var t=arguments[0];this._counter=t};Gi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))};Gi.prototype.interfaces_=function(){return[hr]};Gi.prototype.getClass=function(){return Gi};var Br=function(){this._index=new Dn;var t=arguments[0];this.init(t)};Br.prototype.init=function(t){for(var e=this,n=zt.getLines(t),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();e.addLine(o)}};Br.prototype.addLine=function(t){for(var e=this,n=1;n<t.length;n++){var r=new k(t[n-1],t[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);e._index.insert(i,o,r)}};Br.prototype.query=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Ai;return this._index.query(t,e,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}};Br.prototype.interfaces_=function(){return[]};Br.prototype.getClass=function(){return Br};var Wi=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Iu,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new We,arguments.length===2){var n=arguments[0],r=arguments[1],i=Fe.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this._argIndex=o,this._parentGeom=s,this._boundaryNodeRule=a,s!==null&&this.add(s)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),o=i.getLabel(),s=1,a=_.NONE;a=o.getLocation(n,w.ON),a===_.BOUNDARY&&s++;var u=e.determineBoundary(this._boundaryNodeRule,s);o.setLocation(n,u)},e.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Yt(i,!0,!1);a.setIsDoneIfProperInt(s);var u=this.createEdgeSetIntersector(),l=this._parentGeom instanceof wn||this._parentGeom instanceof Tt||this._parentGeom instanceof bn,c=o||!l;return u.computeIntersections(this._edges,a,c),this.addSelfIntersectionNodes(this._argIndex),a}},e.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},e.prototype.computeEdgeIntersections=function(n,r,i){var o=new Yt(r,i,!0);o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this._edges,n._edges,o),o},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof ye){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,_.INTERIOR)}else if(arguments[0]instanceof y){var i=arguments[0];this.insertPoint(this._argIndex,i,_.INTERIOR)}},e.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),_.EXTERIOR,_.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);r.addPolygonRing(o,_.INTERIOR,_.EXTERIOR)}},e.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],_.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],_.BOUNDARY)},e.prototype.addLineString=function(n){var r=j.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new Vo(r,new et(this._argIndex,_.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),V.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var s=o.next();r[i++]=s.getCoordinate().copy()}return r},e.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===_.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},e.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=j.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var s=r,a=i;A.isCCW(o)&&(s=i,a=r);var u=new Vo(o,new et(this._argIndex,_.BOUNDARY,s,a));this._lineEdgeMap.put(n,u),this.insertEdge(u),this.insertPoint(this._argIndex,o[0],_.BOUNDARY)},e.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),s=o.getLabel();s===null?o._label=new et(n,i):s.setLocation(n,i)},e.prototype.createEdgeSetIntersector=function(){return new ap},e.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var o=i.next(),s=o.getLabel().getLocation(n),a=o.eiList.iterator();a.hasNext();){var u=a.next();r.addSelfIntersectionNode(n,u.coord,s)}},e.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof bn&&(this._useBoundaryDeterminationRule=!1),n instanceof Tt)this.addPolygon(n);else if(n instanceof dt)this.addLineString(n);else if(n instanceof ye)this.addPoint(n);else if(n instanceof Pi)this.addCollection(n);else if(n instanceof Tr)this.addCollection(n);else if(n instanceof bn)this.addCollection(n);else if(n instanceof oe)this.addCollection(n);else throw new Error(n.getClass().getName())}else return t.prototype.add.apply(this,arguments)},e.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.add(o)}},e.prototype.locate=function(n){return q(this._parentGeom,pr)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Fi(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},e.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(n,r){return n.isInBoundary(r)?_.BOUNDARY:_.INTERIOR},e}(ft),ki=function(){if(this._li=new $r,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Wi(0,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=Fe.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Wi(0,e,r),this._arg[1]=new Wi(1,n,r)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Wi(0,i,s),this._arg[1]=new Wi(1,o,s)}};ki.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()};ki.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)};ki.prototype.interfaces_=function(){return[]};ki.prototype.getClass=function(){return ki};var Lr=function(){};Lr.prototype.interfaces_=function(){return[]};Lr.prototype.getClass=function(){return Lr};Lr.map=function(){if(arguments[0]instanceof B&&q(arguments[1],Lr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new T,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));i!==null&&n.add(i)}return t.getFactory().buildGeometry(n)}else if(q(arguments[0],Lt)&&q(arguments[1],Lr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new T,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);c!==null&&a.add(c)}return a}};Lr.MapOp=function(){};var U=function(t){function e(){var n=arguments[0],r=arguments[1];t.call(this,n,r),this._ptLocator=new We,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new He,this._resultPolyList=new T,this._resultLineList=new T,this._resultPointList=new T,this._graph=new ft(new Ou),this._geomFact=n.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new et(n.getLabel()),o.flip());var s=r.getDepth();s.isNull()&&s.add(i),s.add(o),i.merge(o)}else this._edgeList.add(n)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},e.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},e.prototype.computeGeometry=function(n,r,i,o){var s=new T;return s.addAll(n),s.addAll(r),s.addAll(i),s.isEmpty()?e.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)},e.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},e.prototype.isCovered=function(n,r){for(var i=this,o=r.iterator();o.hasNext();){var s=o.next(),a=i._ptLocator.locate(n,s);if(a!==_.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var n=new T,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},e.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},e.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},e.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();r.insertUniqueEdge(o)}},e.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new T;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),kr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new me(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new mn(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var s=new ri(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},e.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},e.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var o=i.next(),s=r._graph.addNode(o.getCoordinate());s.setLabel(n,o.getLabel().getLocation(n))}},e.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(o.getLocation(0,w.RIGHT),o.getLocation(1,w.RIGHT),n)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var s=0;s<2;s++)!i.isNull(s)&&i.isArea()&&!o.isNull(s)&&(o.getDelta(s)===0?i.toLine(s):(V.isTrue(!o.isNull(s,w.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(s,w.LEFT,o.getLocation(s,w.LEFT)),V.isTrue(!o.isNull(s,w.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(s,w.RIGHT,o.getLocation(s,w.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(o)}},e.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ki);U.overlayOp=function(t,e,n){var r=new U(t,e),i=r.getResultGeometry(n);return i};U.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return U.createEmptyResult(U.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return ni.map(t,{interfaces_:function(){return[Lr.MapOp]},map:function(r){return r.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ue.overlayOp(t,e,U.INTERSECTION)};U.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return U.createEmptyResult(U.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ue.overlayOp(t,e,U.SYMDIFFERENCE)};U.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case U.INTERSECTION:o=Math.min(r,i);break;case U.UNION:o=Math.max(r,i);break;case U.DIFFERENCE:o=r;break;case U.SYMDIFFERENCE:o=Math.max(r,i);break}return o};U.createEmptyResult=function(t,e,n,r){var i=null;switch(U.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};U.difference=function(t,e){return t.isEmpty()?U.createEmptyResult(U.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ue.overlayOp(t,e,U.DIFFERENCE))};U.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return U.isResultOfOp(n,r,e)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===_.BOUNDARY&&(i=_.INTERIOR),o===_.BOUNDARY&&(o=_.INTERIOR),s){case U.INTERSECTION:return i===_.INTERIOR&&o===_.INTERIOR;case U.UNION:return i===_.INTERIOR||o===_.INTERIOR;case U.DIFFERENCE:return i===_.INTERIOR&&o!==_.INTERIOR;case U.SYMDIFFERENCE:return i===_.INTERIOR&&o!==_.INTERIOR||i!==_.INTERIOR&&o===_.INTERIOR}return!1}};U.INTERSECTION=1;U.UNION=2;U.DIFFERENCE=3;U.SYMDIFFERENCE=4;var ur=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new We,this._seg=new k;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};ur.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,e._seg.p0),i.getCoordinate(o+1,e._seg.p1);var s=e._seg.distance(t);if(s<=e._boundaryDistanceTolerance)return!0}return!1};ur.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?_.BOUNDARY:this._ptLocator.locate(t,this._g)};ur.prototype.extractLinework=function(t){var e=new Bi;t.apply(e);var n=e.getLinework(),r=X.toLineStringArray(n);return t.getFactory().createMultiLineString(r)};ur.prototype.interfaces_=function(){return[]};ur.prototype.getClass=function(){return ur};var Bi=function(){this._linework=null,this._linework=new T};Bi.prototype.getLinework=function(){return this._linework};Bi.prototype.filter=function(t){var e=this;if(t instanceof Tt){var n=t;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)e._linework.add(n.getInteriorRingN(r))}};Bi.prototype.interfaces_=function(){return[cn]};Bi.prototype.getClass=function(){return Bi};var qr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};qr.prototype.extractPoints=function(t,e,n){for(var r=this,i=t.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],e,n)};qr.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e};qr.prototype.getPoints=function(t){for(var e=this,n=new T,r=zt.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();e.extractPoints(o,t,n)}return n};qr.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var p=new y(l-u,c+a);r.add(p)}if(this._doRight){var h=new y(l+u,c-a);r.add(h)}};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};var Oe=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new T;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new ur(this._geom[0],this._boundaryDistanceTolerance),new ur(this._geom[1],this._boundaryDistanceTolerance),new ur(this._geom[2],this._boundaryDistanceTolerance)]},qu={TOLERANCE:{configurable:!0}};Oe.prototype.reportResult=function(t,e,n){$t.out.println("Overlay result invalid - A:"+_.toLocationSymbol(e[0])+" B:"+_.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+_.toLocationSymbol(e[2]))};Oe.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e};Oe.prototype.checkValid=function(){var t=this;if(arguments.length===1){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),Oe.hasLocation(this._location,_.BOUNDARY)?!0:this.isValidResult(i,this._location)}};Oe.prototype.addTestPts=function(t){var e=new qr(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))};Oe.prototype.isValidResult=function(t,e){var n=U.isResultOfOp(e[0],e[1],t),r=e[2]===_.INTERIOR,i=!(n^r);return i||this.reportResult(t,e,n),i};Oe.prototype.getInvalidLocation=function(){return this._invalidLocation};Oe.prototype.interfaces_=function(){return[]};Oe.prototype.getClass=function(){return Oe};Oe.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1};Oe.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Et.computeSizeBasedSnapTolerance(t),Et.computeSizeBasedSnapTolerance(e))};Oe.isValid=function(t,e,n,r){var i=new Oe(t,e,r);return i.isValid(n)};qu.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Oe,qu);var Ne=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ne.prototype.extractElements=function(t,e){var n=this;if(t===null)return null;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);n._skipEmpty&&i.isEmpty()||e.add(i)}};Ne.prototype.combine=function(){for(var t=this,e=new T,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();t.extractElements(r,e)}return e.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Ne.combine=function(){if(arguments.length===1){var t=arguments[0],e=new Ne(t);return e.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Ne(Ne.createList(n,r));return i.combine()}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Ne(Ne.createList(o,s,a));return u.combine()}};Ne.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()};Ne.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new T;return n.add(t),n.add(e),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new T;return s.add(r),s.add(i),s.add(o),s}};var St=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,this._inputPolys===null&&(this._inputPolys=new T)},zu={STRTREE_NODE_CAPACITY:{configurable:!0}};St.prototype.reduceToGeometries=function(t){for(var e=this,n=new T,r=t.iterator();r.hasNext();){var i=r.next(),o=null;q(i,Ve)?o=e.unionTree(i):i instanceof B&&(o=i),n.add(o)}return n};St.prototype.extractByEnvelope=function(t,e,n){for(var r=new T,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)};St.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){var i=Ne.combine(t,e);return i}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,o)};St.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Su(St.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree(),i=this.unionTree(r);return i};St.prototype.binaryUnion=function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=St.getGeometry(e,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(St.getGeometry(e,n),St.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}}};St.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e===null?e=r.copy():e=e.union(r)}return e};St.prototype.unionSafe=function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)};St.prototype.unionActual=function(t,e){return St.restrictToPolygons(t.union(e))};St.prototype.unionTree=function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n};St.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new T,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);r.add(s);var a=Ne.combine(r);return a};St.prototype.bufferUnion=function(){if(arguments.length===1){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}};St.prototype.interfaces_=function(){return[]};St.prototype.getClass=function(){return St};St.restrictToPolygons=function(t){if(q(t,pr))return t;var e=Yn.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(X.toPolygonArray(e))};St.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)};St.union=function(t){var e=new St(t);return e.union()};zu.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(St,zu);var Xo=function(){};Xo.prototype.interfaces_=function(){return[]};Xo.prototype.getClass=function(){return Xo};Xo.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return U.createEmptyResult(U.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ue.overlayOp(t,e,U.UNION)};function Xr(){return new jo}function jo(){this.reset()}jo.prototype={constructor:jo,reset:function(){this.s=this.t=0},add:function(t){Aa(Lo,t,this.t),Aa(this,Lo.s,this.s),this.s?this.t+=Lo.t:this.s=Lo.t},valueOf:function(){return this.s}};var Lo=new jo;function Aa(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var gt=1e-6,it=Math.PI,jn=it/2,Fa=it/4,tr=it*2,br=180/it,tn=it/180,re=Math.abs,cp=Math.atan,qi=Math.atan2,Pt=Math.cos,Ot=Math.sin,Yi=Math.sqrt;function Uu(t){return t>1?0:t<-1?it:Math.acos(t)}function oi(t){return t>1?jn:t<-1?-jn:Math.asin(t)}function Ki(){}function Yo(t,e){t&&ka.hasOwnProperty(t.type)&&ka[t.type](t,e)}var Ga={Feature:function(t,e){Yo(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Yo(n[r].geometry,e)}},ka={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ds(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ds(n[r],e,0)},Polygon:function(t,e){Ba(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ba(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Yo(n[r],e)}};function Ds(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function Ba(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ds(t[n],e,1);e.polygonEnd()}function pp(t,e){t&&Ga.hasOwnProperty(t.type)?Ga[t.type](t,e):Yo(t,e)}Xr();Xr();function As(t){return[qi(t[1],t[0]),oi(t[2])]}function zi(t){var e=t[0],n=t[1],r=Pt(n);return[r*Pt(e),r*Ot(e),Ot(n)]}function Po(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ho(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Es(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Oo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Fs(t){var e=Yi(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Xr();function Vu(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function Gs(t,e){return[t>it?t-tr:t<-it?t+tr:t,e]}Gs.invert=Gs;function hp(t,e,n){return(t%=tr)?e||n?Vu(za(t),Ua(e,n)):za(t):e||n?Ua(e,n):Gs}function qa(t){return function(e,n){return e+=t,[e>it?e-tr:e<-it?e+tr:e,n]}}function za(t){var e=qa(t);return e.invert=qa(-t),e}function Ua(t,e){var n=Pt(t),r=Ot(t),i=Pt(e),o=Ot(e);function s(a,u){var l=Pt(u),c=Pt(a)*l,p=Ot(a)*l,h=Ot(u),f=h*n+c*r;return[qi(p*i-f*o,c*n-h*r),oi(f*i+p*o)]}return s.invert=function(a,u){var l=Pt(u),c=Pt(a)*l,p=Ot(a)*l,h=Ot(u),f=h*i-p*o;return[qi(p*i+h*o,c*n+f*r),oi(f*n-c*r)]},s}function fp(t,e,n,r,i,o){if(n){var s=Pt(e),a=Ot(e),u=r*n;i==null?(i=e+r*tr,o=e-u/2):(i=Va(s,i),o=Va(s,o),(r>0?i<o:i>o)&&(i+=r*tr));for(var l,c=i;r>0?c>o:c<o;c-=u)l=As([s,-a*Pt(c),-a*Ot(c)]),t.point(l[0],l[1])}}function Va(t,e){e=zi(e),e[0]-=t,Fs(e);var n=Uu(-e[1]);return((-e[2]<0?-n:n)+tr-gt)%tr}function $u(){var t=[],e;return{point:function(n,r){e.push([n,r])},lineStart:function(){t.push(e=[])},lineEnd:Ki,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function gp(t,e,n,r,i,o){var s=t[0],a=t[1],u=e[0],l=e[1],c=0,p=1,h=u-s,f=l-a,g;if(g=n-s,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<p&&(p=g)}else if(h>0){if(g>p)return;g>c&&(c=g)}if(g=i-s,!(!h&&g<0)){if(g/=h,h<0){if(g>p)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<p&&(p=g)}if(g=r-a,!(!f&&g>0)){if(g/=f,f<0){if(g<c)return;g<p&&(p=g)}else if(f>0){if(g>p)return;g>c&&(c=g)}if(g=o-a,!(!f&&g<0)){if(g/=f,f<0){if(g>p)return;g>c&&(c=g)}else if(f>0){if(g<c)return;g<p&&(p=g)}return c>0&&(t[0]=s+c*h,t[1]=a+c*f),p<1&&(e[0]=s+p*h,e[1]=a+p*f),!0}}}}}function Fo(t,e){return re(t[0]-e[0])<gt&&re(t[1]-e[1])<gt}function Ro(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Xu(t,e,n,r,i){var o=[],s=[],a,u;if(t.forEach(function(g){if(!((m=g.length-1)<=0)){var m,d=g[0],x=g[m],v;if(Fo(d,x)){for(i.lineStart(),a=0;a<m;++a)i.point((d=g[a])[0],d[1]);i.lineEnd();return}o.push(v=new Ro(d,g,null,!0)),s.push(v.o=new Ro(d,null,v,!1)),o.push(v=new Ro(x,g,null,!1)),s.push(v.o=new Ro(x,null,v,!0))}}),!!o.length){for(s.sort(e),$a(o),$a(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,p;;){for(var h=l,f=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(a=0,u=c.length;a<u;++a)i.point((p=c[a])[0],p[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(f)for(c=h.p.z,a=c.length-1;a>=0;--a)i.point((p=c[a])[0],p[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,f=!f}while(!h.v);i.lineEnd()}}}function $a(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function ju(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function dp(t){return t.length===1&&(t=yp(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function yp(t){return function(e,n){return ju(t(e),n)}}dp(ju);function Yu(t){for(var e=t.length,n,r=-1,i=0,o,s;++r<e;)i+=t[r].length;for(o=new Array(i);--e>=0;)for(s=t[e],n=s.length;--n>=0;)o[--i]=s[n];return o}var Zi=1e9,To=-Zi;function mp(t,e,n,r){function i(l,c){return t<=l&&l<=n&&e<=c&&c<=r}function o(l,c,p,h){var f=0,g=0;if(l==null||(f=s(l,p))!==(g=s(c,p))||u(l,c)<0^p>0)do h.point(f===0||f===3?t:n,f>1?r:e);while((f=(f+p+4)%4)!==g);else h.point(c[0],c[1])}function s(l,c){return re(l[0]-t)<gt?c>0?0:3:re(l[0]-n)<gt?c>0?2:1:re(l[1]-e)<gt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var p=s(l,1),h=s(c,1);return p!==h?p-h:p===0?c[1]-l[1]:p===1?l[0]-c[0]:p===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,p=$u(),h,f,g,m,d,x,v,I,C,b,L,M={point:R,lineStart:O,lineEnd:Y,polygonStart:F,polygonEnd:$};function R(H,at){i(H,at)&&c.point(H,at)}function S(){for(var H=0,at=0,mt=f.length;at<mt;++at)for(var Ht=f[at],Jt=1,rr=Ht.length,ze=Ht[0],Fn,xn,pi=ze[0],ir=ze[1];Jt<rr;++Jt)Fn=pi,xn=ir,ze=Ht[Jt],pi=ze[0],ir=ze[1],xn<=r?ir>r&&(pi-Fn)*(r-xn)>(ir-xn)*(t-Fn)&&++H:ir<=r&&(pi-Fn)*(r-xn)<(ir-xn)*(t-Fn)&&--H;return H}function F(){c=p,h=[],f=[],L=!0}function $(){var H=S(),at=L&&H,mt=(h=Yu(h)).length;(at||mt)&&(l.polygonStart(),at&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),mt&&Xu(h,a,H,o,l),l.polygonEnd()),c=l,h=f=g=null}function O(){M.point=D,f&&f.push(g=[]),b=!0,C=!1,v=I=NaN}function Y(){h&&(D(m,d),x&&C&&p.rejoin(),h.push(p.result())),M.point=R,C&&c.lineEnd()}function D(H,at){var mt=i(H,at);if(f&&g.push([H,at]),b)m=H,d=at,x=mt,b=!1,mt&&(c.lineStart(),c.point(H,at));else if(mt&&C)c.point(H,at);else{var Ht=[v=Math.max(To,Math.min(Zi,v)),I=Math.max(To,Math.min(Zi,I))],Jt=[H=Math.max(To,Math.min(Zi,H)),at=Math.max(To,Math.min(Zi,at))];gp(Ht,Jt,t,e,n,r)?(C||(c.lineStart(),c.point(Ht[0],Ht[1])),c.point(Jt[0],Jt[1]),mt||c.lineEnd(),L=!1):mt&&(c.lineStart(),c.point(H,at),L=!1)}v=H,I=at,C=mt}return M}}var xs=Xr();function _p(t,e){var n=e[0],r=e[1],i=[Ot(n),-Pt(n),0],o=0,s=0;xs.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,p=l[c-1],h=p[0],f=p[1]/2+Fa,g=Ot(f),m=Pt(f),d=0;d<c;++d,h=v,g=C,m=b,p=x){var x=l[d],v=x[0],I=x[1]/2+Fa,C=Ot(I),b=Pt(I),L=v-h,M=L>=0?1:-1,R=M*L,S=R>it,F=g*C;if(xs.add(qi(F*M*Ot(R),m*b+F*Pt(R))),o+=S?L+M*tr:L,S^h>=n^v>=n){var $=Ho(zi(p),zi(x));Fs($);var O=Ho(i,$);Fs(O);var Y=(S^L>=0?-1:1)*oi(O[2]);(r>Y||r===Y&&($[0]||$[1]))&&(s+=S^L>=0?1:-1)}}return(o<-gt||o<gt&&xs<-gt)^s&1}Xr();function Xa(t){return t}Xr();Xr();var Ui=1/0,Wo=Ui,mo=-Ui,Ko=mo,ja={point:vp,lineStart:Ki,lineEnd:Ki,polygonStart:Ki,polygonEnd:Ki,result:function(){var t=[[Ui,Wo],[mo,Ko]];return mo=Ko=-(Wo=Ui=1/0),t}};function vp(t,e){t<Ui&&(Ui=t),t>mo&&(mo=t),e<Wo&&(Wo=e),e>Ko&&(Ko=e)}Xr();function Hu(t,e,n,r){return function(i,o){var s=e(o),a=i.invert(r[0],r[1]),u=$u(),l=e(u),c=!1,p,h,f,g={point:m,lineStart:x,lineEnd:v,polygonStart:function(){g.point=I,g.lineStart=C,g.lineEnd=b,h=[],p=[]},polygonEnd:function(){g.point=m,g.lineStart=x,g.lineEnd=v,h=Yu(h);var L=_p(p,a);h.length?(c||(o.polygonStart(),c=!0),Xu(h,xp,L,n,o)):L&&(c||(o.polygonStart(),c=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),c&&(o.polygonEnd(),c=!1),h=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(L,M){var R=i(L,M);t(L=R[0],M=R[1])&&o.point(L,M)}function d(L,M){var R=i(L,M);s.point(R[0],R[1])}function x(){g.point=d,s.lineStart()}function v(){g.point=m,s.lineEnd()}function I(L,M){f.push([L,M]);var R=i(L,M);l.point(R[0],R[1])}function C(){l.lineStart(),f=[]}function b(){I(f[0][0],f[0][1]),l.lineEnd();var L=l.clean(),M=u.result(),R,S=M.length,F,$,O;if(f.pop(),p.push(f),f=null,!!S){if(L&1){if($=M[0],(F=$.length-1)>0){for(c||(o.polygonStart(),c=!0),o.lineStart(),R=0;R<F;++R)o.point((O=$[R])[0],O[1]);o.lineEnd()}return}S>1&&L&2&&M.push(M.pop().concat(M.shift())),h.push(M.filter(Ep))}}return g}}function Ep(t){return t.length>1}function xp(t,e){return((t=t.x)[0]<0?t[1]-jn-gt:jn-t[1])-((e=e.x)[0]<0?e[1]-jn-gt:jn-e[1])}const Ya=Hu(function(){return!0},Ip,bp,[-it,-jn]);function Ip(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,s){var a=o>0?it:-it,u=re(o-e);re(u-it)<gt?(t.point(e,n=(n+s)/2>0?jn:-jn),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),i=0):r!==a&&u>=it&&(re(e-r)<gt&&(e-=r*gt),re(o-a)<gt&&(o-=a*gt),n=Np(e,n,o,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),i=0),t.point(e=o,n=s),r=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Np(t,e,n,r){var i,o,s=Ot(t-n);return re(s)>gt?cp((Ot(e)*(o=Pt(r))*Ot(n)-Ot(r)*(i=Pt(e))*Ot(t))/(i*o*s)):(e+r)/2}function bp(t,e,n,r){var i;if(t==null)i=n*jn,r.point(-it,i),r.point(0,i),r.point(it,i),r.point(it,0),r.point(it,-i),r.point(0,-i),r.point(-it,-i),r.point(-it,0),r.point(-it,i);else if(re(t[0]-e[0])>gt){var o=t[0]<e[0]?it:-it;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Cp(t,e){var n=Pt(t),r=n>0,i=re(n)>gt;function o(c,p,h,f){fp(f,t,e,h,c,p)}function s(c,p){return Pt(c)*Pt(p)>n}function a(c){var p,h,f,g,m;return{lineStart:function(){g=f=!1,m=1},point:function(d,x){var v=[d,x],I,C=s(d,x),b=r?C?0:l(d,x):C?l(d+(d<0?it:-it),x):0;if(!p&&(g=f=C)&&c.lineStart(),C!==f&&(I=u(p,v),(!I||Fo(p,I)||Fo(v,I))&&(v[0]+=gt,v[1]+=gt,C=s(v[0],v[1]))),C!==f)m=0,C?(c.lineStart(),I=u(v,p),c.point(I[0],I[1])):(I=u(p,v),c.point(I[0],I[1]),c.lineEnd()),p=I;else if(i&&p&&r^C){var L;!(b&h)&&(L=u(v,p,!0))&&(m=0,r?(c.lineStart(),c.point(L[0][0],L[0][1]),c.point(L[1][0],L[1][1]),c.lineEnd()):(c.point(L[1][0],L[1][1]),c.lineEnd(),c.lineStart(),c.point(L[0][0],L[0][1])))}C&&(!p||!Fo(p,v))&&c.point(v[0],v[1]),p=v,f=C,h=b},lineEnd:function(){f&&c.lineEnd(),p=null},clean:function(){return m|(g&&f)<<1}}}function u(c,p,h){var f=zi(c),g=zi(p),m=[1,0,0],d=Ho(f,g),x=Po(d,d),v=d[0],I=x-v*v;if(!I)return!h&&c;var C=n*x/I,b=-n*v/I,L=Ho(m,d),M=Oo(m,C),R=Oo(d,b);Es(M,R);var S=L,F=Po(M,S),$=Po(S,S),O=F*F-$*(Po(M,M)-1);if(!(O<0)){var Y=Yi(O),D=Oo(S,(-F-Y)/$);if(Es(D,M),D=As(D),!h)return D;var H=c[0],at=p[0],mt=c[1],Ht=p[1],Jt;at<H&&(Jt=H,H=at,at=Jt);var rr=at-H,ze=re(rr-it)<gt,Fn=ze||rr<gt;if(!ze&&Ht<mt&&(Jt=mt,mt=Ht,Ht=Jt),Fn?ze?mt+Ht>0^D[1]<(re(D[0]-H)<gt?mt:Ht):mt<=D[1]&&D[1]<=Ht:rr>it^(H<=D[0]&&D[0]<=at)){var xn=Oo(S,(-F+Y)/$);return Es(xn,M),[D,As(xn)]}}}function l(c,p){var h=r?t:it-t,f=0;return c<-h?f|=1:c>h&&(f|=2),p<-h?f|=4:p>h&&(f|=8),f}return Hu(s,a,o,r?[0,-t]:[-it,t-it])}function Wu(t){return function(e){var n=new ks;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ks(){}ks.prototype={constructor:ks,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ku(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),o!=null&&t.clipExtent(null),pp(n,t.stream(ja));var s=ja.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&t.clipExtent(o),t.scale(a*150).translate([u,l])}function Sp(t,e,n){return Ku(t,[[0,0],e],n)}var Ha=16,wp=Pt(30*tn);function Wa(t,e){return+e?Pp(t,e):Lp(t)}function Lp(t){return Wu({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Pp(t,e){function n(r,i,o,s,a,u,l,c,p,h,f,g,m,d){var x=l-r,v=c-i,I=x*x+v*v;if(I>4*e&&m--){var C=s+h,b=a+f,L=u+g,M=Yi(C*C+b*b+L*L),R=oi(L/=M),S=re(re(L)-1)<gt||re(o-p)<gt?(o+p)/2:qi(b,C),F=t(S,R),$=F[0],O=F[1],Y=$-r,D=O-i,H=v*Y-x*D;(H*H/I>e||re((x*Y+v*D)/I-.5)>.3||s*h+a*f+u*g<wp)&&(n(r,i,o,s,a,u,$,O,S,C/=M,b/=M,L,m,d),d.point($,O),n($,O,S,C,b,L,l,c,p,h,f,g,m,d))}}return function(r){var i,o,s,a,u,l,c,p,h,f,g,m,d={point:x,lineStart:v,lineEnd:C,polygonStart:function(){r.polygonStart(),d.lineStart=b},polygonEnd:function(){r.polygonEnd(),d.lineStart=v}};function x(R,S){R=t(R,S),r.point(R[0],R[1])}function v(){p=NaN,d.point=I,r.lineStart()}function I(R,S){var F=zi([R,S]),$=t(R,S);n(p,h,c,f,g,m,p=$[0],h=$[1],c=R,f=F[0],g=F[1],m=F[2],Ha,r),r.point(p,h)}function C(){d.point=x,r.lineEnd()}function b(){v(),d.point=L,d.lineEnd=M}function L(R,S){I(i=R,S),o=p,s=h,a=f,u=g,l=m,d.point=I}function M(){n(p,h,c,f,g,m,o,s,i,a,u,l,Ha,r),d.lineEnd=C,C()}return d}}var Op=Wu({point:function(t,e){this.stream.point(t*tn,e*tn)}});function Rp(t){return Tp(function(){return t})()}function Tp(t){var e,n=150,r=480,i=250,o,s,a=0,u=0,l=0,c=0,p=0,h,f,g=null,m=Ya,d=null,x,v,I,C=Xa,b=.5,L=Wa($,b),M,R;function S(D){return D=f(D[0]*tn,D[1]*tn),[D[0]*n+o,s-D[1]*n]}function F(D){return D=f.invert((D[0]-o)/n,(s-D[1])/n),D&&[D[0]*br,D[1]*br]}function $(D,H){return D=e(D,H),[D[0]*n+o,s-D[1]*n]}S.stream=function(D){return M&&R===D?M:M=Op(m(h,L(C(R=D))))},S.clipAngle=function(D){return arguments.length?(m=+D?Cp(g=D*tn,6*tn):(g=null,Ya),Y()):g*br},S.clipExtent=function(D){return arguments.length?(C=D==null?(d=x=v=I=null,Xa):mp(d=+D[0][0],x=+D[0][1],v=+D[1][0],I=+D[1][1]),Y()):d==null?null:[[d,x],[v,I]]},S.scale=function(D){return arguments.length?(n=+D,O()):n},S.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],O()):[r,i]},S.center=function(D){return arguments.length?(a=D[0]%360*tn,u=D[1]%360*tn,O()):[a*br,u*br]},S.rotate=function(D){return arguments.length?(l=D[0]%360*tn,c=D[1]%360*tn,p=D.length>2?D[2]%360*tn:0,O()):[l*br,c*br,p*br]},S.precision=function(D){return arguments.length?(L=Wa($,b=D*D),Y()):Yi(b)},S.fitExtent=function(D,H){return Ku(S,D,H)},S.fitSize=function(D,H){return Sp(S,D,H)};function O(){f=Vu(h=hp(l,c,p),e);var D=e(a,u);return o=r-D[0]*n,s=i+D[1]*n,Y()}function Y(){return M=R=null,S}return function(){return e=t.apply(this,arguments),S.invert=e.invert&&F,O()}}function Zu(t){return function(e,n){var r=Pt(e),i=Pt(n),o=t(r*i);return[o*i*Ot(e),o*Ot(n)]}}function Qu(t){return function(e,n){var r=Yi(e*e+n*n),i=t(r),o=Ot(i),s=Pt(i);return[qi(e*o,r*s),oi(r&&n*o/r)]}}var Mp=Zu(function(t){return Yi(2/(1+t))});Mp.invert=Qu(function(t){return 2*oi(t/2)});var Ju=Zu(function(t){return(t=Uu(t))&&t/Ot(t)});Ju.invert=Qu(function(t){return t});function Dp(){return Rp(Ju).scale(79.4188).clipAngle(180-.001)}function Ka(t,e){return[t,e]}Ka.invert=Ka;function Ap(t,e,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return gu(t,function(s){var a=Go(s,e,r,i);a&&o.push(a)}),Rs(o);case"FeatureCollection":return Oa(t,function(s){var a=Go(s,e,r,i);a&&Oa(a,function(u){u&&o.push(u)})}),Rs(o)}return Go(t,e,r,i)}function Go(t,e,n,r){var i=t.properties||{},o=t.type==="Feature"?t.geometry:t;if(o.type==="GeometryCollection"){var s=[];return gu(t,function(m){var d=Go(m,e,n,r);d&&s.push(d)}),Rs(s)}var a=Fp(o),u={type:o.type,coordinates:el(o.coordinates,a)},l=new Ys,c=l.read(u),p=qc(zc(e,n),"meters"),h=Ut.bufferOp(c,p,r),f=new bu;if(h=f.write(h),!tl(h.coordinates)){var g={type:h.type,coordinates:nl(h.coordinates,a)};return Zo(g,i)}}function tl(t){return Array.isArray(t[0])?tl(t[0]):isNaN(t[0])}function el(t,e){return typeof t[0]!="object"?e(t):t.map(function(n){return el(n,e)})}function nl(t,e){return typeof t[0]!="object"?e.invert(t):t.map(function(n){return nl(n,e)})}function Fp(t){var e=jc(t).geometry.coordinates,n=[-e[0],-e[1]];return Dp().rotate(n).scale(xe)}function Gp(t,e){var n=qo(t),r=qo(e),i=t.properties||{},o=lu.difference(n.coordinates,r.coordinates);return o.length===0?null:o.length===1?pu(o[0],i):hu(o,i)}function Za(t){let e;for(const n of t)e&&n[0]-e[0]>=180?n[0]-=360:e&&n[0]-e[0]<-180&&(n[0]+=360),e=n}function Qa(t,e){const n=Gp({type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]},t);if(!n)return;n.properties={isMask:"y"};const r=Ap(t,0);if(r.geometry.type==="Polygon")for(const i of r.geometry.coordinates)Za(i);else for(const i of r.geometry.coordinates)for(const o of i)Za(o);e({type:"FeatureCollection",features:[r,n]})}let Ja={type:"FeatureCollection",features:[]};function kp(t,e,n=!0,r=!0,i={},o={},s={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let a,u,l=[],c,p;function h(){(s!=null&&s.fill||s!=null&&s.line)&&t.addSource("full-geom",{type:"geojson",data:Ja}),s!=null&&s.fill&&t.addLayer({...s==null?void 0:s.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),s!=null&&s.line&&t.addLayer({...s==null?void 0:s.line,id:"full-geom-line",type:"line",source:"full-geom"})}t.loaded()?h():t.once("load",()=>{h()});const f=d=>{a==null||a({type:"mapClick",coordinates:[d.lngLat.lng,d.lngLat.lat]})},g=()=>{let d;const x=t.getZoom()>9?[(d=t.getCenter().wrap()).lng,d.lat]:void 0;u!==x&&(u=x,a==null||a({type:"proximityChange",proximity:x}))};function m(d=!1){if(!e)throw new Error;const x=document.createElement("div");return d&&x.classList.add("marker-interactive"),new Xc({props:{displayIn:"maplibre"},target:x}),new e.Marker({element:x,offset:[1,-13]})}return{setEventHandler(d){d?(a=d,t.on("moveend",g),g(),t.on("click",f)):(t.off("moveend",g),a==null||a({type:"proximityChange",proximity:void 0}),a=void 0,t.off("click",f))},flyTo(d,x){t.flyTo({center:d,zoom:x,...i})},fitBounds(d,x,v){t.fitBounds([[d[0],d[1]],[d[2],d[3]]],{padding:x,maxZoom:v,...o})},indicateReverse(d){t.getCanvasContainer().style.cursor=d?"crosshair":""},setReverseMarker(d){!e||!n||(p?d?p.setLngLat(d):(p.remove(),p=void 0):d&&(p=(typeof n=="object"?new e.Marker(n):m()).setLngLat(d).addTo(t),p.getElement().classList.add("marker-reverse")))},setMarkers(d,x){if(!n)return;function v(I){var C;(C=t.getSource("full-geom"))==null||C.setData(I)}for(const I of l)I.remove();if(l.length=0,v(Ja),!!e){if(x){let I=!1;if(x.geometry.type==="GeometryCollection"){const C=x.geometry.geometries.filter(b=>b.type==="Polygon"||b.type==="MultiPolygon");if(C.length>0){let b=C.pop();for(const L of C)b=Uc(b,L);Qa({...x,geometry:b},v),I=!0}else{const b=x.geometry.geometries.filter(L=>L.type==="LineString"||L.type==="MultiLineString");b.length>0&&(v({...x,geometry:{type:"GeometryCollection",geometries:b}}),I=!0)}}if(!I){if(x.geometry.type==="Polygon"||x.geometry.type==="MultiPolygon")Qa(x,v);else if(x.geometry.type==="LineString"||x.geometry.type==="MultiLineString"){v(x);return}}n&&l.push((typeof n=="object"?new e.Marker(n):m()).setLngLat(x.center).addTo(t))}if(r)for(const I of d??[]){if(I===x)continue;const C=(typeof r=="object"?new e.Marker(r):m(!0)).setLngLat(I.center).setPopup(new e.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(I.place_name.replace(/,.*/,""))).addTo(t),b=C.getElement();b.addEventListener("click",L=>{L.stopPropagation(),a==null||a({type:"markerClick",id:I.id})}),b.addEventListener("mouseenter",()=>{a==null||a({type:"markerMouseEnter",id:I.id}),C.togglePopup()}),b.addEventListener("mouseleave",()=>{a==null||a({type:"markerMouseLeave",id:I.id}),C.togglePopup()}),l.push(C)}}},setSelectedMarker(d){c&&c.getElement().classList.toggle("marker-selected",!1),c=d>-1?l[d]:void 0,c==null||c.getElement().classList.toggle("marker-selected",!0)}}}var zn,vi;class Bp extends EventTarget{constructor(e={}){super(),sa(this,zn,void 0),sa(this,vi,void 0),ys(this,vi,e)}onAdd(e){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:s,...a}=or(this,vi),u=typeof o=="boolean"?{}:o,l=this.getExtraProps(e,n),c={mapController:kp(e,this.getMapLibreGl(),r,i,u,u,s),flyTo:o===void 0?!0:!!o,apiKey:"",...l,...a};if(!c.apiKey)throw new Error("no apiKey provided");ys(this,zn,new yc({target:n,props:c}));for(const p of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])or(this,zn).$on(p,h=>this.dispatchEvent(h));return n}setOptions(e){var n;ys(this,vi,e);const{marker:r,showResultMarkers:i,flyTo:o,fullGeometryStyle:s,...a}=or(this,vi);(n=or(this,zn))==null||n.$set(a)}setQuery(e,n=!0){var r;(r=or(this,zn))==null||r.setQuery(e,n)}setReverseMode(e){var n;(n=or(this,zn))==null||n.$set({reverseActive:e})}focus(){var e;(e=or(this,zn))==null||e.focus()}blur(){var e;(e=or(this,zn))==null||e.blur()}onRemove(){var e;(e=or(this,zn))==null||e.$destroy()}}zn=new WeakMap,vi=new WeakMap;class qp extends Bp{getMapLibreGl(){return El}getExtraProps(e,n){return{}}}const Vp=t=>{const e=new qp({apiKey:xl,maplibregl:Il,flyTo:{duration:100}});t.addControl(e)};export{jp as _hW,Vp as s_Oode7zDFbHo};
